<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Global Diet Visualizer</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Inter font for modern look -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Chart.js for donut -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
 <!--  Generate pdf-->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    :root {
  --brand: #E3B6E5;   /* violet */
  --brand-2: #FFCECE; /* soft pink */
  --bg-card: #FFFCE1; /* vanilla */
  --bg-alt: #E5FFE1;  /* mint */
  --text-dark: #7A7789; /* muted indigo */
}

    html { scroll-behavior:smooth; }
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; }
    /* Glass cards */
    .glass { backdrop-filter: blur(8px); background: rgba(255,255,255,.7); }
    .elevate { box-shadow: 0 10px 30px rgba(2, 6, 23, .08); }
    /* Hide all views by default */
    .view { display:none; }
    .view.active { display:block; }
    /* Smooth card hover */
    .hvr { transition: transform .25s ease, box-shadow .25s ease; }
    .hvr:hover { transform: translateY(-4px); box-shadow: 0 12px 30px rgba(2,6,23,.12); }
    /* Compact input focus */
    input, select, button, textarea { outline: none; }
    .pill { border-radius: 9999px; }
    .gradient {
  background: linear-gradient(135deg, var(--brand), var(--brand-2));
}


    .border-dashed-2 { border-width:2px; border-style:dashed; }
    /* Loading animation */
    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid #3498db;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: inline-block;
      margin-right: 8px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    /* Badge animations */
    @keyframes bounceIn {
      0% { transform: scale(0.8); opacity: 0; }
      60% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }
    .badge-earned {
      animation: bounceIn 0.6s ease-out;
    }
    /* Achievement progress bar */
    .progress-bar {
      height: 6px;
      border-radius: 3px;
      overflow: hidden;
      background-color: #e5e7eb;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      transition: width 0.5s ease;
    }

    /* Diet Chart specific styles */
.meal-time {
  background: linear-gradient(135deg, #2563eb, #06b6d4);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
}

.meal-card {
  transition: all 0.3s ease;
}

.meal-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

@media print {
  .text-slate-500 {
    color: #000 !important;   
    font-weight: bold !important;
    font-size: 12px !important;
  }

  .text-sm {
    font-size: 12px !important;
  }
}

.video-link {
  transition: all 0.2s ease;
}

.video-link:hover {
  color: #da4fda; /* Light purple */
  text-decoration: underline;
  transform: scale(1.05);
}
/* Exercise Planner Styles */
.goal-btn {
  transition: all 0.3s ease;
}

.exercise-card {
  transition: all 0.3s ease;
}

.exercise-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

.add-button {
  transition: all 0.2s ease;
}

.add-button:hover {
  transform: scale(1.05);
}

.remove-btn {
  transition: all 0.2s ease;
}

.remove-btn:hover {
  transform: scale(1.1);
  background: #e74c3c;
}

/* Dark Mode Styles */
.dark-mode {
  background: linear-gradient(135deg, #1a202c, #2d3748) !important;
  color: #e2e8f0 !important;
}

.dark-mode .glass {
  background: rgba(26, 32, 44, 0.8) !important;
}

.dark-mode .elevate {
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3) !important;
}

.dark-mode header {
  background: rgba(26, 32, 44, 0.9) !important;
  border-bottom-color: #4a5568 !important;
}

.dark-mode .bg-white {
  background-color: #2d3748 !important;
}

.dark-mode .text-slate-600,
.dark-mode .text-slate-500 {
  color: #cbd5e0 !important;
}

.dark-mode .border-slate-300 {
  border-color: #4a5568 !important;
}

.dark-mode input,
.dark-mode select,
.dark-mode textarea {
  background-color: #2d3748 !important;
  border-color: #4a5568 !important;
  color: #e2e8f0 !important;
}

.dark-mode input::placeholder,
.dark-mode select::placeholder,
.dark-mode textarea::placeholder {
  color: #a0aec0 !important;
}

.dark-mode .bg-slate-50 {
  background-color: #2d3748 !important;
}

.dark-mode .bg-slate-100 {
  background-color: #4a5568 !important;
}

.dark-mode .border-slate-200 {
  border-color: #4a5568 !important;
}

.dark-mode footer {
  background-color: #1a202c !important;
  color: #cbd5e0 !important;
}

/* Specific component dark mode styles */
.dark-mode .goal-card,
.dark-mode .exercise-card,
.dark-mode .pref-pill {
  background-color: #2d3748 !important;
  color: #e2e8f0 !important;
  border-color: #4a5568 !important;
}

.dark-mode .pref-pill.bg-blue-100 {
  background-color: #2c5282 !important;
  color: #ebf8ff !important;
  border-color: #2c5282 !important;
}

.dark-mode #chatbotModal,
.dark-mode #aiModal,
.dark-mode #videoModal {
  background: rgba(0, 0, 0, 0.7) !important;
}

.dark-mode #chatbotModal > div,
.dark-mode #aiModal > div,
.dark-mode #videoModal > div {
  background-color: #2d3748 !important;
  color: #e2e8f0 !important;
}

/* Make sure text is visible in dark mode */
.dark-mode h1,
.dark-mode h2,
.dark-mode h3,
.dark-mode h4,
.dark-mode h5,
.dark-mode h6 {
  color: #e2e8f0 !important;
}

/* Chart.js canvas background */
.dark-mode canvas {
  background-color: #2d3748 !important;
}

header {
  backdrop-filter: blur(8px);
  background: rgba(255, 255, 255, 0.8);
  border-bottom: 1px solid #e2e8f0;
}

.dark-mode header {
  background: rgba(26, 32, 44, 0.9) !important;
  border-bottom-color: #4a5568 !important;
}

#adaptive-notification {
  position: fixed; left:50%; bottom:20px;
  transform: translateX(-50%);
  background:#e7f5ff; color:#064e3b;
  padding:10px 14px; border-radius:10px;
  box-shadow:0 6px 20px rgba(0,0,0,0.08);
  z-index:9999;
  animation: slideInUp .5s ease-out;
}
@keyframes slideInUp {
  from {transform:translate(-50%,100px);opacity:0;}
  to {transform:translate(-50%,0);opacity:1;}
}

 /* Progress Forecaster Styles */
    #weightHistory div {
      padding: 4px 0;
      border-bottom: 1px solid #e5e7eb; /* light gray */
    }

    #forecastResult {
      margin-top: 15px;
      padding: 10px;
      background: #f9fafb;
      border-radius: 8px;
    }

    .card {
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(12px);
  border-radius: 20px;
  padding: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px rgba(0,0,0,0.15);
}

.btn {
  background: linear-gradient(135deg, #E75480, #FFB6C1);
  color: white;
  font-weight: 600;
  border: none;
  border-radius: 50px;
  padding: 10px 18px;
  transition: all 0.3s ease;
}

.btn:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 15px rgba(231, 84, 128, 0.4);
}

#forecastResult {
  opacity: 0;
  transform: translateY(10px);
  transition: all 0.6s ease;
}

#forecastResult.show {
  opacity: 1;
  transform: translateY(0);
}
@keyframes bounceIn {
  0% { transform: scale(0.9); opacity: 0; }
  60% { transform: scale(1.05); opacity: 1; }
  100% { transform: scale(1); }
}

#weightHistory div {
  animation: bounceIn 0.5s ease-out;
}

/* Challenge card hover effects */
.challenge-card {
  transition: all 0.3s ease;
}

.challenge-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

/* Toggle switch styling */
input:checked ~ .dot {
  transform: translateX(100%);
  background-color: #48bb78;
}


  </style>
</head>
<body class="min-h-screen bg-[radial-gradient(1200px_700px_at_80%_-10%,#E3B6E5,transparent),radial-gradient(800px_600px_at_-10%_20%,#FFCECE,transparent)] text-[#7A7789]">

  <!-- Sticky Navbar -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="text-2xl">üçΩÔ∏è</span>
        <a href="#home" class="font-extrabold tracking-tight text-xl">Nutri Globe</a>
        <span id="activeContext" class="ml-3 hidden md:inline text-sm text-slate-500"></span>
      </div>
      <nav class="hidden md:flex items-center gap-6">
  <a class="text-slate-600 hover:text-slate-900" href="#home">Home</a>
  <a class="text-slate-600 hover:text-slate-900" href="#country">Countries</a>
  <a class="text-slate-600 hover:text-slate-900" href="#goals">Goals</a>
  <a class="text-slate-600 hover:text-slate-900" href="#bmi">BMI</a>
  <a class="text-slate-600 hover:text-slate-900" href="#achievements">Achievements</a>
  <a class="text-slate-600 hover:text-slate-900" href="#nutrition-learning">Nutrition Learning</a>
  <a class="text-slate-600 hover:text-slate-900" href="#progress-forecaster">Progress Forecast</a>
  <a class="text-slate-600 hover:text-slate-900" href="#ai-challenges">AI Challenges</a>


  <!-- Hidden by default -->
  <a class="text-slate-600 hover:text-slate-900 hidden" id="navExercise" href="#exercise-planner">Recommended Exercise</a>

</nav>


<button id="darkModeToggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 ml-4">
  <span class="dark-mode-icon">üåô</span>
  <span class="light-mode-icon hidden">‚òÄÔ∏è</span>
</button>

      <div class="flex items-center gap-3">
        <button id="btnLoginTop" class="px-4 py-2 pill border border-slate-300 hover:border-slate-400 hvr">Login</button>
        <a id="btnGetStarted" class="px-4 py-2 pill text-white bg-[#E75480]">Get Started</a>

      </div>
     

    </div>
  </header>

  <!-- Home View -->
  <section id="home" class="view active">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
      <div class="grid lg:grid-cols-2 gap-10 items-center">
        <div>
          <h1 class="text-4xl sm:text-5xl font-black leading-tight">
            Virtual Meal Planner & Calorie Tracker
          </h1>
          <p class="mt-5 text-lg text-slate-600">
            Build a personalized 7‚Äëday meal plan tailored to your <span class="font-semibold">country</span> and <span class="font-semibold">health goals</span> in minutes.
          </p>
          <div class="mt-8 flex flex-wrap gap-4">
            <a href="#country" class="px-6 py-3 pill text-white bg-[#E75480] hvr">Start Planning</a>

  
          </div>
          <div class="mt-10 flex items-center gap-6 text-slate-500">
            <div class="flex -space-x-2">
              <img class="w-9 h-9 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1544006659-f0b21884ce1d?q=80&w=120&auto=format&fit=crop"/>
              <img class="w-9 h-9 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1556157382-97eda2d62296?q=80&w=120&auto=format&fit=crop"/>
              <img class="w-9 h-9 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1548142813-c348350df52b?q=80&w=120&auto=format&fit=crop"/>
            </div>
            <span class="text-sm">Trusted by food lovers in 20+ countries</span>
          </div>
        </div>
        <div class="glass elevate rounded-3xl p-6 lg:p-10">
          <img alt="hero" class="rounded-2xl object-cover w-full h-[360px]" src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?q=80&w=1200&auto=format&fit=crop"/>
          <div class="mt-6 grid grid-cols-3 gap-4 text-center">
            <div class="p-4 rounded-2xl bg-white shadow-sm">
              <div class="text-3xl font-extrabold" id="stat-cal">2000</div>
              <div class="text-sm text-slate-500">Calories/day</div>
            </div>
            <div class="p-4 rounded-2xl bg-white shadow-sm">
              <div class="text-3xl font-extrabold" id="stat-prot">120g</div>
              <div class="text-sm text-slate-500">Protein</div>
            </div>
            <div class="p-4 rounded-2xl bg-white shadow-sm">
              <div class="text-3xl font-extrabold" id="stat-country">‚Äì</div>
              <div class="text-sm text-slate-500">Selected Country</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Feature row -->
      <div class="mt-16 grid md:grid-cols-3 gap-6">
        <div class="p-6 rounded-2xl bg-[#E3B6E533] elevate hvr">
          <div class="text-2xl">üåç</div>
          <h3 class="mt-4 font-semibold text-lg">Country‚Äëlocal Meals</h3>
          <p class="text-slate-600 mt-2">Enjoy meals tailored to your cuisine and locally available ingredients.</p>
        </div>
        <div class="p-6 rounded-2xl bg-[#E3B6E533] elevate hvr">
          <div class="text-2xl">üìÖ</div>
          <h3 class="mt-4 font-semibold text-lg">7‚Äëday Rotating Plan</h3>
          <p class="text-slate-600 mt-2">Diverse menu that changes throughout the week (sensible repeats allowed).</p>
        </div>
        <div class="p-6 rounded-2xl bg-[#E3B6E533] elevate hvr">
          <div class="text-2xl">üßë‚Äç‚öïÔ∏è</div>
          <h3 class="mt-4 font-semibold text-lg">Evidence‚Äëbased</h3>
          <p class="text-slate-600 mt-2">Macro estimates and goals aligned to your BMI and target.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Login View -->
  <section id="login" class="view">
    <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8 pt-16">
      <div class="bg-white elevate rounded-2xl p-8">
        <h2 class="text-2xl font-bold">Welcome back</h2>
        <p class="text-slate-600 mt-1">Log in to save your preferences.</p>
        <form id="loginForm" class="mt-6 space-y-4">
          <div>
            <label class="text-sm text-slate-600">Email</label>
            <input type="email" required class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-slate-500" placeholder="you@example.com" id="loginEmail">
          </div>
          <div>
            <label class="text-sm text-slate-600">Password</label>
            <input type="password" required class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-slate-500" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" id="loginPassword">
          </div>
          <div id="loginError" class="hidden text-sm text-red-600 bg-red-50 p-3 rounded-lg"></div>
          <button type="submit" class="w-full pill gradient text-white py-3 flex items-center justify-center" id="loginButton">
            <span id="loginButtonText">Log In</span>
            <div id="loginSpinner" class="spinner hidden"></div>
          </button>
          <p class="text-center text-sm text-slate-500">No account? <a class="text-blue-600" href="#" id="showRegister">Sign up</a></p>
        </form>
      </div>
    </div>
  </section>

  <!-- Register View -->
  <section id="register" class="view">
    <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8 pt-16">
      <div class="bg-white elevate rounded-2xl p-8">
        <h2 class="text-2xl font-bold">Create an account</h2>
        <p class="text-slate-600 mt-1">Sign up to save your meal plans and preferences.</p>
        <form id="registerForm" class="mt-6 space-y-4">
          <div>
            <label class="text-sm text-slate-600">Full Name</label>
            <input type="text" required class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-slate-500" placeholder="John Doe" id="registerName">
          </div>
          <div>
            <label class="text-sm text-slate-600">Email</label>
            <input type="email" required class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-slate-500" placeholder="you@example.com" id="registerEmail">
          </div>
          <div>
            <label class="text-sm text-slate-600">Password</label>
            <input type="password" required class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-slate-500" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" id="registerPassword">
          </div>
          <div>
            <label class="text-sm text-slate-600">Confirm Password</label>
            <input type="password" required class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-slate-500" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" id="registerConfirmPassword">
          </div>
          <div id="registerError" class="hidden text-sm text-red-600 bg-red-50 p-3 rounded-lg"></div>
          <button type="submit" class="w-full pill gradient text-white py-3 flex items-center justify-center" id="registerButton">
            <span id="registerButtonText">Create Account</span>
            <div id="registerSpinner" class="spinner hidden"></div>
          </button>
          <p class="text-center text-sm text-slate-500">Already have an account? <a class="text-blue-600" href="#" id="showLogin">Log in</a></p>
        </form>
      </div>
    </div>
  </section>

  <!-- Country Selection View -->
  <section id="country" class="view">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
      <div class="flex items-end justify-between">
        <div>
          <h2 class="text-3xl font-extrabold">Choose Your Country</h2>
          <p class="text-slate-600 mt-1">20+ cuisines. Pick one to localize your meal suggestions.</p>
        </div>
        <div class="flex gap-3">
          <input id="countrySearch" class="px-4 py-2 rounded-xl border border-slate-300" placeholder="Search country‚Ä¶"/>
          <button id="toGoalsFromCountry" class="pill px-4 py-2 border border-slate-300">Next</button>
        </div>
      </div>

      <div id="countryGrid" class="mt-8 grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
    </div>
  </section>

  <!-- Goal Selection View -->
  <section id="goals" class="view">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
      <h2 class="text-3xl font-extrabold">Select Your Goal</h2>
      <p class="text-slate-600 mt-1">We‚Äôll adjust calories and macros accordingly.</p>
      <div class="mt-8 grid md:grid-cols-3 gap-6">
        <button data-goal="loss" class="goal-card bg-white elevate rounded-2xl p-6 text-left hvr">
          <div class="text-3xl">ü•ó</div>
          <h3 class="mt-4 font-bold text-xl">Weight Loss</h3>
          <p class="text-slate-600 mt-2">Mild calorie deficit with higher protein & fiber.</p>
        </button>
        <button data-goal="maintain" class="goal-card bg-white elevate rounded-2xl p-6 text-left hvr">
          <div class="text-3xl">‚öñÔ∏è</div>
          <h3 class="mt-4 font-bold text-xl">Maintain Weight</h3>
          <p class="text-slate-600 mt-2">Balanced macros for sustainable energy.</p>
        </button>
        <button data-goal="gain" class="goal-card bg-white elevate rounded-2xl p-6 text-left hvr">
          <div class="text-3xl">üèãÔ∏è</div>
          <h3 class="mt-4 font-bold text-xl">Weight Gain</h3>
          <p class="text-slate-600 mt-2">Small surplus with quality carbs and protein.</p>
        </button>
      </div>

      <div id="challengeSelector" class="mt-8">
  <h3 class="text-xl font-bold mb-4">Select Challenge Duration</h3>
  <div class="flex gap-4 justify-center">
    <button data-days="14" class="challenge-duration pill px-5 py-3 border border-slate-300">14 Days</button>
    <button data-days="21" class="challenge-duration pill px-5 py-3 border border-slate-300">21 Days</button>
    <button data-days="30" class="challenge-duration pill px-5 py-3 text-white gradient">30 Days</button>
  </div>
</div>

      <div class="mt-8 flex gap-3">
        <a href="#bmi" class="pill px-5 py-3 border border-slate-300">Calculate BMI</a>
        <a href="#planner" class="pill px-5 py-3 text-white gradient">Generate Meal Plan</a>
      </div>
    </div>
  </section>

  <!-- BMI Calculator View (styled to match provided screenshot) -->
  <section id="bmi" class="view">
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
    <div class="bg-white elevate rounded-3xl p-8">
      <h2 class="text-4xl font-extrabold">Virtual Meal Planner & Calorie Tracker</h2>

      <div class="mt-8 grid lg:grid-cols-2 gap-8">
        <!-- BMI FORM -->
        <div class="bg-slate-50 rounded-2xl p-6">
          <h3 class="text-2xl font-bold">BMI Calculator</h3>
          <div class="mt-6 space-y-4">

            <!-- Full Name -->
            <div>
              <label class="block text-sm text-slate-600">Full Name *</label>
              <input id="fullName" type="text" class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300" placeholder="Enter your name">
            </div>

            <!-- Age + Gender -->
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-slate-600">Age *</label>
                <input id="age" type="number" class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300" placeholder="e.g. 19">
              </div>
              <div>
                <label class="block text-sm text-slate-600">Gender</label>
                <select id="gender" class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300">
                  <option>Male</option>
                  <option>Female</option>
                </select>
              </div>
            </div>

            <!-- Height -->
            <div>
              <label class="block text-sm text-slate-600">Height (cm)</label>
              <input id="bmiHeight" type="number" class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300" placeholder="170" value="170">
            </div>

            <!-- Weight -->
            <div>
              <label class="block text-sm text-slate-600">Weight (kg)</label>
              <input id="bmiWeight" type="number" class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300" placeholder="70" value="70">
            </div>

            <!-- Activity Level -->
            <div>
              <label class="block text-sm text-slate-600">Activity Level</label>
              <select id="activityLevel" class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300">
                <option>Sedentary (little/no exercise)</option>
                <option>Lightly Active</option>
                <option>Moderately Active</option>
                <option>Very Active</option>
              </select>
            </div>

            <!-- Health Goal -->
            <div>
              <label class="block text-sm text-slate-600">Health Goal</label>
              <select id="healthGoal" class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300">
                <option>Lose Weight</option>
                <option>Maintain Weight</option>
                <option>Gain Weight</option>
              </select>
            </div>

            <!-- Diet Preference -->
            <div>
              <label class="block text-sm text-slate-600">Diet Preference</label>
              <select id="dietPref" class="mt-1 w-full px-4 py-3 rounded-xl border border-slate-300">
                <option>Non-Vegetarian</option>
                <option>Vegetarian</option>
                <option>Vegan</option>
              </select>
            </div>

            <!-- Submit -->
            <button id="calcBMI" class="pill px-5 py-3 text-white gradient">Calculate BMI & Get Meal Plan</button>
            <div id="bmiBadge" class="hidden mt-4 p-4 rounded-xl bg-emerald-100 text-emerald-900 font-semibold"></div>
          </div>

          <div id="bmiLog" class="mt-6 rounded-xl bg-white p-4 text-slate-600 text-sm max-h-56 overflow-auto border border-slate-200"></div>
        </div>

        <!-- MACRO RESULTS -->
        <div class="space-y-6">
          <div class="grid grid-cols-3 gap-4">
            <div class="bg-white rounded-2xl p-6 text-center border border-slate-200">
              <div id="sumCal" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Calories</div>
            </div>
            <div class="bg-white rounded-2xl p-6 text-center border border-slate-200">
              <div id="sumProt" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Protein</div>
            </div>
            <div class="bg-white rounded-2xl p-6 text-center border border-slate-200">
              <div id="sumCarb" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Carbs</div>
            </div>
            <div class="bg-white rounded-2xl p-6 text-center border border-slate-200">
              <div id="sumFat" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Fat</div>
            </div>
            <div class="bg-white rounded-2xl p-6 text-center border border-slate-200">
              <div id="sumFiber" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Fiber</div>
            </div>
            <div class="bg-white rounded-2xl p-6 text-center border border-slate-200">
              <div id="sumSugar" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Sugar</div>
            </div>
          </div>
          <canvas id="macroChart" class="bg-white rounded-2xl p-6 border border-slate-200"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- BMI RESULTS PANEL -->
  <div class="mt-8 bg-slate-50 rounded-2xl p-6">
    <h3 class="text-xl font-bold mb-4">Your BMI Results</h3>
    <p id="bmiValue" class="text-3xl font-bold">--</p>
    <p id="bmiCategory" class="text-lg text-emerald-600">---</p>

    <div class="mt-4 p-4 bg-white rounded-lg border">
      <h4 class="font-bold">Personalized Recommendation:</h4>
      <p id="bmiRecommendation">Enter your details to see your recommendation.</p>
    </div>

    <!-- BMI Reference -->
    <div class="mt-6">
      <h4 class="font-bold">BMI Scale Reference</h4>
      <ul class="space-y-2 text-sm">
        <li><span class="inline-block w-3 h-3 rounded-full bg-blue-500 mr-2"></span> Below 18.5 ‚Äì <b>Underweight</b></li>
        <li><span class="inline-block w-3 h-3 rounded-full bg-green-500 mr-2"></span> 18.5 ‚Äì 24.9 ‚Äì <b>Normal weight</b></li>
        <li><span class="inline-block w-3 h-3 rounded-full bg-yellow-500 mr-2"></span> 25.0 ‚Äì 29.9 ‚Äì <b>Overweight</b></li>
        <li><span class="inline-block w-3 h-3 rounded-full bg-red-500 mr-2"></span> 30.0 and above ‚Äì <b>Obese</b></li>
      </ul>
    </div>
  </div>
</section>


  <!-- Meal Planner View -->
  <section id="planner" class="view">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
      <div class="bg-white elevate rounded-3xl p-8">
        <div class="flex flex-wrap items-end justify-between gap-4">
          <div>
            <h2 class="text-3xl font-extrabold">Weekly Meal Plan</h2>
            <p class="text-slate-600 mt-1">Based on your country & goal</p>
          </div>
          <div class="flex gap-3">
            <label class="text-sm self-center">Select Day:</label>
            <select id="daySelect" class="px-4 py-2 rounded-xl border border-slate-300">
              <option>Monday</option><option>Tuesday</option><option>Wednesday</option>
              <option>Thursday</option><option>Friday</option><option>Saturday</option><option>Sunday</option>
            </select>
            <button id="regenPlan" class="pill px-4 py-2 border border-slate-300">Regenerate</button>
            <button id="aiRecommend" class="pill px-4 py-2 text-white gradient">AI Recommendations</button>
          </div>
        </div>

        <div class="mt-6 grid md:grid-cols-3 gap-6">
          <div>
            <h3 class="font-semibold mb-3">Breakfast</h3>
            <div id="colBreakfast" class="min-h-[420px] rounded-2xl bg-slate-50 border-dashed-2 border-slate-300 p-4 grid gap-4"></div>
          </div>
          <div>
            <h3 class="font-semibold mb-3">Lunch</h3>
            <div id="colLunch" class="min-h-[420px] rounded-2xl bg-slate-50 border-dashed-2 border-slate-300 p-4 grid gap-4"></div>
          </div>
          <div>
            <h3 class="font-semibold mb-3">Dinner</h3>
            <div id="colDinner" class="min-h-[420px] rounded-2xl bg-slate-50 border-dashed-2 border-slate-300 p-4 grid gap-4"></div>
          </div>
        </div>

        <div class="mt-10">
          <h3 class="text-2xl font-bold mb-4">Daily Nutrition Summary</h3>
          <div class="grid sm:grid-cols-3 lg:grid-cols-6 gap-4">
            <div class="bg-slate-50 rounded-2xl p-6 text-center">
              <div id="dCal" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Calories</div>
            </div>
            <div class="bg-slate-50 rounded-2xl p-6 text-center">
              <div id="dProt" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Protein</div>
            </div>
            <div class="bg-slate-50 rounded-2xl p-6 text-center">
              <div id="dCarb" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Carbs</div>
            </div>
            <div class="bg-slate-50 rounded-2xl p-6 text-center">
              <div id="dFat" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Fat</div>
            </div>
            <div class="bg-slate-50 rounded-2xl p-6 text-center">
              <div id="dFiber" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Fiber</div>
            </div>
            <div class="bg-slate-50 rounded-2xl p-6 text-center">
              <div id="dSugar" class="text-3xl font-extrabold">‚Äî</div>
              <div class="text-slate-500">Sugar</div>
            </div>
          </div>
          <div class="mt-6">
            <div class="mx-auto w-[350px] h-[350px] bg-white rounded-2xl p-6 border border-slate-200 flex items-center justify-center">
  <canvas id="dailyChart"></canvas>
</div>

          </div>
        </div>

        <div class="mt-10">
          <h3 class="text-2xl font-bold mb-4">Meal Options</h3>
          <div class="flex gap-3 text-sm">
            <button data-tab="breakfast" class="tabBtn pill px-4 py-2 text-white gradient">Breakfast</button>
            <button data-tab="lunch" class="tabBtn pill px-4 py-2 border border-slate-300">Lunch</button>
            <button data-tab="dinner" class="tabBtn pill px-4 py-2 border border-slate-300">Dinner</button>
          </div>
          <div id="optionsGrid" class="mt-6 grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6"></div>
        </div>
      </div>
    </div>
  </section>


  <!-- User Profile View -->
  <section id="profile" class="view">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
      <div class="bg-white elevate rounded-3xl p-8">
        <h2 class="text-3xl font-extrabold">Your Profile</h2>
        <p class="text-slate-600 mt-1">Customize your dietary preferences and goals</p>

        <div class="mt-8 grid md:grid-cols-2 gap-8">
          <div>
            <h3 class="text-xl font-bold mb-4">Dietary Preferences</h3>
            
            <div class="space-y-4">
              <div>
                <label class="block text-sm text-slate-600 mb-2">Dietary Restrictions</label>
                <div class="flex flex-wrap gap-2">
                  <button class="pref-pill" data-pref="gluten-free">Gluten-Free</button>
                  <button class="pref-pill" data-pref="dairy-free">Dairy-Free</button>
                  <button class="pref-pill" data-pref="vegetarian">Vegetarian</button>
                  <button class="pref-pill" data-pref="vegan">Vegan</button>
                  <button class="pref-pill" data-pref="pescatarian">Pescatarian</button>
                </div>
              </div>
              
              <div>
                <label class="block text-sm text-slate-600 mb-2">Allergies</label>
                <div class="flex flex-wrap gap-2">
                  <button class="pref-pill" data-pref="nuts">Nuts</button>
                  <button class="pref-pill" data-pref="shellfish">Shellfish</button>
                  <button class="pref-pill" data-pref="eggs">Eggs</button>
                  <button class="pref-pill" data-pref="soy">Soy</button>
                </div>
              </div>
              
              <div>
                <label class="block text-sm text-slate-600 mb-2">Cuisine Preferences</label>
                <div class="flex flex-wrap gap-2">
                  <button class="pref-pill" data-pref="italian">Italian</button>
                  <button class="pref-pill" data-pref="mexican">Mexican</button>
                  <button class="pref-pill" data-pref="asian">Asian</button>
                  <button class="pref-pill" data-pref="indian">Indian</button>
                  <button class="pref-pill" data-pref="mediterranean">Mediterranean</button>
                </div>
              </div>
              
              <div>
                <label class="block text-sm text-slate-600 mb-2">Disliked Ingredients</label>
                <input type="text" id="dislikedIngredients" class="w-full px-4 py-2 rounded-xl border border-slate-300" placeholder="Enter ingredients separated by commas">
              </div>
            </div>
          </div>
          
          <div>
            <h3 class="text-xl font-bold mb-4">Health Goals</h3>
            
            <div class="space-y-4">
              <div>
                <label class="block text-sm text-slate-600 mb-2">Target Weight (kg)</label>
                <input type="number" id="targetWeight" class="w-full px-4 py-2 rounded-xl border border-slate-300" placeholder="Enter target weight">
              </div>
              
              <div>
                <label class="block text-sm text-slate-600 mb-2">Target Date</label>
                <input type="date" id="targetDate" class="w-full px-4 py-2 rounded-xl border border-slate-300">
              </div>
              
              <div>
                <label class="block text-sm text-slate-600 mb-2">Weekly Exercise (hours)</label>
                <input type="number" id="weeklyExercise" min="0" max="20" class="w-full px-4 py-2 rounded-xl border border-slate-300" placeholder="Hours per week">
              </div>

              
<div>
  <label class="block text-sm text-slate-600 mb-2">Current Mood</label>
  <select id="userMood" class="w-full px-4 py-2 rounded-xl border border-slate-300">
    <option value="">Prefer not to say</option>
    <option value="happy">Happy üôÇ</option>
    <option value="stressed">Stressed üòü</option>
    <option value="anxious">Anxious üò∞</option>
    <option value="tired">Tired üò¥</option>
    <option value="sad">Sad üòî</option>
    <option value="energetic">Energetic üí™</option>
  </select>
</div>

              <div>
                <label class="block text-sm text-slate-600 mb-2">Eating Schedule</label>
                <div class="space-y-2">
                  <div class="flex items-center justify-between">
                    <span>Breakfast</span>
                    <input type="time" id="breakfastTime" class="px-3 py-1 rounded-lg border border-slate-300" value="08:00">
                  </div>
                  <div class="flex items-center justify-between">
                    <span>Lunch</span>
                    <input type="time" id="lunchTime" class="px-3 py-1 rounded-lg border border-slate-300" value="13:00">
                  </div>
                  <div class="flex items-center justify-between">
                    <span>Dinner</span>
                    <input type="time" id="dinnerTime" class="px-3 py-1 rounded-lg border border-slate-300" value="19:00">
                  </div>
                </div>
              </div>
            </div>
            
            <button id="saveProfile" class="mt-6 w-full pill gradient text-white py-3">Save Preferences</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Achievements View -->
  <section id="achievements" class="view">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
      <div class="bg-white elevate rounded-3xl p-8">
        <h2 class="text-3xl font-extrabold">Your Achievements</h2>
        <p class="text-slate-600 mt-1">Earn badges by using the app and reaching your goals</p>
        
        <div class="mt-8 grid md:grid-cols-2 gap-8">
          <div>
            <h3 class="text-xl font-bold mb-4">Progress</h3>
            
            <div class="space-y-6">
              <div class="bg-slate-50 rounded-2xl p-4">
                <div class="flex items-center justify-between mb-2">
                  <span class="font-medium">Login Streak</span>
                  <span class="text-sm font-semibold" id="loginStreak">0 days</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
                <p class="text-xs text-slate-500 mt-2">Log in daily to maintain your streak</p>
              </div>
              
              <div class="bg-slate-50 rounded-2xl p-4">
                <div class="flex items-center justify-between mb-2">
                  <span class="font-medium">Meal Planning</span>
                  <span class="text-sm font-semibold" id="planCompletion">0%</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
                <p class="text-xs text-slate-500 mt-2">Complete your weekly meal plans</p>
              </div>
              
              <div class="bg-slate-50 rounded-2xl p-4">
                <div class="flex items-center justify-between mb-2">
                  <span class="font-medium">Global Explorer</span>
                  <span class="text-sm font-semibold" id="countriesTried">0/5 countries</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
                <p class="text-xs text-slate-500 mt-2">Try recipes from different countries</p>
              </div>
            </div>
          </div>
          
          <div>
            <h3 class="text-xl font-bold mb-4">Badges</h3>
            
            <div id="badgesGrid" class="grid grid-cols-2 gap-4">
              <!-- Badges will be populated here -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Diet Chart View -->
<section id="diet-chart" class="view">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
    <div class="bg-white elevate rounded-3xl p-8">
      <h2 class="text-3xl font-extrabold">Generate Your Personalized Diet Chart</h2>
      <p class="text-slate-600 mt-1">Get a complete daily diet plan tailored to your body and goals</p>

      <form id="dietChartForm" class="mt-8 grid md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-xl font-bold mb-4">Personal Information</h3>
          
          <div class="space-y-4">
            <div>
              <label class="block text-sm text-slate-600 mb-2">Age</label>
              <input type="number" required min="15" max="100" class="w-full px-4 py-2 rounded-xl border border-slate-300" id="dietAge" placeholder="Enter your age">
            </div>
            
            <div>
              <label class="block text-sm text-slate-600 mb-2">Gender</label>
              <select class="w-full px-4 py-2 rounded-xl border border-slate-300" id="dietGender">
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm text-slate-600 mb-2">Height (cm)</label>
              <input type="number" required min="100" max="250" class="w-full px-4 py-2 rounded-xl border border-slate-300" id="dietHeight" placeholder="Height in cm">
            </div>
            
            <div>
              <label class="block text-sm text-slate-600 mb-2">Weight (kg)</label>
              <input type="number" required min="30" max="200" class="w-full px-4 py-2 rounded-xl border border-slate-300" id="dietWeight" placeholder="Weight in kg">
            </div>
          </div>
        </div>
        
        <div>
          <h3 class="text-xl font-bold mb-4">Diet Preferences & Goals</h3>
          
          <div class="space-y-4">
            <div>
              <label class="block text-sm text-slate-600 mb-2">Diet Preference</label>
              <select class="w-full px-4 py-2 rounded-xl border border-slate-300" id="dietPreference">
                <option>Non-Vegetarian</option>
                <option>Vegetarian</option>
                <option>Vegan</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm text-slate-600 mb-2">Goal</label>
              <select class="w-full px-4 py-2 rounded-xl border border-slate-300" id="dietGoal">
                <option value="loss">Weight Loss</option>
                <option value="maintain">Maintain Weight</option>
                <option value="gain">Weight Gain</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm text-slate-600 mb-2">Activity Level</label>
              <select class="w-full px-4 py-2 rounded-xl border border-slate-300" id="dietActivity">
                <option value="sedentary">Sedentary (little or no exercise)</option>
                <option value="light">Lightly active (light exercise 1-3 days/week)</option>
                <option value="moderate">Moderately active (moderate exercise 3-5 days/week)</option>
                <option value="active">Active (hard exercise 6-7 days/week)</option>
                <option value="very_active">Very active (very hard exercise, physical job)</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm text-slate-600 mb-2">Country (for cuisine style)</label>
              <select class="w-full px-4 py-2 rounded-xl border border-slate-300" id="dietCountry">
                <option value="">Select Country</option>
                
              </select>
            </div>
          </div>
        </div>
      </form>

      <div class="mt-8 flex justify-center">
        <button id="generateDietChart" class="pill px-6 py-3 text-white gradient">Generate Diet Chart</button>
      </div>

      <div id="dietChartResult" class="mt-8 hidden">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-2xl font-bold">Your Personalized Diet Chart</h3>
          <button id="downloadDietChart" class="pill px-4 py-2 text-white gradient flex items-center gap-2">
            <i class="fas fa-download"></i> Download PDF
          </button>
        </div>
        
        <div id="chartContent" class="bg-slate-50 rounded-2xl p-6">
          <!-- Diet chart will be generated here -->
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Exercise Planner View -->
<section id="exercise-planner" class="view">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
    <div class="bg-white elevate rounded-3xl p-8">
      <h2 class="text-3xl font-extrabold">Exercise Planner</h2>
      <p class="text-slate-600 mt-1">Select exercises based on your weight goals</p>
      
      <div class="goal-selector mt-6 flex flex-wrap justify-center gap-4">
        <button class="goal-btn px-5 py-3 pill text-white gradient" data-goal="loss">
          <i class="fas fa-weight-loss mr-2"></i> Weight Loss
        </button>
        <button class="goal-btn px-5 py-3 pill border border-slate-300" data-goal="maintain">
          <i class="fas fa-weight mr-2"></i> Maintain Weight
        </button>
        <button class="goal-btn px-5 py-3 pill border border-slate-300" data-goal="gain">
          <i class="fas fa-weight-gain mr-2"></i> Weight Gain
        </button>
      </div>
      
      <!-- Motivational Message -->
      <div id="motivational-message" class="mt-6 p-4 rounded-xl bg-blue-50 text-blue-800 text-center hidden">
        <p class="font-medium" id="message-text"></p>
      </div>
      
      <!-- Daily Challenge -->
      <div id="daily-challenge" class="mt-4 p-4 rounded-xl bg-amber-50 text-amber-800 text-center hidden">
        <h3 class="font-bold mb-2">üåü Today's Challenge</h3>
        <p id="challenge-text"></p>
      </div>
      
      <div class="content mt-8 flex flex-col lg:flex-row gap-6">
        <div class="exercises-section flex-1">
          <h3 class="section-title text-xl font-semibold mb-4">Recommended Exercises</h3>
          <div class="exercise-grid grid grid-cols-1 md:grid-cols-2 gap-4">
            
            <!-- ===== WEIGHT LOSS EXERCISES ===== -->
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="loss">
              <div class="card-header bg-gradient-to-r from-blue-400 to-cyan-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Running</div>
                <div class="exercise-icon"><i class="fas fa-running"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 25 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Steady pace running with intervals to improve endurance and burn calories effectively.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-blue-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 250 calories
                  </div>
                  <button class="add-button bg-blue-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="loss">
              <div class="card-header bg-gradient-to-r from-blue-400 to-cyan-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">HIIT Workout</div>
                <div class="exercise-icon"><i class="fas fa-bolt"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 20 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  High-intensity interval training for maximum calorie burn and metabolic boost.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-blue-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 200 calories
                  </div>
                  <button class="add-button bg-blue-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="loss">
              <div class="card-header bg-gradient-to-r from-blue-400 to-cyan-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Jump Rope</div>
                <div class="exercise-icon"><i class="fas fa-plus"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 15 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  High-intensity cardio that burns calories quickly and improves coordination.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-blue-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 180 calories
                  </div>
                  <button class="add-button bg-blue-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="loss">
              <div class="card-header bg-gradient-to-r from-blue-400 to-cyan-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Swimming</div>
                <div class="exercise-icon"><i class="fas fa-swimmer"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 30 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Full-body workout that burns calories while being easy on the joints.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-blue-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 250 calories
                  </div>
                  <button class="add-button bg-blue-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="loss">
              <div class="card-header bg-gradient-to-r from-blue-400 to-cyan-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Kickboxing</div>
                <div class="exercise-icon"><i class="fas fa-fist-raised"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 30 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  High-energy martial arts workout that burns calories and reduces stress.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-blue-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 300 calories
                  </div>
                  <button class="add-button bg-blue-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <!-- ===== WEIGHT MAINTENANCE EXERCISES ===== -->
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="maintain">
              <div class="card-header bg-gradient-to-r from-green-400 to-teal-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Cycling</div>
                <div class="exercise-icon"><i class="fas fa-bicycle"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 35 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Moderate intensity cycling to maintain cardiovascular health and muscle tone.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-green-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 300 calories
                  </div>
                  <button class="add-button bg-green-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="maintain">
              <div class="card-header bg-gradient-to-r from-green-400 to-teal-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Yoga</div>
                <div class="exercise-icon"><i class="fas fa-spa"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 40 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Improves flexibility, balance, and mental focus while maintaining muscle tone.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-green-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 150 calories
                  </div>
                  <button class="add-button bg-green-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="maintain">
              <div class="card-header bg-gradient-to-r from-green-400 to-teal-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Pilates</div>
                <div class="exercise-icon"><i class="fas fa-hands"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 45 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Core-strengthening exercises that improve posture and muscle balance.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-green-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 180 calories
                  </div>
                  <button class="add-button bg-green-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="maintain">
              <div class="card-header bg-gradient-to-r from-green-400 to-teal-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Hiking</div>
                <div class="exercise-icon"><i class="fas fa-mountain"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 60 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Outdoor activity that builds endurance while connecting with nature.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-green-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 350 calories
                  </div>
                  <button class="add-button bg-green-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="maintain">
              <div class="card-header bg-gradient-to-r from-green-400 to-teal-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Dance Fitness</div>
                <div class="exercise-icon"><i class="fas fa-music"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 30 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Fun cardio workout that improves coordination and burns calories.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-green-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 220 calories
                  </div>
                  <button class="add-button bg-green-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <!-- ===== WEIGHT GAIN EXERCISES ===== -->
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="gain">
              <div class="card-header bg-gradient-to-r from-purple-400 to-pink-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Strength Training</div>
                <div class="exercise-icon"><i class="fas fa-dumbbell"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 45 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Focus on compound movements to build muscle mass and increase strength.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-purple-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 180 calories
                  </div>
                  <button class="add-button bg-purple-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="gain">
              <div class="card-header bg-gradient-to-r from-purple-400 to-pink-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Resistance Bands</div>
                <div class="exercise-icon"><i class="fas fa-ring"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 40 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Targeted exercises using resistance bands to build muscle with controlled movements.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-purple-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 150 calories
                  </div>
                  <button class="add-button bg-purple-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="gain">
              <div class="card-header bg-gradient-to-r from-purple-400 to-pink-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Deadlifts</div>
                <div class="exercise-icon"><i class="fas fa-weight-hanging"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 30 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Compound exercise that targets multiple muscle groups for overall strength.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-purple-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 120 calories
                  </div>
                  <button class="add-button bg-purple-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="gain">
              <div class="card-header bg-gradient-to-r from-purple-400 to-pink-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Bench Press</div>
                <div class="exercise-icon"><i class="fas fa-bed"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 35 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Upper body strength exercise focusing on chest, shoulders, and triceps.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-purple-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 140 calories
                  </div>
                  <button class="add-button bg-purple-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
            <div class="exercise-card bg-white rounded-xl shadow-md overflow-hidden hvr" data-goal="gain">
              <div class="card-header bg-gradient-to-r from-purple-400 to-pink-400 text-white p-4 flex justify-between items-center">
                <div class="exercise-type font-semibold">Squats</div>
                <div class="exercise-icon"><i class="fas fa-running"></i></div>
              </div>
              <div class="card-content p-4">
                <div class="exercise-duration text-slate-600 flex items-center gap-2 mb-3">
                  <i class="far fa-clock"></i> 25 mins
                </div>
                <p class="exercise-description text-slate-700 text-sm mb-4">
                  Lower body compound exercise for building leg and core strength.
                </p>
                <div class="exercise-stats flex justify-between items-center pt-3 border-t border-slate-100">
                  <div class="calories text-purple-500 font-semibold flex items-center gap-1">
                    <i class="fas fa-fire"></i> 130 calories
                  </div>
                  <button class="add-button bg-purple-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            
          </div>
        </div>
        
        <div class="daily-plan-section bg-slate-50 rounded-xl p-6 w-full lg:w-1/3">
          <h3 class="section-title text-xl font-semibold mb-4">Your Daily Plan</h3>
          <div class="selected-exercises">
            <p id="empty-message" class="text-slate-500 text-center py-4">No exercises selected yet. Click 'Add' on exercises to build your plan.</p>
          </div>
          
          <div class="total-calories bg-white rounded-xl p-4 mt-6 text-center shadow-sm">
            <div class="text-lg font-semibold">Total Calories: <span class="text-blue-500" id="total-calories">0</span></div>
          </div>
          
          <!-- Estimated Weight Impact -->
          <div id="weight-impact" class="bg-white rounded-xl p-4 mt-4 text-center shadow-sm hidden">
            <div class="text-lg font-semibold">Estimated Impact: <span id="impact-text"></span></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Nutrition Learning Section -->
<section id="nutrition-learning" class="view">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
    <div class="bg-white elevate rounded-3xl p-8">
      <h2 class="text-3xl font-extrabold">üçé Nutrition Learning Hub</h2>
      <p class="text-slate-600 mt-2">
        Don‚Äôt just follow a meal plan ‚Äî understand why! Learn the science of food, nutrients, and their impact on your health.
      </p>

      <!-- Tabs -->
      <div class="mt-6 flex gap-4 flex-wrap">
        <button class="pill px-4 py-2 text-white gradient tabBtn" data-tab="basics">Nutrition Basics</button>
        <button class="pill px-4 py-2 border border-slate-300 tabBtn" data-tab="nutrients">Nutrients Explorer</button>
        <button class="pill px-4 py-2 border border-slate-300 tabBtn" data-tab="foodgroups">Food Groups</button>
        <button class="pill px-4 py-2 border border-slate-300 tabBtn" data-tab="goals">Goal-Based Learning</button>
        <button class="pill px-4 py-2 border border-slate-300 tabBtn" data-tab="quiz">Fun Quiz</button>
      </div>

      <!-- Content Panels -->
      <div class="mt-8">
        <!-- Basics -->
        <div id="tab-basics" class="tabContent">
          <h3 class="text-2xl font-bold mb-4">Nutrition Basics</h3>
          <div class="grid md:grid-cols-2 gap-6">
            <div class="p-6 bg-slate-50 rounded-2xl shadow hvr flex gap-4 items-center">

              <img src="https://img.icons8.com/color/96/000000/bread.png" class="w-16 h-16"/>
              <div>
                <h4 class="font-bold">Carbohydrates</h4>
                <p>Quick energy from rice, bread, fruits, and grains.</p>
              </div>
            </div>
            <div class="p-6 bg-slate-50 rounded-2xl shadow hvr flex gap-4 items-center">

              <img src="https://img.icons8.com/color/96/000000/steak.png" class="w-16 h-16"/>
              <div>
                <h4 class="font-bold">Proteins</h4>
                <p>Repair tissues & build muscle from eggs, beans, chicken.</p>
              </div>
            </div>
            <div class="p-6 bg-slate-50 rounded-2xl shadow hvr flex gap-4 items-center">

              <img src="https://img.icons8.com/color/96/000000/avocado.png" class="w-16 h-16"/>
              <div>
                <h4 class="font-bold">Fats</h4>
                <p>Support hormones & brain health with nuts & olive oil.</p>
              </div>
            </div>
            <div class="p-6 bg-slate-50 rounded-2xl shadow hvr flex gap-4 items-center">
  <img src="https://img.icons8.com/color/96/pills.png" class="w-16 h-16"/>
  <div>
    <h4 class="font-bold">Vitamins & Minerals</h4>
    <p>Boost immunity, strong bones & metabolism.</p>
  </div>
</div>

          </div>
        </div>

        <!-- Nutrients -->
        <div id="tab-nutrients" class="tabContent hidden">
          <h3 class="text-2xl font-bold mb-4">Nutrients Explorer</h3>
          <div id="nutrientCards" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- Food Groups -->
        <div id="tab-foodgroups" class="tabContent hidden">
          <h3 class="text-2xl font-bold mb-4">Major Food Groups</h3>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="p-6 bg-slate-50 rounded-2xl shadow hvr text-center">

              <img src="https://img.icons8.com/color/96/000000/broccoli.png" class="mx-auto"/>
              <h4 class="font-bold mt-2">Vegetables</h4>
              <p>Fiber, vitamins, antioxidants for gut & immunity.</p>
            </div>
            <div class="p-6 bg-slate-50 rounded-2xl shadow hvr text-center">

              <img src="https://img.icons8.com/color/96/000000/apple.png" class="mx-auto"/>
              <h4 class="font-bold mt-2">Fruits</h4>
              <p>Natural vitamins, minerals & healthy sugars.</p>
            </div>
            <div class="p-6 bg-slate-50 rounded-2xl shadow hvr text-center">

              <img src="https://img.icons8.com/color/96/000000/chicken.png" class="mx-auto"/>
              <h4 class="font-bold mt-2">Proteins</h4>
              <p>Muscle growth & tissue repair foods.</p>
            </div>
            <div class="p-6 bg-slate-50 rounded-2xl shadow hvr text-center">

              <img src="https://img.icons8.com/color/96/000000/rice-bowl.png" class="mx-auto"/>
              <h4 class="font-bold mt-2">Grains</h4>
              <p>Provide energy-rich carbohydrates.</p>
            </div>
            <div class="p-6 bg-slate-50 rounded-2xl shadow hvr text-center">

              <img src="https://img.icons8.com/color/96/000000/cheese.png" class="mx-auto"/>
              <h4 class="font-bold mt-2">Dairy</h4>
              <p>Strong bones, calcium & protein source.</p>
            </div>
            <div class="p-6 bg-slate-50 rounded-2xl text-center shadow hvr">
  <img src="https://img.icons8.com/color/96/000000/nuts.png" class="mx-auto"/>
  <h4 class="font-bold mt-2">Healthy Fats</h4>
  <p>Support brain, skin & energy storage.</p>
</div>

          </div>
        </div>

        <!-- Goals -->
        <div id="tab-goals" class="tabContent hidden">
          <h3 class="text-2xl font-bold mb-4">Goal-Based Nutrition</h3>
          <div id="goalTips" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- Quiz -->
        <div id="tab-quiz" class="tabContent hidden">
          <h3 class="text-2xl font-bold mb-4">üß† Quick Quiz</h3>
          <p id="quizQuestion" class="font-medium"></p>
          <div id="quizOptions" class="mt-4 space-y-2"></div>
          <p id="quizResult" class="mt-4 font-semibold"></p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- AI Challenges View -->
<section id="ai-challenges" class="view">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-16">
    <div class="bg-white elevate rounded-3xl p-8">
      <h2 class="text-3xl font-extrabold">AI-Powered Nutrition Challenges</h2>
      <p class="text-slate-600 mt-1">Join gamified challenges tailored to your goals with AI tracking and motivation</p>

      <div class="mt-8 grid md:grid-cols-2 gap-8">
        <!-- Available Challenges -->
        <div>
          <h3 class="text-xl font-bold mb-4">Available Challenges</h3>
          <div class="space-y-6">
  <!-- 1. 7-Day Plant-Based Protein Boost -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">7-Day Plant-Based Protein Boost</h4>
        <p class="text-slate-600 mt-2">Increase your plant protein intake with delicious meat alternatives</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">7 days</span>
          <span class="text-slate-500">‚≠ê 4.8 (2.4k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üå±</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="plant-protein">Start Challenge</button>
  </div>

  <!-- 2. 14-Day Sugar-Free Challenge -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">14-Day Sugar-Free Challenge</h4>
        <p class="text-slate-600 mt-2">Eliminate added sugars and discover natural sweetness in foods</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">14 days</span>
          <span class="text-slate-500">‚≠ê 4.9 (3.1k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üö´üç¨</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="sugar-free">Start Challenge</button>
  </div>

  <!-- 3. 21-Day Mindful Eating -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">21-Day Mindful Eating</h4>
        <p class="text-slate-600 mt-2">Slow down, enjoy every bite, and build a healthier relationship with food</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">21 days</span>
          <span class="text-slate-500">‚≠ê 4.7 (1.9k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üßò‚Äç‚ôÄÔ∏è</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="mindful-eating">Start Challenge</button>
  </div>

  <!-- 4. 10-Day Hydration Boost -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">10-Day Hydration Boost</h4>
        <p class="text-slate-600 mt-2">Stay hydrated with optimal water intake every day</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">10 days</span>
          <span class="text-slate-500">‚≠ê 4.6 (3.4k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üíß</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="hydration-boost">Start Challenge</button>
  </div>

  <!-- 5. 30-Day Salad-a-Day Challenge -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">30-Day Salad-a-Day Challenge</h4>
        <p class="text-slate-600 mt-2">Add one colorful salad to your meals every day</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">30 days</span>
          <span class="text-slate-500">‚≠ê 4.8 (2.1k joined)</span>
        </div>
      </div>
      <div class="text-3xl">ü•ó</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="salad-a-day">Start Challenge</button>
  </div>

  <!-- 6. 7-Day Sleep & Nutrition Reset -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">7-Day Sleep & Nutrition Reset</h4>
        <p class="text-slate-600 mt-2">Balance meals and sleep for optimal energy</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">7 days</span>
          <span class="text-slate-500">‚≠ê 4.6 (1.2k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üí§</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="sleep-reset">Start Challenge</button>
  </div>

  <!-- 7. 14-Day Whole Fruit Only -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">14-Day Whole Fruit Only</h4>
        <p class="text-slate-600 mt-2">Satisfy sweet cravings with fresh fruit</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">14 days</span>
          <span class="text-slate-500">‚≠ê 4.7 (2.2k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üçä</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="whole-fruit">Start Challenge</button>
  </div>

  <!-- 8. 10-Day Fiber Upgrade -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">10-Day Fiber Upgrade</h4>
        <p class="text-slate-600 mt-2">Boost gut health with fiber-rich foods</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">10 days</span>
          <span class="text-slate-500">‚≠ê 4.5 (1.7k joined)</span>
        </div>
      </div>
      <div class="text-3xl">ü•ï</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="fiber-upgrade">Start Challenge</button>
  </div>

  <!-- 9. 21-Day Omega-3 Boost -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">21-Day Omega-3 Boost</h4>
        <p class="text-slate-600 mt-2">Support heart and brain health with omega-3</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">21 days</span>
          <span class="text-slate-500">‚≠ê 4.8 (1.4k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üêü</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="omega-3">Start Challenge</button>
  </div>

  <!-- 10. 7-Day Green Tea Detox -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">7-Day Green Tea Detox</h4>
        <p class="text-slate-600 mt-2">Boost metabolism with daily green tea</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">7 days</span>
          <span class="text-slate-500">‚≠ê 4.6 (2.9k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üçµ</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="green-tea">Start Challenge</button>
  </div>

  <!-- 11. 14-Day Dairy-Free -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">14-Day Dairy-Free Challenge</h4>
        <p class="text-slate-600 mt-2">Discover plant-based alternatives to dairy</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">14 days</span>
          <span class="text-slate-500">‚≠ê 4.7 (1.8k joined)</span>
        </div>
      </div>
      <div class="text-3xl">ü•õ</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="dairy-free">Start Challenge</button>
  </div>

  <!-- 12. 21-Day Whole Grains Switch -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">21-Day Whole Grains Switch</h4>
        <p class="text-slate-600 mt-2">Replace refined grains with whole grains</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">21 days</span>
          <span class="text-slate-500">‚≠ê 4.8 (2.2k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üçû</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="whole-grains">Start Challenge</button>
  </div>

  <!-- 13. 30-Day Anti-Inflammatory Diet -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">30-Day Anti-Inflammatory Diet</h4>
        <p class="text-slate-600 mt-2">Focus on anti-inflammatory foods for overall wellness</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">30 days</span>
          <span class="text-slate-500">‚≠ê 4.9 (3.5k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üåø</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="anti-inflammatory">Start Challenge</button>
  </div>

  <!-- 14. 10-Day Home-Cooked Meals -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">10-Day Home-Cooked Meals</h4>
        <p class="text-slate-600 mt-2">Cook all your meals at home for 10 days</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">10 days</span>
          <span class="text-slate-500">‚≠ê 4.7 (2.0k joined)</span>
        </div>
      </div>
      <div class="text-3xl">üç≤</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="home-cooked">Start Challenge</button>
  </div>

  <!-- 15. 7-Day Smoothie Breakfast -->
  <div class="challenge-card bg-white rounded-2xl p-6 border border-slate-200 hvr">
    <div class="flex items-start justify-between">
      <div>
        <h4 class="font-bold text-lg">7-Day Smoothie Breakfast</h4>
        <p class="text-slate-600 mt-2">Kickstart mornings with nutrient-packed smoothies</p>
        <div class="mt-4 flex items-center gap-4 text-sm">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">7 days</span>
          <span class="text-slate-500">‚≠ê 4.6 (1.5k joined)</span>
        </div>
      </div>
      <div class="text-3xl">ü•§</div>
    </div>
    <button class="mt-6 w-full pill gradient text-white py-3 start-challenge" data-challenge="smoothie">Start Challenge</button>
  </div>
</div>

        </div>

        <!-- Active Challenge -->
        <div>
          <h3 class="text-xl font-bold mb-4">Your Active Challenge</h3>
          <div id="activeChallengeContainer" class="bg-slate-50 rounded-2xl p-6 text-center hidden">
            <p class="text-slate-500" id="noActiveChallenge">No active challenge. Select one to begin!</p>
            
            <div id="activeChallenge" class="hidden">
              <div class="flex items-center justify-between mb-4">
                <h4 id="challengeName" class="font-bold text-xl"></h4>
                <span id="challengeDays" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm"></span>
              </div>
              
              <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-slate-600">Progress</span>
                  <span id="challengeProgressText" class="text-sm font-semibold">0/0 days</span>
                </div>
                <div class="progress-bar w-full bg-gray-200 rounded h-3">
                  <div id="challengeProgressBar" class="progress-fill bg-pink-400 h-3 rounded" style="width: 0%"></div>
                </div>
              </div>

              <!-- AI Feedback -->
              <div id="aiFeedback" class="bg-blue-50 rounded-xl p-4 mb-6 text-left hidden">
                <div class="flex items-start gap-3">
                  <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0">
                    <i class="fas fa-robot text-blue-600"></i>
                  </div>
                  <p id="feedbackText" class="text-blue-800 text-sm"></p>
                </div>
              </div>

              <!-- Daily Check-in -->
              <div class="mb-6">
                <h5 class="font-medium mb-3">Today's Check-in</h5>
                <div class="space-y-3">
                  <div class="flex items-center justify-between">
                    <span>Stayed on track with challenge goals</span>
                    <label class="relative inline-flex items-center cursor-pointer">
                      <input type="checkbox" id="dailyCheck" class="sr-only peer">
                      <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                  </div>
                </div>
              </div>

              <button id="submitCheckIn" class="w-full pill bg-slate-200 text-slate-600 py-3" disabled>Check In</button>
              <button id="cancelChallenge" class="mt-3 w-full pill border border-slate-300 py-3">Cancel Challenge</button>
            </div>
          </div>

          <!-- Challenge Benefits -->
          <div class="mt-8">
            <h3 class="text-xl font-bold mb-4">Challenge Benefits</h3>
            <div class="bg-white rounded-2xl p-6">
              <ul class="space-y-3 text-sm">
                <li class="flex items-center gap-3">
                  <span class="w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600">‚úì</span>
                  <span>AI-powered meal adjustments based on your progress</span>
                </li>
                <li class="flex items-center gap-3">
                  <span class="w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600">‚úì</span>
                  <span>Personalized motivational messages and tips</span>
                </li>
                <li class="flex items-center gap-3">
                  <span class="w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600">‚úì</span>
                  <span>Track your consistency and earn achievements</span>
                </li>
                <li class="flex items-center gap-3">
                  <span class="w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600">‚úì</span>
                  <span>Community support and sharing</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Chatbot Button -->
<div id="chatbotButton" class="fixed bottom-6 right-6 w-14 h-14 rounded-full gradient flex items-center justify-center cursor-pointer shadow-lg z-30">
  <span class="text-2xl">ü§ñ</span>
</div>

<!-- Chatbot Modal -->
<div id="chatbotModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="bg-white rounded-3xl p-6 m-4 max-w-md w-full max-h-[80vh] flex flex-col">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-xl font-bold">AI Dietitian</h3>
      <button id="closeChatbotModal" class="text-slate-500 hover:text-slate-700">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div id="chatbotMessages" class="flex-grow overflow-y-auto mb-4 space-y-4 p-2 max-h-[50vh]">
      <div class="flex items-start gap-2">
        <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center">
          <i class="fas fa-robot text-blue-600"></i>
        </div>
        <div class="bg-slate-100 rounded-2xl p-3 max-w-[80%]">
          <p class="text-sm">Hello! I'm your AI Dietitian. How can I help you with your nutrition goals today?</p>
        </div>
      </div>
    </div>
    
    <div class="flex gap-2">
      <input 
        type="text" 
        id="chatbotInput" 
        placeholder="Ask about nutrition, diets..." 
        class="flex-grow px-4 py-2 rounded-xl border border-slate-300 focus:border-slate-500"
      >
      <button id="sendChatbotMessage" class="px-4 py-2 rounded-xl gradient text-white">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
    
<div class="mt-3 grid grid-cols-2 gap-2">
  <button class="quick-question pill px-3 py-2 text-xs border border-slate-300 text-slate-600">
    Weight loss tips
  </button>
  <button class="quick-question pill px-3 py-2 text-xs border border-slate-300 text-slate-600">
    Protein requirements
  </button>
  <button class="quick-question pill px-3 py-2 text-xs border border-slate-300 text-slate-600">
    Healthy snacks
  </button>
  <button class="quick-question pill px-3 py-2 text-xs border border-slate-300 text-slate-600">
    Meal timing
  </button>
  <button class="quick-question pill px-3 py-2 text-xs border border-slate-300 text-slate-600">
    Carbs & fats
  </button>
  <button class="quick-question pill px-3 py-2 text-xs border border-slate-300 text-slate-600">
    Vitamin needs
  </button>
  <button class="quick-question pill px-3 py-2 text-xs border border-slate-300 text-slate-600">
    Hydration
  </button>
  <button class="quick-question pill px-3 py-2 text-xs border border-slate-300 text-slate-600">
    Diet chart
  </button>
</div>
  </div>
</div>

<!-- Progress Forecaster View -->
<section id="progress-forecaster" class="view">
    <div class="container">
        <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">Weight Progress Forecaster</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="card">
                <h2 class="text-xl font-semibold mb-4">Your Progress Data</h2>
                
                <div class="mb-6">
                    <label for="currentWeight">Current Weight (kg)</label>
                    <input type="number" id="currentWeight" placeholder="Enter current weight" value="70">
                </div>
                
                <div class="mb-6">
                    <label for="goalWeight">Goal Weight (kg)</label>
                    <input type="number" id="goalWeight" placeholder="Enter goal weight" value="60">
                </div>
                
                <div class="mb-6">
                    <label for="weeklyChange">Weekly Weight Change (kg)</label>
                    <input type="number" id="weeklyChange" step="0.1" placeholder="e.g. -0.5 for loss" value="-0.8">
                    <p class="text-sm text-gray-500 mt-1">Positive for gain, negative for loss</p>
                </div>
                
                <button id="generateForecast" class="btn w-full">Generate Forecast</button>
                
                <div class="mt-8 bg-gray-50 rounded-xl p-4">
                    <h3 class="font-bold mb-2">Progress History</h3>
                    <div id="weightHistory" class="space-y-2">
                    </div>
                    <button id="addWeightEntry" class="mt-3 w-full py-2 border border-gray-300 rounded-full text-gray-700">
                        Add Current Weight
                    </button>
                </div>
            </div>
            
            <div class="card">
                <h2 class="text-xl font-semibold mb-4">Weight Trend Forecast</h2>
                <div class="bg-white rounded-xl p-4 border border-gray-200">
                    <canvas id="forecastChart" height="350"></canvas>
                </div>
                <div id="forecastResult" class="mt-4 p-4 bg-blue-50 rounded-xl text-blue-800 hidden">
                    
                </div>
            </div>
        </div>
    </div>
</section>

 
  <!-- Footer -->
  <footer class="mt-16 py-12 text-center text-slate-500">
    <p>¬© <span id="year"></span> Global Diet Visualizer ¬∑ Built with ‚ù§Ô∏è for learning</p>
  </footer>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-6 left-1/2 -translate-x-1/2 hidden">
    <div class="bg-slate-900 text-white px-4 py-3 rounded-xl shadow-xl">Saved!</div>
  </div>

  <!-- AI Recommendations Modal -->
  <div id="aiModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-3xl p-6 m-4 max-w-md w-full">
      <h3 class="text-xl font-bold mb-4">AI Meal Recommendations</h3>
      <p class="text-slate-600 mb-4">Based on your preferences, we recommend:</p>
      <div id="aiRecommendations" class="space-y-3 mb-6">
        <!-- Recommendations will be populated here -->
      </div>
      <div class="flex justify-end gap-3">
        <button id="closeAiModal" class="px-4 py-2 pill border border-slate-300">Cancel</button>
        <button id="applyAiRecommendations" class="px-4 py-2 pill text-white gradient">Apply Changes</button>
      </div>
    </div>
  </div>

  <!-- Video Modal -->
<div id="videoModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
  <div class="bg-white rounded-3xl p-6 m-4 max-w-4xl w-full">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-xl font-bold">Recipe Video</h3>
      <button id="closeVideoModal" class="text-slate-500 hover:text-slate-700">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="aspect-w-16 aspect-h-9">
      <iframe id="videoFrame" class="w-full h-96 rounded-xl" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>
</div>

<script>
  // --- Simple in-memory data ---
  const COUNTRIES = [
    { code:'IN', name:'India', img:'https://5.imimg.com/data5/SELLER/Default/2023/12/370478461/YK/RI/SX/5650316/indian-national-polyester-flag.jpeg'},
    { code:'US', name:'USA', img:'https://cdn.shopify.com/s/files/1/0664/7575/3572/files/xmwpudcnzq7fvun0msig.png?v=1750173243'},
    { code:'IT', name:'Italy', img:'https://www.rjtravelagency.com/wp-content/uploads/2024/06/Flag-of-Italy.jpg'},
    { code:'JP', name:'Japan', img:'https://www.kcpinternational.com/wp-content/uploads/2014/01/Japan-Flag-and-cherry-blossoms.jpg'},
    { code:'MX', name:'Mexico', img:'https://www.usaflagco.com/cdn/shop/files/mexico-flags.jpg?v=1741556964&width=1080'},
    { code:'GB', name:'UK', img:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR9AWMMkrIGvrBOo7egHV5hA-xRgaPFBInIdw&s'},
    { code:'FR', name:'France', img:'https://digitalcontent.api.tesco.com/v2/media/marketplace/f90a3d25-59aa-45b0-9d03-3e655c1b4a42/ca_1OIRw1luompFHU1JjR0F0o_271890036.jpeg?h=960&w=960'},
    { code:'CN', name:'China', img:'https://images.unsplash.com/photo-1663602535177-aadba49ddac7?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2hpbmVzZSUyMGZsYWd8ZW58MHx8MHx8fDA%3D'},
    { code:'TH', name:'Thailand', img:'https://www.krabivillas.com/upload/blog/un1s26yq8k_thailandflagphoto.jpg'},
    { code:'GR', name:'Greece', img:'https://cdn.mappr.co/wp-content/uploads/2023/12/greek-flag-athens.jpg'},
    { code:'ES', name:'Spain', img:'https://media.istockphoto.com/id/182149729/photo/spain.jpg?s=612x612&w=0&k=20&c=toQzZUuQT8Xj3HExDZ0Felatf77FrfUDHl7TgJwk-Ks='},
    { code:'DE', name:'Germany', img:'https://images.unsplash.com/photo-1663493955721-110e7e1ae36c?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Z2VybWFuJTIwZmxhZ3xlbnwwfHwwfHx8MA%3D%3D'},
    { code:'TR', name:'Turkey', img:'https://cdn.pixabay.com/photo/2017/03/20/19/45/turkey-2160152_1280.jpg'},
    { code:'VN', name:'Vietnam', img:'https://static.vinwonders.com/production/vietnam-flag-1.jpg'},
    { code:'BR', name:'Brazil', img:'https://thumbs.dreamstime.com/b/brazil-waving-flag-against-blue-sky-149774954.jpg'},
    { code:'ET', name:'Ethiopia', img:'https://c8.alamy.com/comp/2S594AC/ethiopia-flag-three-dimensional-render-isolated-on-white-ethiopian-flag-isolated-on-white-2S594AC.jpg'},
    { code:'EG', name:'Egypt', img:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTRf_hU6RYaKrQjJmObe-DsbJ5CV1cHbbiN8Q&s'},
    { code:'RU', name:'Russia', img:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSbTVWDcto3Uo24o68f_NfYzj2BgRdsMDLnxg&s'},
    { code:'KR', name:'South Korea', img:'https://www.shutterstock.com/image-photo/south-korea-flag-waving-on-260nw-2356838451.jpg'},
    { code:'ID', name:'Indonesia', img:'https://media.istockphoto.com/id/1286082070/photo/realistic-flag-3d-illustration-colored-waving-flag-of-indonesia-on-sunny-blue-sky-background.jpg?s=612x612&w=0&k=20&c=r8lsdofm-G9zf7H-a7xGRyBI6F1Fksb_fLfLBvU_CXs='}
  ];

  // Simple catalog per meal type with macros (~estimates per serving)
 const CATALOG = {
  IN: {
    morningDrink: [
      meal("Warm Lemon Water", 20, 0, 5, 0, 0, 2, ["vegan"]),
      meal("Green Tea", 5, 0, 1, 0, 0, 1, ["vegan"]),
      meal('Green Tea', 2, 0, 0, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Soy Milk', 120, 8, 10, 5, 2, 6, ['vegan', 'gluten-free']),
      meal('Black Sesame Drink', 150, 6, 18, 6, 3, 10, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Poha", 320, 8, 60, 6, 4, 5, ["vegan"], "https://www.youtube.com/watch?v=VivH2vX7y4I","https://www.mrishtanna.com/wp-content/uploads/2018/04/poha-indian-breakfast-recipe.jpg"),
      meal("Paratha with Curd", 400, 12, 45, 14, 3, 5, ["vegetarian"], "https://www.youtube.com/watch?v=y0wtBN_CqMg","https://thumbs.dreamstime.com/b/aloo-paratha-indian-potato-stuffed-wheat-bread-served-curd-pickle-tomato-onion-top-view-dark-moody-background-186126080.jpg"),
      meal('Protein Pancakes', 420, 28, 45, 12, 6, 10, ['gluten-free', 'vegetarian'], "https://www.youtube.com/watch?v=frDEFoo4ZI4","https://www.kulickspancakerecipes.com/wp-content/uploads/2022/03/Protein-pancake-recipe.jpg" ),
      meal('Egg Bhurji with Toast', 380, 24, 34, 14, 5, 6, ['vegetarian'],"https://www.youtube.com/watch?v=4Ls4xFBW3kQ","https://www.foodandwine.com/thmb/OH220PwOZfcTiwuJzkvLANWHw1w=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/egg-bhurjee-FT-RECIPE0521-f9573d8c81bb4c9597a9621c0ac064ae.jpg"),
      meal('Upma', 340, 9, 55, 8, 5, 4, ['vegetarian'], "https://www.youtube.com/watch?v=Fz20kYmUcuY","https://thewhiskaddict.com/wp-content/uploads/2024/07/IMG_0332-2-scaled.jpg"),
      meal('Greek Yogurt & Nuts', 300, 20, 18, 15, 3, 8, ['vegetarian'], "https://www.youtube.com/watch?v=iQKtos1B1Dc","https://www.mygreekdish.com/wp-content/uploads/2014/09/Greek-Yogurt-drizzled-with-Honey-and-Walnuts-Yiaourti-me-meli.jpg")
    ],
    midMorning: [
      meal("Fruit Salad", 120, 2, 30, 0, 3, 18, ["vegan"]),
      meal("Handful of Nuts", 180, 6, 8, 14, 2, 2, ["vegan"]),
      meal('Fruit Chaat', 120, 2, 28, 1, 4, 20, ['vegan', 'gluten-free']),
      meal('Roasted Makhana', 100, 4, 18, 2, 3, 1, ['vegan', 'gluten-free']),
      meal('Buttermilk (Chaas)', 60, 4, 8, 2, 0, 5, ['vegetarian'])
    ],
    lunch: [
      meal('Chicken Curry with Rice', 650, 42, 70, 18, 6, 7, [], "https://www.youtube.com/watch?v=hhrynUY7lgs","https://www.foodiaq.com/wp-content/uploads/2024/02/chicken-curry-and-rice-scaled.jpg"),
      meal('Rajma Chawal', 600, 22, 92, 12, 16, 9, ['vegan', 'gluten-free'], "https://www.youtube.com/watch?v=LAZECjg7Oqk","https://www.secondrecipe.com/wp-content/uploads/2017/08/rajma-chawal-1-500x375.jpg"),
      meal('Paneer Tikka Bowl', 580, 35, 45, 22, 6, 8, ['vegetarian'], "https://www.youtube.com/watch?v=hJ1LnKD3hgA","https://www.cookwithkushi.com/wp-content/uploads/2023/02/paneer_tikka_at_home_01.jpg"),
      meal('Fish with Vegetables', 520, 38, 40, 18, 8, 6, ['pescatarian'],"https://www.youtube.com/watch?v=vkPSWDBsk0I","https://www.eatingwell.com/thmb/9iE5TLvgpcboV06RTClbeEcJlKs=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/7801648-4bb773b6db8c4ecab916ed5520daf23b.jpg"),
      meal('Egg Fried Rice', 560, 24, 80, 16, 4, 5, ['vegetarian'],"https://www.youtube.com/watch?v=GfyJS-flQQo","https://data.thefeedfeed.com/static/2020/04/16/15870736275e98d25b874a7.JPG")
    ],
    eveningSnack: [
      meal("Sprouts Chaat", 200, 12, 28, 4, 5, 4, ["vegan"]),
      meal("Masala Chai & Khakhra", 150, 4, 22, 4, 1, 6, ["vegetarian"]),
      meal('Samosa (1 piece)', 150, 3, 18, 7, 2, 1, ['vegetarian']),
      meal('Bhel Puri', 180, 4, 32, 4, 3, 5, ['vegetarian']),
      meal('Dhokla (2 pieces)', 120, 6, 20, 2, 3, 4, ['vegetarian'])
    ],
    dinner: [
      meal("Dal with Quinoa", 500, 24, 75, 10, 12, 6, ["vegan"],"https://www.youtube.com/watch?v=qcdMqTLUblg","https://www.cookwithmanali.com/wp-content/uploads/2019/02/Instant-Pot-Quinoa-Khichdi.jpg"),
      meal("Egg Curry with Roti", 520, 28, 58, 16, 8, 6, ["vegetarian"],"https://www.youtube.com/watch?v=pqGMxHIfcXg","https://www.shutterstock.com/shutterstock/photos/1869683365/display_1500/stock-photo-egg-curry-and-chappati-or-roti-or-indian-flat-bread-popular-in-north-and-central-india-1869683365.jpg"),
      meal('Shrimp Stir Fry', 540, 36, 48, 18, 7, 6, ['pescatarian'],"https://www.youtube.com/shorts/M839t3tEY-M","https://healthyrecipesblogs.com/wp-content/uploads/2024/12/shrimp-stir-fry-featured-new.jpg"),
      meal('Chicken Soup with Bread', 430, 30, 40, 12, 4, 4, [],"https://www.youtube.com/shorts/N1ZBc1EZAPo","https://media-cdn2.greatbritishchefs.com/media/zqohfx1w/img60501.whqc_1426x713q80.jpg")
    ]
  },

  US: {
    morningDrink: [
      meal("Green Smoothie", 90, 2, 20, 1, 3, 12, ["vegan"]),
      meal('Black Coffee', 5, 0, 1, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Green Smoothie', 120, 3, 25, 1, 4, 18, ['vegan', 'gluten-free']),
      meal('Protein Shake', 180, 25, 8, 5, 1, 5, ['gluten-free'])
    ],
    breakfast: [
      meal('Oatmeal & Berries', 350, 12, 60, 8, 9, 12, ['vegan', 'gluten-free'],"https://www.youtube.com/shorts/DkHzSCT1Po0","https://data.thefeedfeed.com/recommended/post_4491715.jpeg"),
      meal('Scrambled Eggs with Toast', 420, 24, 32, 20, 4, 5, ['vegetarian'],"https://www.youtube.com/watch?v=Zouy8M6R1Cs","https://www.allrecipes.com/thmb/VOeTuH5iNQP0YjHUaEkLgLKol3I=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/AR-57459-oven-scrambled-eggs-DDMFS-4x3-step-Beauty-f31f2904bb3a4eee80ed3e135436cc77.jpg"),
      meal('Smoothie Bowl', 380, 18, 55, 10, 7, 22, ['vegan'],"https://www.youtube.com/watch?v=f1p6W1bTxQc","https://www.darngoodveggies.com/wp-content/uploads/2021/07/Strawberry-Smoothie-Bowl-6.jpg"),
      meal('Avocado Toast', 320, 10, 35, 16, 8, 3, ['vegetarian'],"https://www.youtube.com/watch?v=VXeLSRc02TM","https://www.jessicagavin.com/wp-content/uploads/2020/07/avocado-toast-20-1200.jpg"),
      meal('Breakfast Burrito', 480, 25, 45, 22, 5, 4, [],"https://www.youtube.com/shorts/G5xzmzKbamk","https://www.allrecipes.com/thmb/BmnDvAZyG_N-R3jhVQxGAF_szG0=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/261844-freeze-and-reheat-breakfast-burritos-ddmfs-3X4-0359-8c6dd90974a545ddab2504633cd43f00.jpg")
    ],
    midMorning: [
      meal("Greek Yogurt & Honey", 180, 12, 18, 4, 0, 12, ["vegetarian"]),
      meal('Apple with Peanut Butter', 200, 7, 25, 9, 5, 18, ['vegan', 'gluten-free']),
      meal('Greek Yogurt', 120, 15, 6, 4, 0, 5, ['vegetarian']),
      meal('Protein Bar', 220, 20, 22, 6, 3, 12, ['gluten-free'])
    ],
    lunch: [
      meal("Turkey Sandwich", 550, 32, 55, 18, 6, 7, [],"https://www.youtube.com/watch?v=1PkE1nn2h6k","https://assets.unileversolutions.com/recipes-v2/72390.jpg"),
      meal("Burrito Bowl", 650, 32, 80, 16, 10, 8, [],"https://www.youtube.com/shorts/jHuPIx3S15o","https://www.simplysissom.com/wp-content/uploads/2019/07/Healthy-Burrito-Bowls-With-Cilantro-Lime-Dressing-FI-1.jpg"),
      meal('Salmon & Brown Rice', 620, 38, 58, 20, 7, 6, ['pescatarian'],"https://www.youtube.com/watch?v=4Lyo1Sf1GqU","https://www.sidechef.com/recipe/d196167d-562e-45ae-977a-0d1c3aa3b93c.jpg"),
      meal('Quinoa Salad', 520, 18, 70, 15, 9, 8, ['vegan', 'gluten-free'],"https://www.youtube.com/watch?v=OQ9mU_zAtEs","https://reciperunner.com/wp-content/uploads/2019/07/Summer-Quinoa-Salad-Photo.jpg"),
      meal('Chicken Caesar Wrap', 580, 35, 45, 25, 5, 4, [],"https://www.youtube.com/watch?v=aeXIT0m9Cqg","https://tastesbetterfromscratch.com/wp-content/uploads/2020/04/Chicken-Caesar-Wrap-Thumbnail-1.jpg")
    ],
    eveningSnack: [
      meal("Apple with Peanut Butter", 190, 6, 22, 8, 4, 18, ["vegetarian"]),
      meal("Trail Mix", 210, 8, 20, 12, 3, 10, ["vegetarian"]),
      meal('Hummus with Veggies', 150, 5, 18, 7, 6, 3, ['vegan', 'gluten-free']),
      meal('Handful of Almonds', 170, 6, 6, 15, 4, 1, ['vegan', 'gluten-free']),
      meal('Cheese and Crackers', 200, 10, 18, 10, 1, 2, ['vegetarian'])
    ],
    dinner: [
      meal("Steak & Veggies", 700, 46, 35, 32, 8, 6, [],"https://www.youtube.com/shorts/U1K52552Ib4","https://img.hellofresh.com/f_auto,fl_lossy,h_640,q_auto,w_1200/hellofresh_s3/image/juicy-steak-718c991a.jpg"),
      meal("Tofu Stir Fry", 520, 28, 60, 14, 8, 8, ["vegan"],"https://www.youtube.com/watch?v=NYaj5ruBytM","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ19WVTwU1FmRHoqSuDJRAmwGZEqX_ntnGvFzNx5EboAMsIz9JTDxfFyvdKv4Zofistjhk&usqp=CAU"),
      meal('Chicken Alfredo (light)', 640, 36, 70, 18, 5, 6, [],"https://www.youtube.com/watch?v=LPPcNPdq_j4","https://gimmedelicious.com/wp-content/uploads/2024/10/Skinny-Chicken-Broccoli-Alfredo-1.jpg"),
      meal('Baked Salmon with Asparagus', 580, 40, 12, 38, 6, 4, ['pescatarian'],"https://www.youtube.com/watch?v=5oBOsumL8Uo","https://cafedelites.com/wp-content/uploads/2016/03/One-Pan-Baked-Lemon-Garlic-Salmon-Asparagus-53-1-500x375.jpg"),
      meal('Vegetable Lasagna', 620, 28, 65, 25, 9, 12, ['vegetarian'],"https://www.youtube.com/watch?v=nVY6Ze5VYsk","https://wendypolisi.com/wp-content/uploads/2021/02/SQ-veggie-lasagna.jpg")
    ]
  },

  IT: {
    morningDrink: [
      meal("Espresso", 5, 0, 0, 0, 0, 0, ["vegan"]),
      meal("Cappuccino", 120, 6, 10, 6, 0, 8, ["vegetarian"]),
      meal('Orange Juice', 110, 2, 26, 0, 1, 22, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Ricotta Toast", 350, 18, 38, 12, 2, 5, ["vegetarian"],"https://www.youtube.com/watch?v=CPNK6x5zdRc","https://www.budgetbytes.com/wp-content/uploads/2025/01/Ricotta-Toast-Four-Ways-Overhead.jpg"),
      meal('Cappuccino & Cornetto', 320, 7, 46, 12, 2, 18, ['vegetarian'],"https://www.youtube.com/shorts/8AfOIdSwGdA","https://pbs.twimg.com/media/Ekb8l-pXgAAe4Tl.jpg"),
      meal('Yogurt with Honey', 220, 12, 28, 6, 1, 24, ['vegetarian'],"https://www.youtube.com/shorts/52LrCNrblxU","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTQfk3SY-FSMPXZAoRi5ws2xV365MQwFFBtBA&s"),
      meal('Frittata', 380, 25, 8, 26, 2, 4, ['vegetarian'],"https://www.youtube.com/watch?v=VP0Tu9xY3hU","https://cdn.loveandlemons.com/wp-content/uploads/2019/04/frittata.jpg"),
      meal('Biscotti with Coffee', 280, 6, 42, 10, 2, 22, ['vegetarian'],"https://www.youtube.com/watch?v=DYCQEa4W93g","https://thecozyapron.com/wp-content/uploads/2020/12/biscotti_thecozyapron_1.jpg")
    ],
    midMorning: [
      meal("Fruit Cup", 100, 2, 25, 0, 2, 18, ["vegan"]),
      meal("Cheese Cubes", 150, 12, 2, 10, 0, 0, ["vegetarian"]),
      meal('Fresh Fruit', 90, 1, 23, 0, 3, 18, ['vegan', 'gluten-free']),
      meal('Bruschetta', 150, 5, 20, 6, 2, 3, ['vegetarian']),
      meal('Handful of Olives', 100, 1, 3, 10, 2, 0, ['vegan', 'gluten-free'])
    ],
    lunch: [
      meal("Grilled Chicken Insalata", 520, 40, 35, 18, 6, 6, [],"https://www.youtube.com/watch?v=1rJeF1i6oqE","https://hips.hearstapps.com/hmg-prod/images/grilled-chicken-salad-lead-6628169550105.jpg"),
      meal('Pasta al Pomodoro', 600, 18, 90, 14, 8, 8, ['vegan', 'vegetarian'],"https://www.youtube.com/watch?v=w0tzHlOOiyE","https://blog.giallozafferano.it/valeriaciccotti/wp-content/uploads/2022/08/pasta-s.jpg"),
      meal('Margherita Pizza Slice', 680, 28, 85, 22, 5, 8, ['vegetarian'],"https://www.youtube.com/watch?v=vafnnbFih3w","https://bakerstable.net/wp-content/uploads/2021/03/Margherita-pizza-2021-7-e1614881703699.jpg"),
      meal('Risotto ai Funghi', 620, 15, 95, 16, 6, 5, ['vegetarian'],"https://www.youtube.com/watch?v=DOBM-roI_yI","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRvbRaiINXCI-6nwYnnMsPsxQBq3nXMjoqbSm-aeApu46Afzcrw9QylvFWkj2xsRsR5JzQ&usqp=CAU"),
      meal('Seafood Linguine', 650, 32, 78, 20, 5, 6, ['pescatarian'],"https://www.youtube.com/watch?v=vIYcJQEdcio","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRfelMVua0-XkoFb2MEgdSV2nlYAfZKbBYGRA&s")
    ],
    eveningSnack: [
      meal("Bruschetta", 180, 6, 25, 6, 2, 4, ["vegetarian"]),
      meal("Caprese Salad", 200, 12, 14, 12, 2, 4, ["vegetarian"]),
      meal('Pane e Olio', 180, 4, 20, 10, 2, 1, ['vegan', 'gluten-free']),
      meal('Caprese Skewers', 150, 8, 5, 12, 1, 4, ['vegetarian']),
      meal('Biscotti with Vin Santo', 220, 4, 32, 8, 1, 20, ['vegetarian'])
    ],
    dinner: [
      meal("Risotto & Veg", 640, 18, 92, 18, 6, 7, ["vegetarian"],"https://www.youtube.com/watch?v=1kca5LFwDeQ","https://plantbasedonabudget.com/wp-content/uploads/2013/10/Vegan-Vegetable-Risotto-Plant-Based-on-a-Budget-1-2.jpg"),
      meal("Seafood Pasta", 620, 32, 78, 16, 5, 6, ["pescatarian"],"https://www.youtube.com/watch?v=obcidPMHTHo","https://amandascookin.com/wp-content/uploads/2023/06/Cajun-Shrimp-Pasta-RCSQ-500x500.jpg"),
      meal('Osso Buco', 720, 45, 35, 40, 6, 5, [],"https://www.youtube.com/watch?v=Jr9Is6NsFck","https://www.billyparisi.com/wp-content/uploads/2019/09/osso-buco-2.jpg"),
      meal('Eggplant Parmesan', 580, 25, 55, 28, 10, 12, ['vegetarian'],"https://www.youtube.com/watch?v=rLZsKI8dcvo","https://www.tablefortwoblog.com/wp-content/uploads/2022/06/eggplant-parmesan-recipe-photo-tablefortwoblog-2-scaled.jpg"),
      meal('Grilled Fish with Vegetables', 540, 38, 25, 30, 8, 5, ['pescatarian'],"https://www.youtube.com/watch?v=vkPSWDBsk0I","https://thumbs.dreamstime.com/b/grilled-fish-vegetables-17536319.jpg")

    ]
  },

  JP: {
    morningDrink: [
      meal("Matcha Tea", 10, 0, 2, 0, 0, 0, ["vegan"]),
      meal("Soy Milk", 80, 6, 8, 4, 2, 5, ["vegan"]),
      meal('Green Tea', 2, 0, 0, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Mugicha (Barley Tea)', 0, 0, 0, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Genmaicha', 5, 0, 1, 0, 0, 0, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Tamago & Rice", 380, 18, 50, 12, 2, 4, ["vegetarian"],"https://www.youtube.com/watch?v=JlZrbyXIBaY&t=148s","https://cdn.apartmenttherapy.info/image/upload/f_jpg,q_auto:eco,c_fill,g_auto,w_1500,ar_1:1/k%2FPhoto%2FRecipes%2F2021-04-japanese-breakfast-tomago%2Fk-photo-2021-05-tamago-kake-gohan-06"),
      meal("Miso Soup & Tofu", 320, 18, 36, 10, 4, 5, ["vegan"],"https://www.youtube.com/watch?v=TwCZXv-4J54","https://www.wellseasonedstudio.com/wp-content/uploads/2024/06/Miso-soup-with-tofu-sesame-seeds-and-watercress.jpg"),
      meal('Natto with Rice', 350, 20, 45, 10, 6, 3, ['vegetarian'],"https://www.youtube.com/watch?v=3jnVjpUxoPI","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSY2_xuQxKDMOG9p6q193T05-0awMLZNxsCAw&s"),
      meal('Japanese Omelette', 280, 18, 12, 18, 1, 8, ['vegetarian'],"https://www.youtube.com/watch?v=pGct0fAy_dI","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSaRNLyBhhX3W_Uzrk3iHTR0MR4OILiHZBMlg&s"),
      
    ],
    midMorning: [
      meal("Edamame", 120, 12, 10, 4, 5, 2, ["vegan"]),
      meal("Onigiri", 160, 4, 35, 2, 1, 3, ["vegan"]),
      meal('Rice Crackers', 100, 2, 20, 1, 1, 2, ['vegan', 'gluten-free']),
      meal('Mochi (1 piece)', 100, 2, 22, 1, 1, 10, ['vegetarian'])
    ],
    lunch: [
      meal("Sushi Set", 600, 28, 86, 14, 5, 6, ["pescatarian"],"https://www.youtube.com/watch?v=dR3QMxReUOQ","https://im.pluckk.in/unsafe/1200x0/uploads/7452-sushi-main.jpg"),
      meal("Chicken Teriyaki Bowl", 640, 36, 80, 16, 6, 7, [],"https://www.youtube.com/watch?v=AEUBQ7Ieub0","https://simplehomeedit.com/wp-content/uploads/2021/04/Chicken-Teriyaki-Bowl-Recipe.webp"),
      meal('Grilled Fish with Rice', 420, 30, 45, 12, 2, 3, ['pescatarian'],"https://www.youtube.com/watch?v=zxC1KjOki9I","https://www.healthyfood.com/wp-content/uploads/2016/09/Grilled-fish-and-vege-rice.jpg"),
      meal('Ramen', 680, 30, 85, 22, 6, 8, [],"https://www.youtube.com/watch?v=plTuwZva37k","https://hips.hearstapps.com/hmg-prod/images/190208-delish-ramen-horizontal-093-1550096715.jpg?crop=0.8893333333333334xw:1xh;center,top&resize=1200:*"),
      meal('Udon Noodle Soup', 580, 22, 95, 12, 6, 8, ['vegetarian'],"https://www.youtube.com/watch?v=K1VtWmTSlzU","https://www.connoisseurusveg.com/wp-content/uploads/2022/02/udon-noodle-soup-sq-7.jpg")
    ],
    eveningSnack: [
      meal("Seaweed Salad", 80, 3, 10, 2, 4, 2, ["vegan"]),
      meal("Miso Soup", 70, 6, 8, 2, 1, 2, ["vegan"]),
      meal('Senbei (Rice Crackers)', 80, 2, 16, 1, 1, 2, ['vegan', 'gluten-free']),
      meal('Yakitori (2 skewers)', 180, 20, 8, 8, 1, 6, []),
      meal('Daifuku (1 piece)', 120, 2, 26, 1, 1, 16, ['vegetarian'])
    ],
    dinner: [
      meal("Salmon Don", 620, 34, 78, 18, 5, 6, ["pescatarian"],"https://www.youtube.com/watch?v=XA1EIVXbCBY","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQjRG8KFQvm9NCgjwYNXn9xVDhqkFPP9_qkDg&s"),
      meal("Ramen (light)", 630, 24, 86, 18, 4, 5, [],"https://www.youtube.com/watch?v=-ba5twlPFlM","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSASYNvmp59Rk36j6WktcbzRcnnJ-iGw5X-ZTSDT2Tp1GgT0Pt6ZBRYtfsKklNrtJRBjEQ&usqp=CAU"),
      meal('Sukiyaki', 720, 42, 35, 40, 8, 12, [],"https://www.youtube.com/watch?v=JMTJXarcCLc","https://www.foodandwine.com/thmb/WN5W5wiPcaUHeuBzjiaUev3Qi1s=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/sukiyaki-FT-RECIPE0325-5d4fe2cce1c547c7a570c3280b0849c7.jpg"),
      meal('Tempura Set', 680, 28, 85, 25, 6, 8, [],"https://www.youtube.com/shorts/mggXfzGSkG0","https://www.fuji.co.th/wp-content/uploads/2021/05/133.-003_Tempura-Set.jpg"),
      meal('Yakiniku', 750, 45, 30, 45, 8, 10, [],"https://www.youtube.com/watch?v=4JYGGEx2k-w","https://www.kitchensanctuary.com/wp-content/uploads/2024/08/Beef-Yakiniku-square-FS.jpg")
      
    ]
  },

  MX: {
    morningDrink: [
      meal("Horchata", 120, 2, 25, 2, 1, 15, ["vegetarian"]),
      meal("Black Coffee", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal('Caf√© de Olla', 60, 1, 12, 1, 0, 10, ['vegan', 'gluten-free']),
      meal('Atole', 150, 4, 28, 3, 2, 18, ['vegetarian']),
      meal('Agua Fresca', 90, 1, 22, 0, 1, 20, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Chilaquiles", 420, 14, 50, 16, 4, 6, ["vegetarian"],"https://www.youtube.com/watch?v=xL_XD2wfYws","https://staticcookist.akamaized.net/wp-content/uploads/sites/22/2022/01/chilaquiles.jpg"),
      meal("Huevos Rancheros", 380, 20, 34, 12, 3, 4, ["vegetarian"],"https://www.youtube.com/watch?v=pdNm4ug9PpE","https://boulderlocavore.com/wp-content/uploads/2022/04/huevos-rancheros-BoulderLocavore.com-8475ig.jpg"),
      meal('Breakfast Burrito', 480, 28, 45, 22, 6, 4, [],"https://www.youtube.com/watch?v=5R_3iuNNUk0","https://embed.widencdn.net/img/beef/hpmyvvgxd4/1120x840px/Beef%20Breakfast%20Burritos_2?keep=c&u=7fueml"),
      meal('Molletes', 420, 18, 55, 16, 8, 12, ['vegetarian'],"https://www.youtube.com/watch?v=cAs6SxgAeH8","https://cdn11.bigcommerce.com/s-5ljyj9oebs/images/stencil/600x600/products/3607/28122/P012623224734_1__44543.1712258810.jpg?c=2"),
      meal('Tamales (2 pieces)', 380, 12, 45, 16, 5, 5, ['vegetarian'],"https://www.youtube.com/watch?v=XFwHkwUddZQ","https://www.allrecipes.com/thmb/Lr9xjJ7lR0erc3VXlemXG8lubmg=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/ALR-34512-real-homemade-tamales-VAT-hero-4x3-2-2801c868c29848e782ffe9a3f9610cd9.jpg")
    ],
    midMorning: [
      meal("Guava Slices", 90, 2, 20, 0, 3, 12, ["vegan"]),
      meal("Corn Snack (Elote Cup)", 200, 6, 30, 8, 4, 6, ["vegetarian"]),
      meal('Jicama with Chili', 60, 1, 14, 0, 5, 8, ['vegan', 'gluten-free']),
      meal('Elote Cup', 180, 6, 25, 7, 4, 10, ['vegetarian']),
      meal('Empanada (1 piece)', 220, 8, 25, 10, 2, 3, [])
    ],
    lunch: [
      meal("Tacos al Pastor", 600, 32, 70, 20, 6, 8, [],"https://www.youtube.com/watch?v=4ZJIzEeqAFw","https://www.thespruceeats.com/thmb/wQd2RvxH1Lh9536W5LY1T_VSyT8=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/tacos-al-pastor-recipe-4172074-hero-01-7fb1a4455397486b8485ac8ec2ca3c5a.jpg"),
      meal("Burrito Bowl", 650, 28, 85, 18, 8, 7, [],"https://www.youtube.com/watch?v=v3FGarkITTQ","https://feelgoodfoodie.net/wp-content/uploads/2023/09/Chicken-Burrito-Bowl-TIMG.jpg"),
      meal('Tacos (3 pieces)', 650, 35, 55, 28, 8, 6, [],"https://www.youtube.com/watch?v=CJBc2mm2yCg","https://princesspinkygirl.com/wp-content/uploads/2024/02/Cheeseburger-Tacos-Exclusive-9hero.jpg"),
      meal('Enchiladas', 680, 32, 65, 32, 10, 8, [],"https://www.youtube.com/watch?v=qGPsT5jzjqM","https://thecookingjar.com/wp-content/uploads/2024/02/beef-enchiladas-7.jpg"),
      meal('Pozole', 620, 38, 55, 25, 12, 6, [],"https://www.youtube.com/watch?v=EOCbO9DwrIs","https://www.simplyrecipes.com/thmb/8jmlM7ZTRPdhDlxFRTUDOPAMAB0=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/__opt__aboutcom__coeus__resources__content_migration__simply_recipes__uploads__2011__10__posole-rojo-vertical-b2-1600-b92c7f3ea7394957b10b0a1d4862f00f.jpg"),
      meal('Tostadas', 580, 28, 60, 25, 10, 6, [],"https://www.youtube.com/watch?v=EscFfxuNlhM","https://cdn.loveandlemons.com/wp-content/uploads/2025/04/311_LLBlogJan_TostadaPickedPeppers_66564-recipe.jpg"),
      meal('Quesadillas', 550, 30, 45, 28, 6, 5, ['vegetarian'],"https://www.youtube.com/results?search_query=quesadilla+recipe","https://cdn.loveandlemons.com/wp-content/uploads/2024/01/quesadilla.jpg")
      
    ],
    eveningSnack: [
      meal("Nachos with Salsa", 220, 6, 32, 10, 3, 4, ["vegetarian"]),
      meal("Fruit Cup with Chili", 150, 2, 36, 1, 3, 18, ["vegan"]),
      meal('Churros (2 pieces)', 240, 4, 35, 10, 2, 20, ['vegetarian']),
      meal('Flautas (2 pieces)', 280, 12, 28, 14, 4, 3, []),
      meal('Guacamole with Chips', 320, 6, 35, 20, 10, 4, ['vegan', 'gluten-free'])
    ],
    dinner: [
      meal("Enchiladas", 620, 26, 78, 18, 6, 8, ["vegetarian"],"https://www.youtube.com/watch?v=ublnZ9It0uc","https://www.allrecipes.com/thmb/tc829Re3dQr_49ETCLFBZnKYb7o=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/8691-chicken-enchiladas-DDMFS-4x3-322-de64088bd2e248c7b6f86572e821e9f7.jpg"),
      meal("Grilled Chicken Fajitas", 580, 36, 52, 20, 6, 6, [],"https://www.youtube.com/watch?v=zzuLBTnUNLY","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJB-GH9aXE8p1vPr2AI3k7SpdPU4s00eVR8QBMNtD73fNxlxr3xWOAciSuxUCwjuF5LNg&usqp=CAU"),
      meal('Carne Asada', 720, 48, 25, 45, 8, 5, [],"https://www.youtube.com/watch?v=YhW7nSvLJ9Y","https://grandbaby-cakes.com/wp-content/uploads/2017/07/carne-asada-recipe.jpg"),
      meal('Mole Poblano', 680, 42, 55, 32, 12, 15, [],"https://www.youtube.com/watch?v=bFrysZWH5Oc","https://cdn7.kiwilimon.com/recetaimagen/21944/640x640/26440.jpg.webp"),
      meal('Ceviche', 520, 35, 30, 25, 6, 8, ['pescatarian'],"https://www.youtube.com/watch?v=MHfYg77rJ-s","https://cdn.apartmenttherapy.info/image/upload/f_jpg,q_auto:eco,c_fill,g_auto,w_1500,ar_1:1/k%2FPhoto%2FRecipes%2F2019-06-Easy-Shrimp-Ceviche-with-Avocado%2FEasy-Shrimp-Ceviche-with-Avocado_010_a68f7c_cropped"),
      meal('Chiles Rellenos', 620, 28, 45, 35, 10, 12, ['vegetarian'],"https://www.youtube.com/watch?v=Cy1yilIIBB0","https://eatingrichly.com/wp-content/uploads/2018/06/chiles-relleno-authentic-2032-735x1103.jpg"),
      meal('Pescado a la Veracruzana', 580, 42, 25, 32, 8, 10, ['pescatarian'],"https://www.youtube.com/watch?v=zodyeV8_Fq8","https://i0.wp.com/mexicanfoodmemories.co.uk/wp-content/uploads/2020/11/1104e698-c55f-425a-aaa4-cd7c0c37fb7c-f8e5e6d4-5fbe-454a-8526-c7a333c88080-scaled.jpg?fit=1920%2C2560&ssl=1")
    ]
  },
    GB: {
    morningDrink: [
      meal("English Breakfast Tea", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal("Black Coffee", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal('Coffee with Milk', 30, 2, 3, 1, 0, 3, ['vegetarian']),
      meal('Orange Juice', 110, 2, 26, 0, 1, 22, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal('Full English Breakfast', 780, 42, 45, 48, 8, 10, [],"https://www.youtube.com/watch?v=n2POMVVED1A","https://www.foodandwine.com/thmb/eN9iNzrq2SrcDOnkR5CJm2dr2A4=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/full-english-breakfast-FT-Recipe0225-0bab8edfd24a44b087a3548254dbb409.jpeg"),
      meal('Porridge with Berries', 320, 12, 55, 8, 8, 18, ['vegan', 'gluten-free'],"https://www.youtube.com/watch?v=ywkEGKXk2cQ&t=100s","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSiduyCE3nPhNXrxIhxqaZje9ihSt1Hx6F2Ww&s"),
      meal('Eggs on Toast', 380, 22, 35, 18, 5, 5, ['vegetarian'],"https://www.youtube.com/watch?v=WsonsBTQoc0","https://cooktoria.com/wp-content/uploads/2019/09/Best-Egg-Toast-SQ-1.jpg"),
      meal('Beans on Toast', 420, 18, 65, 12, 15, 12, ['vegetarian'],"https://www.youtube.com/watch?v=6EIv5L7UDyk","https://food.fnr.sndimg.com/content/dam/images/food/fullset/2011/10/5/1/FNM_110111-WN-Dinners-001_s4x3.jpg.rend.hgtvcom.1280.1280.suffix/1382540811716.webp"),
      meal('Yogurt with Granola', 350, 15, 45, 12, 5, 25, ['vegetarian'],"https://www.youtube.com/watch?v=8jwFwVHTgZc","https://www.katiescucina.com/wp-content/uploads/2022/08/Granola-with-Yogurt-Square.jpg")
    ],
    midMorning: [
      meal("Digestive Biscuits & Tea", 180, 4, 28, 6, 2, 12, ["vegetarian"]),
      meal('Scone with Jam', 220, 4, 35, 8, 2, 15, ['vegetarian']),
      meal('Apple', 95, 1, 25, 0, 4, 19, ['vegan', 'gluten-free'])
    ],
    lunch: [
      meal("Chicken & Veg Pie", 550, 32, 45, 18, 5, 6, [],"https://www.youtube.com/watch?v=XQQcnNf3p0w","https://cdn.sanity.io/images/cq7w2e71/production/9cbb25d5ff0ea77a77972d66e100b8fc4b603a9a-958x1280.jpg"),
      meal('Fish and Chips', 880, 35, 85, 45, 8, 5, ['pescatarian'],"https://www.youtube.com/watch?v=CYEFR_kg6Us","https://dinnerthendessert.com/wp-content/uploads/2024/02/fish-and-chips-1x1-1.jpg"),
      meal('Ploughman\'s Lunch', 620, 28, 55, 32, 8, 20, ['vegetarian'],"https://www.youtube.com/watch?v=VN_44JajST4","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTlbLzjYVfLB64g85iRcfRJM_1pMvGL4Me0Wak6Ya9laswzlNC3IgLYmGOB5siy6_KHAP8&usqp=CAU"),
      meal('Shepherd\'s Pie', 720, 38, 65, 32, 10, 12, [],"https://www.youtube.com/watch?v=TqIoyTImsFQ","https://www.thewholesomedish.com/wp-content/uploads/2019/02/The-Best-Classic-Shepherds-Pie-550-500x375.jpg"),
      meal('Bangers and Mash', 680, 32, 55, 38, 8, 8, [],"https://www.youtube.com/watch?v=EYTEw5XJcek","https://www.gimmesomeoven.com/wp-content/uploads/2024/12/Bangers-and-Mash-Recipe-10.jpg"),
      meal('Cornish Pasty', 580, 25, 55, 28, 6, 5, [],"https://www.youtube.com/watch?v=pzNugUSsLLI","https://images.immediate.co.uk/production/volatile/sites/30/2012/08/Cornish-pasty-72b39c9.jpg?resize=768,845")
    ],
    eveningSnack: [
      meal("Tea & Scones", 200, 6, 30, 6, 2, 12, ["vegetarian"]),
      meal("Cheese Sandwich", 220, 12, 28, 8, 2, 4, ["vegetarian"]),
      meal('Tea with Biscuits', 180, 3, 28, 7, 2, 15, ['vegetarian']),
      meal('Crumpet with Butter', 200, 5, 25, 10, 2, 3, ['vegetarian']),
      meal('Cheese and Crackers', 220, 10, 18, 12, 1, 2, ['vegetarian'])
    ],
    dinner: [
      meal("Roast Dinner (Chicken)", 650, 40, 58, 20, 6, 7, [],"https://www.youtube.com/watch?v=OKPCLE6KNcs","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS1Ixp6zEhus5kDyIZidyF0-UQgpgpa7po5q98FapFJ_WUwmTraIkiILxTqEN0ER8eK3gQ&usqp=CAU"),
      meal("Shepherd‚Äôs Pie", 580, 32, 55, 18, 5, 6, [],"https://www.youtube.com/watch?v=M_GNznvIN1E","https://thedefineddish.com/wp-content/uploads/2025/03/Skillet-Shepherd_s-Pie-5-scaled.jpg"),
      meal('Roast Beef with Vegetables', 780, 55, 45, 42, 12, 10, [],"https://www.youtube.com/watch?v=rApdDLwp_gM","https://marleyspoon.com/media/recipes/137067/main_photos/large/fast-cd16edb637779084bdc9a9cfd5e5b556.jpeg"),
      meal('Chicken Tikka Masala', 720, 45, 65, 32, 8, 12, [],"https://www.youtube.com/watch?v=wm5vqZcl8BQ","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ3wScEbbHPa_GGDOWbiDrFUimU5--1-PcnSBiiiEEK8-AVwmitjA_rsClH7JK-GUXtOOY&usqp=CAU"),
      meal('Steak and Kidney Pie', 750, 38, 55, 45, 8, 6, [],"https://www.youtube.com/watch?v=7Uf_T2rucaw","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS6gmKWCO7k3jqiPEnVyuWinV3ladZ-pB00OA&s"),
      meal('Vegetable Wellington', 620, 25, 65, 28, 12, 10, ['vegetarian'],"https://www.youtube.com/watch?v=VKdT0vD_DQE","https://www.connoisseurusveg.com/wp-content/uploads/2022/11/vegetable-wellington-22-sq-2.jpg"),
      meal('Salmon with New Potatoes', 650, 42, 45, 35, 8, 6, ['pescatarian'],"https://www.youtube.com/watch?v=ieA1cQjrFNA","https://www.eatingwell.com/thmb/dJ96kvYGmWQOuW2QYk8dms_W8tI=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/Seared-Honey-Salmon-with-Potatoes--Spinach-hero-1x1-24951_preview_maxWidth_4000_maxHeight_4000_ppi_300_quality_100-8e9275ccf0f94579afc6029343e01415.jpg")
    ]
  },

  FR: {
    morningDrink: [
      meal("Caf√© au Lait", 80, 4, 8, 4, 0, 6, ["vegetarian"]),
      meal("Black Coffee", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal('Espresso', 5, 0, 1, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Hot Chocolate', 200, 8, 25, 8, 3, 22, ['vegetarian'])
    ],
    breakfast: [
      meal("Baguette with Butter & Jam", 300, 8, 50, 10, 2, 15, ["vegetarian"],"https://www.youtube.com/watch?v=AP23eBTWCB0","https://www.thelastfoodblog.com/wp-content/uploads/2020/01/Sourdough-French-Toast-landscape.jpg"),
      meal('Croissant with Jam', 320, 6, 35, 18, 2, 12, ['vegetarian'],"https://www.youtube.com/watch?v=ZiRfG0-mAa0","https://media.istockphoto.com/id/949607434/photo/breakfast-with-orange-juice-and-brioches.jpg?s=612x612&w=0&k=20&c=-M_TlUf0_4Yiwc4NkOCaqci6gU3rBrslR1I-GYySFdM="),
      meal('Pain au Chocolat', 350, 7, 38, 20, 3, 18, ['vegetarian'],"https://www.youtube.com/watch?v=O4PjdGQsSFc","https://images.immediate.co.uk/production/volatile/sites/30/2024/06/PainAuChoc-0ff983a.jpg"),
      meal('Omelette aux Fines Herbes', 280, 20, 2, 22, 1, 2, ['vegetarian'],"https://www.youtube.com/watch?v=rB6xCpVeOY0","https://static01.nyt.com/images/2022/05/11/dining/JP-Fines-Herbes-Omelet/JP-Fines-Herbes-Omelet-mediumSquareAt3X.jpg"),
      meal('Yogurt with Honey', 220, 12, 28, 6, 1, 24, ['vegetarian'],"https://www.youtube.com/watch?v=6D1Pg8T6D3Q","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTQfk3SY-FSMPXZAoRi5ws2xV365MQwFFBtBA&s"),
      meal('Brioche', 300, 7, 38, 14, 2, 15, ['vegetarian'],"https://www.youtube.com/watch?v=ziZe_SGblAY","https://bakingwithbutter.com/wp-content/uploads/2025/03/brioche-suisse-2-1.jpg")
    ],
    midMorning: [
      meal("Cheese & Grapes", 180, 10, 18, 8, 2, 12, ["vegetarian"]),
      meal("Yogurt Cup", 160, 8, 18, 5, 0, 10, ["vegetarian"]),
      meal('Piece of Fruit', 90, 1, 23, 0, 3, 18, ['vegan', 'gluten-free']),
      meal('Macaron (2 pieces)', 160, 2, 25, 6, 1, 22, ['vegetarian']),
      meal('Small Cheese Portion', 120, 8, 1, 10, 0, 1, ['vegetarian'])
    ],
    lunch: [
      meal("Quiche Lorraine", 520, 22, 42, 24, 3, 6, ["vegetarian"],"https://www.youtube.com/watch?v=naZgw-QJHMs","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQWaE6L9f7VPOlk-qdFt4jd2LJ-bd0mVlXfwQ&s"),
      meal("Coq au Vin with Rice", 650, 38, 65, 18, 6, 7, [],"https://www.youtube.com/watch?v=VQBgbsXKaRE","https://www.saltandlavender.com/wp-content/uploads/2019/03/instant-pot-coq-au-vin-41-500x500.jpg"),
      meal('Croque Monsieur', 620, 32, 38, 35, 3, 8, [],"https://www.youtube.com/watch?v=ffsWlLG4Tz4","https://tastesbetterfromscratch.com/wp-content/uploads/2016/10/Croque-Monsieur-4-1-500x500.jpg"),
      meal('Salad Ni√ßoise', 520, 30, 25, 32, 6, 6, ['pescatarian'],"https://www.youtube.com/watch?v=riszcI7BQvE","https://www.foodandwine.com/thmb/bkXN0Yi5YrBJzFx--W99t1V0AVs=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/Salade-Nicoise-FT-RECIPE0823-c7e3617cc7d4455f90a26fffa7ac128b.jpg"),
      meal('Ratatouille with Bread', 480, 12, 65, 18, 12, 15, ['vegan', 'gluten-free'],"https://www.youtube.com/watch?v=gpckuVM-h4I","https://loveincrediblerecipes.com/wp-content/uploads/2023/11/ratatouille-with-bread.jpg")
    ],
    eveningSnack: [
      meal("Madeleine & Tea", 180, 4, 26, 6, 1, 12, ["vegetarian"]),
      meal("Fruit Tart Slice", 200, 4, 30, 8, 1, 15, ["vegetarian"]),
      meal('Baguette with Butter', 200, 6, 28, 8, 2, 3, ['vegetarian']),
      meal('Olives and nuts', 180, 4, 8, 16, 4, 2, ['vegan', 'gluten-free']),
      meal('Yogurt', 120, 10, 8, 5, 0, 7, ['vegetarian'])
    ],
    dinner: [
      meal("Ratatouille with Bread", 520, 16, 65, 14, 8, 8, ["vegan"],"https://www.youtube.com/watch?v=gpckuVM-h4I","https://dinnerthendessert.com/wp-content/uploads/2023/06/Baked-Ratatouille-Vegetables-12.jpg"),
      meal("Beef Bourguignon", 680, 42, 55, 22, 5, 6, [],"https://www.youtube.com/watch?v=OlcMgfSW0mc","https://www.seriouseats.com/thmb/_CovX26D-Z6wpeDYJXGhFhA47H8=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/MMPSOUPSANDSTEWS-SEA-BoeufBourguignon-FredHardyII-000-991c38a78f934722954c47567b6be97b.jpg"),
      meal('Duck Confit', 680, 42, 15, 48, 6, 5, [],"https://www.youtube.com/watch?v=46KS4opmH2I","https://images.squarespace-cdn.com/content/v1/5e299a1389b39b36aa0bc6e2/2a52da47-269b-4626-9830-40d6701ce738/Duck+Confit+2020+square.jpg"),
      meal('Mushroom Risotto', 620, 18, 85, 20, 8, 6, ['vegetarian'],"https://www.youtube.com/watch?v=8ak3lUxy_yU","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTXcMajm_6r9HDwKMYwImJfo3B0VLuT-ejXrA&s"),
      meal('Grilled Fish with Vegetables', 580, 38, 22, 35, 8, 6, ['pescatarian'],"https://www.youtube.com/watch?v=zxC1KjOki9I","https://www.eatingwell.com/thmb/7cHxyYJme47gGuplo3Z3fep95FY=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/5544320-04f567e988ce416dadc24ba38716147d.jpg"),
      meal('Vegetable Tart', 520, 18, 55, 25, 10, 12, ['vegetarian'],"https://www.youtube.com/watch?v=9PeoBCfrsyg","https://mccormick.widen.net/content/koyrqddhnb/original/roasted_vegetable_ta_637390546074903905_800x800.jpg")
    ]
  },

  CN: {
    morningDrink: [
      meal("Jasmine Tea", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal("Soy Milk", 80, 6, 8, 4, 2, 5, ["vegan"]),
      meal('Green Tea', 2, 0, 0, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Black Sesame Drink', 150, 6, 18, 6, 3, 10, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Congee with Pickles", 250, 8, 45, 4, 2, 5, ["vegan"],"https://www.youtube.com/watch?v=KILjZ-cMdGw&t=1s","https://img.taste.com.au/t3UAs73m/taste/2016/11/congee-with-pickled-gai-choy-and-salted-egg-31413-1.jpeg"),
      meal("Steamed Buns", 300, 10, 60, 6, 2, 8, ["vegetarian"],"https://www.youtube.com/watch?v=BuKaf30gmSE","https://fullofplants.com/wp-content/uploads/2021/03/sweet-potato-steamed-buns-bao-flavored-with-lemongrass-shallots-mushrooms-vegetarian-thumb-500x500.jpg"),
      meal('Congee with Chicken', 320, 18, 45, 10, 2, 3, [],"https://www.youtube.com/watch?v=-THvyb5e4xg","https://images.immediate.co.uk/production/volatile/sites/30/2022/08/Congee-with-chicken-3c9efc8.jpg"),
      meal('Soy Milk with Youtiao', 380, 12, 55, 12, 4, 15, ['vegetarian'],"https://www.youtube.com/watch?v=jY-8I8-wDP8","https://tastecooking.com/wp-content/uploads/2019/07/Article-Hot-Soymilk-Breakfast-Recipe1.jpg"),
      meal('Rice Noodle Roll', 320, 10, 55, 8, 3, 6, ['vegetarian'],"https://www.youtube.com/watch?v=9rxPWliPF4s","https://healthynibblesandbits.com/wp-content/uploads/2018/11/Rice-Noodle-Rolls-Recipe-Cheung-Fun-2.jpg"),
    ],
    midMorning: [
      meal("Bao (small)", 120, 4, 22, 3, 1, 4, ["vegetarian"]),
      meal("Fruit Plate", 90, 1, 25, 0, 2, 18, ["vegan"]),
      meal('Fresh Fruit', 90, 1, 23, 0, 3, 18, ['vegan', 'gluten-free']),
      meal('Steamed Dumplings (2 pieces)', 160, 8, 20, 5, 2, 3, []),
      meal('Rice Crackers', 100, 2, 20, 1, 1, 2, ['vegan', 'gluten-free'])
    ],
    lunch: [
      meal("Sweet & Sour Chicken with Rice", 640, 32, 85, 18, 6, 12, [],"https://www.youtube.com/watch?v=JnURnN4MneY","https://mindfulchef.imgix.net/recipes/1684/3d76514a38ff7f0d82dca566c0cc4b9e"),
      meal("Mapo Tofu", 520, 22, 58, 14, 5, 7, ["vegetarian"], "https://www.youtube.com/watch?v=ZfsZwwrTFD4","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTD9Op98zoU2DPulTyW3-KdtKe7Olv6CGsh9A&s"),
      meal('Kung Pao Chicken', 680, 38, 55, 32, 8, 15, [],"https://www.youtube.com/watch?v=wVSfiKFxsjw","https://www.seriouseats.com/thmb/AaMf6tliWc3jh0R-9KLiJG5fzZo=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/__opt__aboutcom__coeus__resources__content_migration__serious_eats__seriouseats.com__2014__07__2021-02-12-Take-Out-Kung-Pao-Chicken-MHOM-11-c46f6c06713c45c5a287ddbf08779d04.jpg"),
      meal('Fried Rice', 620, 25, 85, 18, 6, 8, [],"https://www.youtube.com/watch?app=desktop&v=Skgp53_PYKo&utm_source=chatgpt.com","https://fullofplants.com/wp-content/uploads/2020/05/sweet-and-sour-spicy-thai-fried-rice-easy-vegan-meal-with-vegetables-thumb.jpg"),
      meal('Mapo Tofu', 580, 28, 35, 32, 8, 6, ['vegetarian'],"https://www.youtube.com/watch?v=g9DNcb7cs2s","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRt6R33p40q20frLdiKJWYasrfPssAF8Xl3vA&s"),
      meal('Sweet and Sour Pork', 720, 32, 75, 28, 6, 25, [],"https://www.youtube.com/watch?v=mtv21R1FwaQ","https://sunporkfreshfoods.com.au/wp-content/uploads/2023/03/SFF_MID-Shoulder_SweetSourPork_1080_web.jpg"),
      meal('Stir-fried Vegetables with Tofu', 520, 25, 55, 20, 12, 12, ['vegetarian'],"https://www.youtube.com/watch?v=ErJykqxQknA","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRuA2UIaCdqaLDbVcuSen24kaOsyFInZIRQG488hBA-Aa9C3TKCRYOVYXbufGUNkCh8gtA&usqp=CAU")
    ],
    eveningSnack: [
      meal("Spring Rolls", 180, 6, 28, 8, 2, 4, ["vegetarian"]),
      meal("Tea Eggs", 150, 12, 6, 8, 1, 2, ["vegetarian"]),
      meal('Mooncake (1/4 piece)', 180, 4, 28, 7, 2, 15, ['vegetarian']),
      meal('Steamed Buns (1 piece)', 140, 4, 22, 3, 1, 4, ['vegetarian']),
      meal('Almond Cookies (2 pieces)', 160, 3, 22, 7, 1, 12, ['vegetarian'])
    ],
    dinner: [
      meal("Kung Pao Chicken", 620, 38, 52, 18, 4, 8, [],"https://www.youtube.com/watch?v=wVSfiKFxsjw","https://www.chilipeppermadness.com/wp-content/uploads/2021/03/Kung-Pao-Chicken-SQ.jpg"),
      meal("Vegetable Chow Mein", 540, 18, 80, 14, 6, 7, ["vegan"],"https://www.youtube.com/watch?v=cedikKgj7fQ","https://www.pipercooks.com/wp-content/uploads/2019/12/vegetable-chow-mein-pipercooks-3.jpg"),
      meal('Peking Duck', 780, 45, 45, 45, 8, 15, [],"https://www.youtube.com/watch?v=KnJ3abXjgME","https://www.allrecipes.com/thmb/I7mLbsFOCOSkEIyYgIa1QT89tzQ=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/AR-31972-peking-duck-DDMFS-4x3-hero-3344139da66141b687e1d7b85b995bf5.jpg"),
      meal('Hot Pot', 720, 42, 35, 42, 12, 10, [],"https://www.youtube.com/watch?v=EApkyOBewEw","https://www.foodiecrush.com/wp-content/uploads/2018/02/Asian-Red-Curry-Hot-Pot-foodiecrush.com-047.jpg"),
      meal('Steamed Fish', 580, 45, 5, 35, 2, 3, ['pescatarian'],"https://www.youtube.com/watch?v=dwcLEEdxrZA","https://omnivorescookbook.com/wp-content/uploads/2024/01/240118_Chinese-Steamed-Fish_550.jpg"),
      meal('Braised Pork Belly', 680, 35, 25, 48, 4, 12, [],"https://www.youtube.com/watch?v=hBJfEzqZPiM","https://www.marionskitchen.com/wp-content/uploads/2023/09/One-Pot-Soy-Braised-Pork-Belly-Egg-01-1200x1500.webp"),
      meal('Vegetable Stir-fry with Rice', 620, 22, 85, 18, 10, 10, ['vegetarian'],"https://www.youtube.com/watch?v=-ybsqtoXOn4","https://www.tasteofhome.com/wp-content/uploads/2021/05/Mixed-Veggies-and-Rice_EXPS_TOHEDSCODR21_179454_E04_28_2b.jpg")
    ]
  },

  TH: {
    morningDrink: [
      meal("Thai Iced Tea", 120, 2, 28, 2, 0, 20, ["vegetarian"]),
      meal("Herbal Tea", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal('Thai Iced Tea', 180, 2, 32, 5, 0, 28, ['vegetarian']),
      meal('Ginger Tea', 5, 0, 1, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Coconut Water', 45, 1, 9, 0, 1, 6, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Jok (Rice Porridge)", 280, 10, 55, 6, 2, 5, ["vegan"],"https://www.youtube.com/watch?v=RaKlAJJEWbg","https://www.simplysuwanee.com/wp-content/uploads/2024/11/jok-18.jpg"),
      meal("Kai Jeow (Thai Omelette)", 340, 18, 22, 20, 2, 3, ["vegetarian"],"https://www.youtube.com/watch?v=J5woxdiUxPw","https://www.farandwide.com/wp-content/uploads/2024/12/925985af62f94d9c943eeffefbfd4f69.webp"),
      meal('Kanom Krok (Coconut Pancakes)', 300, 6, 38, 12, 3, 18, ['vegetarian'],"https://www.youtube.com/watch?v=tqC6C2_lTr4","https://cravingsbychrissyteigen.com/cdn/shop/articles/kanom-krok_07d0d6a2-b6f0-47a9-94fd-264652ee6b39.jpg?v=1695808711"),
      meal('Grilled Pork with Sticky Rice', 420, 28, 45, 15, 3, 5, [],"https://www.youtube.com/watch?v=DaI8Xomj7Bw","https://www.marionskitchen.com/wp-content/uploads/2023/05/Thai-Moo-Ping-2.jpg"),
      meal('Thai-style congee', 350, 22, 45, 10, 4, 4, ['vegetarian'],"https://www.youtube.com/watch?v=KKHpGQxEoEU","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTvpgsGfsdsSre2R2C1otYzLBe3-62xWxlohKrpmtFeRyNsokJFDOyU3KgNurlW-RIp_LI&usqp=CAU")
    ],
    midMorning: [
      meal("Mango Slices", 100, 2, 28, 0, 3, 20, ["vegan"]),
      meal("Sticky Rice Cake", 180, 4, 35, 3, 2, 12, ["vegetarian"]),
      meal('Fresh Fruit', 90, 1, 23, 0, 3, 18, ['vegan', 'gluten-free']),
      meal('Satay (2 skewers)', 200, 18, 8, 12, 2, 6, []),
      meal('Spring Roll (1 piece)', 180, 6, 22, 8, 3, 4, ['vegetarian'])
    ],
    lunch: [
      meal("Pad Thai", 600, 28, 85, 16, 6, 10, ["vegetarian"],
     "https://www.youtube.com/watch?v=70vfRls1vqA","https://assets.tmecosys.com/image/upload/t_web_rdp_recipe_584x480_1_5x/img/recipe/ras/Assets/7DE647CE-2E09-4CBE-88EE-CFFCC70D7440/Derivates/F8CA1C89-596A-4EC0-9A63-6505DDBD528C.jpg"),

meal("Green Curry with Rice", 620, 32, 82, 18, 6, 8, [],
     "https://www.youtube.com/watch?v=IIqzVYmzyk4","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSQnp3fKb9JC9fEM4x7KIFxAuHjsmXNkcSFlQ&s"),

meal("Som Tum (Papaya Salad)", 320, 12, 35, 15, 8, 25, ["vegan","gluten-free"],
     "https://www.youtube.com/watch?v=Wvv0dqZ_xa4","https://www.seriouseats.com/thmb/yKNZ9ICJC5ZNhzcYHdHENxogpFw=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/20210928-Som-Tam-Thai-green-papaya-salad-vicky-wasik-24-f0d666fc609f49a0b9f34897bd2c6303.jpg"),

meal("Tom Yum Soup", 380, 25, 25, 18, 6, 12, ["pescatarian"],
     "https://www.youtube.com/watch?v=TLl8n5WJJfI","https://evergreenkitchen.ca/wp-content/uploads/2021/10/Vegan-Tom-Yum-Soup-0-4X5.jpg"),

meal("Massaman Curry", 750, 35, 65, 38, 10, 18, [],
     "https://www.youtube.com/watch?v=K0BzBW_kJog","https://spicecravings.com/wp-content/uploads/2018/05/Thai-Massaman-Curry-Featured.jpg")

    ],
    eveningSnack: [
      meal("Papaya Salad", 160, 4, 22, 4, 3, 14, ["vegan"]),
      meal("Thai Spring Rolls", 200, 6, 30, 8, 2, 4, ["vegetarian"]),
      meal('Mango Sticky Rice', 320, 6, 65, 8, 4, 40, ['vegetarian']),
      meal('Thai Iced Tea', 180, 2, 32, 5, 0, 28, ['vegetarian']),
      meal('Grilled Banana', 120, 1, 28, 1, 3, 18, ['vegan', 'gluten-free'])
    ],
    dinner: [
     meal("Tom Yum Soup with Rice", 520, 28, 68, 14, 6, 6, [],"https://www.youtube.com/watch?v=CvNmGwzp53k","https://production-media.gousto.co.uk/cms/mood-image/2656_Chicken-Tom-Kha-Soup-0810-1583490227800.jpg"),

meal("Stir-fried Basil Chicken", 580, 36, 54, 18, 5, 6, [],"https://www.youtube.com/watch?v=OV5fQ6EHFyk","https://simplehomeedit.com/wp-content/uploads/2024/07/Chicken-and-Thai-basil-stir-fry-with-noodles-3.webp"),

meal("Panang Curry", 720, 32, 65, 38, 10, 18, [],"https://www.youtube.com/watch?v=N9SMOYkfc1c","https://hot-thai-kitchen.com/wp-content/uploads/2013/10/panang-pork-sq.jpg"),

meal("Grilled Fish with Herbs", 580, 45, 5, 38, 4, 4, ["pescatarian"],"https://www.youtube.com/watch?v=3qv3vf7Hw-c","https://static01.nyt.com/images/2024/11/24/multimedia/Salmon-With-Lemon-Herb-Marinaderex-zcfp/Salmon-With-Lemon-Herb-Marinaderex-zcfp-jumbo-v2.jpg"),

meal("Yellow Curry", 680, 30, 65, 35, 10, 15, [],"https://www.youtube.com/watch?v=VInnjo8W46E","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSIiQ028HxtZDwdk_U6tK9fDIcxS8TdiGqzUcoE5XnGi2VKPxUZgf78_BfOGZ8BQZuHdtQ&usqp=CAU"),

meal("Vegetable Stir-fry with Tofu", 520, 28, 55, 22, 12, 15, ["vegetarian"],"https://www.youtube.com/watch?v=5pPcjNjalIU","https://hips.hearstapps.com/hmg-prod/images/190130-tofu-stir-fry-horizontal-150-1549302524.jpg?crop=0.8893333333333334xw:1xh;center,top&resize=1200:*")
]
  },

  GR: {
    morningDrink: [
      meal("Greek Coffee", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal("Chamomile Tea", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal('Mountain Tea', 2, 0, 0, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Fresh Orange Juice', 110, 2, 26, 0, 1, 22, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Greek Yogurt with Honey and Walnuts", 320, 20, 28, 16, 3, 24, ["vegetarian"],
     "https://www.youtube.com/watch?v=NRoZxPyeGEQ","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTQfk3SY-FSMPXZAoRi5ws2xV365MQwFFBtBA&s"),

meal("Spanakopita (Spinach Pie)", 380, 15, 35, 22, 6, 5, ["vegetarian"],
     "https://www.youtube.com/watch?v=B788qsWT-Wg","https://www.thespruceeats.com/thmb/2Fk-NEscVoBNWDuzbiQw-LyS-QQ=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/spinach-pie-with-feta-spanakopita-1706022_hero-01-80cc6ee388474e7aad68e1d009766967.jpg"),

meal("Tyropita (Cheese Pie)", 420, 18, 32, 25, 4, 6, ["vegetarian"],
     "https://www.youtube.com/watch?v=gB_9bXDwhrU","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTk099UGeJ4pvGIqyFLNnx-Uqo8TFlC4aAPNA&s"),

meal("Olives and Feta with Bread", 350, 15, 30, 18, 6, 4, ["vegetarian"],
     "https://www.youtube.com/watch?v=PamFAWgohlw","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRhByVbOULIQpQNrw86DHDrJHuJp-DytDW0VKamYofT2AaPh0GslU3ucDBueRIYCh-6cNM&usqp=CAU"),

meal("Omelette with Vegetables", 300, 22, 8, 22, 4, 5, ["vegetarian"],
     "https://www.youtube.com/watch?v=musZ31HURws","https://images.immediate.co.uk/production/volatile/sites/2/2020/10/Healthy-Vegetable-Omelette-e8d6b9c.jpg?resize=1366,1242")

    ],
    midMorning: [
      meal("Olives & Cheese", 200, 12, 4, 16, 2, 0, ["vegetarian"]),
      meal("Fruit Bowl", 120, 2, 30, 0, 3, 20, ["vegan"]),
      meal('Handful of Almonds', 170, 6, 6, 15, 4, 1, ['vegan', 'gluten-free']),
      meal('Small Cheese Portion', 120, 8, 1, 10, 0, 1, ['vegetarian'])
    ],
    lunch: [
      meal("Greek Salad with Pita", 480, 20, 55, 18, 6, 12, ["vegetarian"],
     "https://www.youtube.com/watch?v=pnyHZQghV90","https://hips.hearstapps.com/delish/assets/15/44/1446066009-weeknight-din-greek-pita.jpg"), // Greek Salad with Pita (stuffed style)

meal("Souvlaki (Chicken)", 620, 38, 58, 20, 6, 6, [],
     "https://www.youtube.com/watch?v=GegV8ggmzbw","https://easyweeknightrecipes.com/wp-content/uploads/2024/04/Chicken-Souvlaki_0006.jpg"),// Greek Chicken Souvlaki & Pita

meal("Greek Salad with Grilled Chicken", 620, 45, 25, 38, 8, 10, [],
     "https://www.youtube.com/watch?v=GegV8ggmzbw","https://healthyfitnessmeals.com/wp-content/uploads/2020/05/instagram-In-Stream_Square___Greek-chicken-salad-4.jpg"),// use same video as above

meal("Moussaka", 680, 38, 45, 38, 10, 12, [],
     "https://www.youtube.com/watch?v=Z_GcsR7Q99s","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTUwrL8apJD5rPEPwTd5Fhlpbmv7e2vQGxMIQ&s"), // Akis Petretzikis version

meal("Souvlaki with Pita", 650, 42, 45, 32, 6, 8, [],
     "https://www.youtube.com/watch?v=GegV8ggmzbw","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRXpq0qCABEnA5dBL9mUGWks4JdhA8B8tkPQw&s"), // same souvlaki video

meal("Grilled Fish with Vegetables", 580, 45, 15, 35, 8, 6, ["pescatarian"],
     "https://www.youtube.com/watch?v=-u1IqglVECk","https://www.shutterstock.com/shutterstock/photos/404559538/display_1500/stock-photo-grilled-fish-with-steamed-vegetables-wooden-blue-background-404559538.jpg"), // whole grilled fish video

meal("Dolmades (Stuffed Grape Leaves)", 520, 22, 65, 20, 10, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=G7OLFDL63J4","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT-0ke4Aic5ajFsWl17Vy2krNk_HlLYT3Yx81TACfJT3b6jBy2hTa8bvGzShoc6nYLzPlA&usqp=CAU") // No exact video found‚Äîset to null for now

    ],
    eveningSnack: [
      meal("Pita & Tzatziki", 180, 8, 25, 6, 2, 4, ["vegetarian"]),
      meal("Roasted Nuts", 200, 8, 12, 16, 3, 3, ["vegan"]),
      meal('Yogurt with Honey', 180, 12, 22, 6, 1, 20, ['vegetarian']),
      meal('Olives and Bread', 150, 4, 18, 8, 3, 2, ['vegan', 'gluten-free']),
      meal('Baklava (1 piece)', 220, 4, 32, 10, 2, 25, ['vegetarian'])
    ],
    dinner: [
      meal("Moussaka", 640, 28, 65, 24, 5, 6, ["vegetarian"],
     "https://www.youtube.com/watch?v=bSqhzcarDRA","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ9hAXsZKARj3m1M7ZhHZMwMiY9Z6V6my7VEg&s"), // Vegetarian Moussaka :contentReference[oaicite:6]{index=6}

meal("Grilled Lamb Chops", 720, 48, 12, 52, 6, 5, [],
     "https://www.youtube.com/watch?v=xB0Ga9u_xoM","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTc8gLeVMvcoEpYKR1h36_xFdptzRhnoTR5Xz_NUHRx3GvyNWRw-gGWbLwz4A3XnJkWyVA&usqp=CAU"), // Greek Lamb Chops :contentReference[oaicite:7]{index=7}

meal("Pastitsio", 680, 35, 55, 32, 8, 12, [],
     "https://www.youtube.com/watch?v=9kJjmQqGPmc","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_bnHA7TkqBlo1j15QYY6AX5t5BSYK5tiCPQ&s"), // Greek Pastitsio :contentReference[oaicite:8]{index=8}

meal("Seafood Orzo", 620, 38, 65, 22, 8, 8, ["pescatarian"],
     "https://www.youtube.com/watch?v=rOj8o_XFbdw","https://juliasalbum.com/wp-content/uploads/2024/03/shrimp-orzo-recipe.jpg"), // Seafood Orzo :contentReference[oaicite:9]{index=9}

meal("Chicken Gyros", 650, 42, 45, 32, 8, 10, [],
     "https://www.youtube.com/watch?v=go6WmA1YWWY","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSVTxkuDHzCfhlp0YuiZ7UpOJmI5JbbwAdydFOqDcGOfaCswY8uIp3HFtvO31bVJE6ACC8&usqp=CAU"), // Chicken Gyro :contentReference[oaicite:10]{index=10}

meal("Moussaka (Classic)", 640, 28, 65, 24, 5, 6, ["vegetarian"],
     "https://www.youtube.com/watch?v=r7s0gjjreiI","https://www.mygreekdish.com/wp-content/uploads/2013/05/Moussaka-recipe-Traditional-Greek-Moussaka-with-Eggplants-750x497.jpg") // Moussaka by Jamie Oliver :contentReference[oaicite:11]{index=11}

    ]
  },

  ES: {
    morningDrink: [
      meal("Caf√© con Leche", 80, 4, 8, 4, 0, 6, ["vegetarian"]),
      meal("Black Coffee", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal('Orange Juice', 110, 2, 26, 0, 1, 22, ['vegan', 'gluten-free']),
      meal('Hot Chocolate', 200, 8, 25, 8, 3, 22, ['vegetarian'])
    ],
    breakfast: [
      meal("Tostada with Olive Oil & Tomato", 280, 8, 40, 10, 2, 6, ["vegan"],
     "https://www.youtube.com/watch?v=4l5pGMn3SLQ","https://cdn.mos.cms.futurecdn.net/MFAAfJnQTYTPwRg4AkQFW5.jpg"), // Tostada de Tomate :contentReference[oaicite:9]{index=9}

meal("Pan con Tomate", 280, 8, 35, 12, 5, 6, ["vegan","gluten-free"],
     "https://www.youtube.com/watch?v=TClhJakX-gI","https://www.yummymummykitchen.com/wp-content/uploads/2021/07/pan-con-tomate-05-720x720.jpg"), // Pan con Tomate Recipe :contentReference[oaicite:10]{index=10}

meal("Tortilla Espa√±ola", 380, 22, 25, 22, 4, 5, ["vegetarian"],
     "https://www.youtube.com/watch?v=5mKyaTcf9FA","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT-DLp-dz84GREfM81Ayo-9oGVPa6j1LWGHnA&s"), // Authentic Tortilla Espa√±ola :contentReference[oaicite:11]{index=11}

meal("Churros with Chocolate", 420, 8, 55, 18, 4, 30, ["vegetarian"],
     "https://www.youtube.com/watch?v=Apv9PVWZ390","https://www.justataste.com/wp-content/uploads/2013/03/homemade-churros-recipe.jpg"), // Make Churros Like a Pro :contentReference[oaicite:12]{index=12}

meal("Yogurt with Fruit", 250, 12, 35, 8, 3, 28, ["vegetarian"],
     "https://www.youtube.com/watch?v=qrWxyWBLg0o","https://munchmealsbyjanet.com/wp-content/uploads/2021/04/5-Portrait-Fruit-Salad.jpg"), // Yogurt & Fruit Dessert Recipe :contentReference[oaicite:13]{index=13}

meal("Magdalena (Spanish Muffin)", 200, 4, 28, 8, 1, 15, ["vegetarian"],
     "https://www.youtube.com/watch?v=6_Le3JQSSgc","https://www.carolinescooking.com/wp-content/uploads/2021/09/magdalenas-Spanish-muffins-featured-pic-sq-2.jpg") // How to make magdalenas :contentReference[oaicite:14]{index=14}

    ],
    midMorning: [
      meal("Jam√≥n & Cheese Bites", 200, 14, 8, 10, 0, 2, []),
      meal("Fruit Cup", 120, 2, 30, 0, 3, 20, ["vegan"]),
      meal('Tapas (small plate)', 180, 10, 15, 10, 3, 4, []),
      meal('Handful of Olives', 100, 1, 3, 10, 2, 0, ['vegan', 'gluten-free']),
      meal('Piece of Fruit', 90, 1, 23, 0, 3, 18, ['vegan', 'gluten-free'])
    ],
    lunch: [
      meal("Paella Valenciana", 650, 32, 85, 18, 6, 8, [],
     "https://www.youtube.com/watch?v=L_I5DYfKR0g","https://spicebreeze.com/wp-content/uploads/2022/04/Paella-Valenciana.jpg"), // Authentic Spanish classic :contentReference[oaicite:5]{index=5}

meal("Gazpacho with Bread", 420, 12, 60, 14, 6, 10, ["vegan"],
     "https://www.youtube.com/watch?v=p189MYNRDSw","https://www.themediterraneandish.com/wp-content/uploads/2019/06/Gazpacho-Soup-Recipe-7.jpg"), // Gazpacho Andaluz :contentReference[oaicite:6]{index=6}

meal("Fabada Asturiana", 680, 35, 55, 35, 15, 8, [],
     "https://www.youtube.com/watch?v=beuiM07ojcg","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqy8NzI_feUK7cLCP66krXrfKFZWd2GOKKXw&s"), // Traditional Asturian bean stew :contentReference[oaicite:7]{index=7}

meal("Pisto with Egg", 520, 25, 45, 28, 12, 18, ["vgetarian"],
     "https://www.youtube.com/watch?v=R7J7UjONUDA","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSi9fN7E5eG4bihCQlEHsbqqpc1Wz-InJtSqg&s"), // Pisto Manchego with fried egg :contentReference[oaicite:8]{index=8}

meal("Pulpo a la Gallega", 580, 45, 35, 28, 6, 5, ["pescatarian"],
     "https://www.youtube.com/watch?v=R_7DtoJUuY8","https://jetextramar.com/wp-content/uploads/2021/06/pulpo-a-la-gallega.jpg") // Authentic Galician octopus :contentReference[oaicite:9]{index=9}

    ],
    eveningSnack: [
      meal("Tapas Plate", 200, 10, 20, 10, 2, 4, ["vegetarian"]),
      meal("Tortilla Espa√±ola Slice", 180, 8, 22, 8, 1, 4, ["vegetarian"]),
      meal('Tapas Selection', 320, 20, 25, 18, 6, 8, []),
      meal('Churros (2 pieces)', 240, 4, 35, 10, 2, 20, ['vegetarian']),
      meal('Cheese and Quince', 200, 10, 25, 8, 1, 20, ['vegetarian'])
    ],
    dinner: [
      meal("Patatas Bravas & Salad", 540, 20, 70, 14, 6, 10, ["vegetarian"],
     "https://www.youtube.com/watch?v=2Hup2nypG2w","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRWDiTc3B3l8dCcIfpiYvMpoKN6tQ_cNyOaEQ&s"),

meal("Seafood Platter", 750, 55, 25, 45, 8, 8, ["pescatarian"],
     "https://www.youtube.com/watch?v=iNqIeHaYxpA","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSWt5xWKfhWHZhji1TcZy1yUwcrNPuiXzJFtw&s"),

meal("Cocido Madrile√±o", 780, 48, 55, 42, 15, 12, [],
     "https://www.youtube.com/watch?v=B88yQjsyi7U","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTd1dnK4r-Y8XpGV6ygkY5hDg2PEKcFFbUL1w&s"),

meal("Tortilla de Patatas", 520, 25, 45, 28, 6, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=pvlkYYdIBV0","https://www.pequerecetas.com/wp-content/uploads/2022/10/tortilla-patatas-receta.webp"),

meal("Vegetable Paella", 620, 22, 95, 18, 12, 10, ["vegetarian"],
     "https://www.youtube.com/watch?v=3gd2f7iIdYU","https://dishingouthealth.com/wp-content/uploads/2020/02/VegPaella.jpg")

    ]
  },

  DE: {
    morningDrink: [
      meal("Black Coffee", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal("Herbal Tea", 5, 0, 1, 0, 0, 0, ["vegan"])
    ],
    breakfast: [
      meal("Bircher Muesli", 300, 10, 50, 8, 6, 15, ["vegetarian"],
     "https://www.youtube.com/watch?v=mMIwWFi1LJg","https://www.healthygreenkitchen.com/wp-content/uploads/2016/01/Bircher-Muesli-3.jpg"), // Gordon Ramsay‚Äôs Bircher Muesli Recipe

meal("Br√∂tchen with Cheese", 320, 12, 45, 10, 2, 5, ["vegetarian"],
     "https://www.youtube.com/watch?v=OZH79JubQFI","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTRcU-65wQABL4Bvs6VP951Zgycc9_Q0Kh8NhntkGs3z1Vf9_DvkdsWWerDG4DygF-G9wE&usqp=CAU") // Leckere Br√∂tchen mit K√§se

    ],
    midMorning: [
      meal("Pretzel", 250, 8, 50, 4, 2, 4, ["vegetarian"]),
      meal("Apple Slices", 80, 1, 22, 0, 2, 18, ["vegan"])
    ],
    lunch: [
      meal("Bratwurst with Potatoes", 680, 36, 55, 28, 6, 5, [],"https://www.youtube.com/watch?v=mN-x5DJuWiY","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQPi9lbbr76C3X5h8YXdVgTUp-GotAcZ7bznA&s"),
      meal("Sauerbraten", 620, 40, 52, 20, 6, 6, [],"https://www.youtube.com/watch?v=6BMagxuKiT8","https://cdn.stoneline.de/media/c3/39/16/1732629309/sauerbraten.jpeg?ts=1732629309")
    ],
    eveningSnack: [
      meal("Cheese & Rye Bread", 200, 12, 25, 6, 3, 4, ["vegetarian"]),
      meal("Roasted Nuts", 200, 8, 12, 16, 3, 3, ["vegan"])
    ],
    dinner: [
      meal("Schnitzel with Salad", 620, 36, 54, 20, 6, 6, [],"https://www.youtube.com/watch?v=90UZHvLdWvU","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQZbIhO6TLsfe1HUqKd7rMiSh_nKFCNbyS92w&s"),
      meal("Kartoffelsuppe (Potato Soup)", 480, 18, 65, 14, 6, 8, ["vegetarian"],"https://www.youtube.com/watch?v=0SIjEEHPdv4","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSMquUYLL0QvtW6IDuw4svhc6yFoTREHrd4ug&s")
    ]
  },

  TR: {
    morningDrink: [
      meal("Turkish Tea", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal("Ayran", 80, 4, 8, 2, 0, 5, ["vegetarian"]),
      meal('Turkish Coffee', 5, 0, 1, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Black Tea', 2, 0, 0, 0, 0, 0, ['vegan', 'gluten-free']),
    ],
    breakfast: [
     meal("Menemen (Veg Omelette)", 320, 16, 22, 14, 3, 4, ["vegetarian"],
     "https://www.youtube.com/watch?v=7NlQJ_FHSG8","https://waitrose-prod.scene7.com/is/image/waitroseprod/menemen-turkish-styleomelettewithpepperandfeta?uuid=7d101877-15d7-47f4-95ba-52892a5538c4&$Waitrose-Default-Image-Preset$"), // How To Make Menemen (Turkish Egg Dish With Cheese And Tomato Sauce)

meal("Simit with Cheese", 300, 12, 48, 8, 2, 6, ["vegetarian"],
     "https://www.youtube.com/watch?v=gNrKfor0WkQ","https://img.freepik.com/premium-photo/fast-turkish-breakfast-simit-with-cheese-greens-black-wooden-table-background_249006-21630.jpg"), // How To Make Turkish Street Style Simit Bread

meal("Turkish Breakfast Spread", 520, 25, 45, 32, 12, 20, ["vegetarian"],
     "https://www.youtube.com/watch?v=s-fCkxvpzQ8","https://www.giverecipe.com/wp-content/uploads/2023/01/Breakfast-In-Turkey.jpg"), // How Turkish People Eat Breakfast | Ready in 20 min!

meal("B√∂rek", 420, 18, 35, 22, 4, 5, ["vegetarian"],
     "https://www.youtube.com/watch?v=4tPwzbBMD-g","https://thegreenquest.org/wp-content/uploads/2020/02/Borek-Potato-3-of-5-500x500.jpg"), // 2 Ingredient Easy Turkish Borek

meal("Poƒüa√ßa", 280, 8, 32, 12, 2, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=k55DLRG6ozo","https://www.giverecipe.com/wp-content/uploads/2018/09/Pogaca-Featured.jpg") // POƒûA√áA 2 Versions of my FAVORITE Turkish Pastry Recipe

    ],
    midMorning: [
      meal("Olives & Feta", 180, 8, 6, 14, 2, 2, ["vegetarian"]),
      meal("Fruit Bowl", 120, 2, 30, 0, 3, 20, ["vegan"])
    ],
    lunch: [
      meal("Doner Kebab", 650, 38, 60, 22, 6, 6, [],
     "https://www.youtube.com/watch?v=ZEF354SpSxg","https://www.unicornsinthekitchen.com/wp-content/uploads/2022/11/Doner-kebab-sq.jpg"), // How to Make Turkish D√ñNER KEBAB At Home? Both the Traditional and the Easy Way

meal("Lentil Soup with Bread", 480, 20, 65, 12, 8, 6, ["vegan"],
     "https://www.youtube.com/watch?v=8gUQg0kVn3s","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTloSz7lP_Ter4wy-rb5Ns4VI8zGl8I6r72RA&s") // Delicious Vegan Lentil Soup | easy & filling vegan recipe

    ],
    eveningSnack: [
      meal("Baklava (light)", 200, 6, 28, 10, 2, 18, ["vegetarian"]),
      meal("Tea & Nuts", 180, 6, 12, 10, 3, 6, ["vegan"])
    ],
    dinner: [
      meal("K√∂fte with Rice", 640, 36, 68, 20, 6, 6, [],
     "https://www.youtube.com/watch?v=nHUSJGz1bWc","https://mealpractice.b-cdn.net/219550215785549824/mixed-vegetable-kofta-in-tomato-gravy-with-jeera-rice-and-pickled-onions-c0XPDs7Mka.webp"), // Authentic Turkish Kofte With Rice: Lady's Thigh Meatballs

meal("Stuffed Peppers", 520, 18, 70, 14, 6, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=gHwoUxge6ZM","https://cdn.loveandlemons.com/wp-content/uploads/2023/08/vegetarian-stuffed-peppers.jpg") // Turkish VEGAN STUFFED PEPPERS - Zeytinyaƒülƒ± Biber Dolmasƒ±

    ]
  },

  VN: {
    morningDrink: [
      meal("Vietnamese Iced Coffee", 100, 2, 18, 2, 0, 15, ["vegetarian"]),
      meal("Herbal Tea", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal('Lotus Tea', 2, 0, 0, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Soy Milk', 120, 8, 10, 5, 2, 6, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Pho (light)", 320, 18, 50, 8, 4, 6, [],
     "https://www.youtube.com/watch?v=ez2_q-g9EOg","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT1T_Ww-OJcN-iQ72YIjUlbEuvujEBm7EnIvw&s"),, // Vietnamese Beef Noodle Soup - Fast Pho at Home

meal("Banh Mi (Vegetarian)", 380, 14, 50, 12, 4, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=i0_C3eRTbgg","https://sixhungryfeet.com/wp-content/uploads/2021/08/Vegan-Banh-Mi-3.jpg"), // Vegan Banh Mi - the BEST Sandwich in the World?

meal("Ph·ªü", 480, 35, 55, 12, 6, 8, [],
     "https://www.youtube.com/watch?v=ez2_q-g9EOg","https://woonheng.com/wp-content/uploads/2020/11/Vegan-Pho-9-1-768x1024.jpg"), // Vietnamese Beef Noodle Soup - Fast Pho at Home

meal("X√¥i (Sticky Rice)", 380, 10, 65, 8, 4, 5, ["vegetarian"],
     "https://www.youtube.com/watch?v=M8TzOGN-TQ0","https://fullofplants.com/wp-content/uploads/2020/11/xoi-man-chay-savory-sticky-rice-with-pate-pickles-peanuts-vegan-dish-vietnamese-inspired-9.jpg"), // X√¥i G·∫•c (Vietnamese Red Sticky Rice)

meal("B√°nh cu·ªën", 350, 18, 45, 10, 4, 6, ["vegetarian"],
     "https://www.youtube.com/watch?v=ap5PAydQay8","https://cdn.prod.website-files.com/65d20a9351c83b698cdf0df9/67080abdf67d0de8f8f13146_67080aaa6f4bcdda0a977d79_banh-cuon-extra.webp"), // How To Make B√°nh Cu·ªën, Vietnamese Rice Rolls

meal("Ch√°o (Congee)", 320, 22, 45, 8, 4, 4, ["vegetarian"],
     "https://www.youtube.com/watch?v=mNuh2E9coak","https://murmursofricotta.com/wp-content/uploads/2022/01/Chicken-Congee-Chao-Ga-8-1.jpg") // Vietnamese Chicken Congee (Chao Ga)

    ],
    midMorning: [
      meal("Fresh Papaya", 80, 2, 20, 0, 3, 15, ["vegan"]),
      meal("Spring Rolls", 180, 6, 28, 6, 2, 4, ["vegetarian"])
    ],
    lunch: [
      meal("Grilled Pork with Rice", 620, 36, 72, 20, 6, 6, [],
     "https://www.youtube.com/watch?v=ql6vn41xR0c","https://www.seriouseats.com/thmb/pOZ7A1QnmhL9PwKbiq8VnrBdAWs=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/SEA-vietnamese-grilled-pork-chop-thit-heo-nuong-xa-recipe-hero-ce03567886914fd4a0c931fbf09cea66.jpg"), // 12-Minute Vietnamese Grilled Pork Rice Bowls

meal("Vegetarian Pho", 560, 20, 85, 14, 6, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=zdk0bF20Bj8","https://myfoodstory.com/wp-content/uploads/2020/03/Vegetarian-Pho-Soup-Vietnamese-Noodle-Soup-3-500x500.jpg")// Vegan Pho Recipe TO RULE THEM ALL

    ],
    eveningSnack: [
      meal("Rice Paper Rolls", 150, 6, 25, 4, 2, 6, ["vegan"]),
      meal("Fruit Cup", 100, 2, 25, 0, 2, 18, ["vegan"])
    ],
    dinner: [
      meal("Seafood Hotpot", 640, 34, 72, 18, 6, 7, ["pescatarian"],
     "https://www.youtube.com/watch?v=rnOdFWcQ5wQ","https://media.istockphoto.com/id/1299228889/photo/seafood-hot-pot.jpg?s=612x612&w=0&k=20&c=sQoAIXcsQ6W6ULQD1E18es7nbP5mA1e8nAy9-ierWKk="), // Instant Seafood Hotpot at Home

meal("Fried Rice with Veg", 520, 18, 75, 14, 5, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=g1Zbx81LlbE","https://domesticgothess.com/wp-content/uploads/2021/06/vegetable-fried-rice.jpg") // Vegetable Fried Rice Recipe | EASY Vegetarian Chinese Dinner Idea!

    ]
  },

  BR: {
    morningDrink: [
      meal("Black Coffee", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal("A√ßa√≠ Smoothie", 150, 4, 30, 2, 4, 18, ["vegan"]),
      meal('Caf√©zinho', 5, 0, 1, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('A√ßa√≠ Bowl', 320, 8, 45, 15, 8, 30, ['vegan', 'gluten-free']),
      meal('Fresh Fruit Juice', 120, 2, 28, 1, 3, 24, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("P√£o de Queijo", 280, 10, 28, 12, 1, 2, ["vegetarian"],
     "https://www.youtube.com/watch?v=Z3VZ9s9qZ6A","https://guiadacozinha.com.br/wp-content/uploads/2019/10/pao-de-queijo-recheado-com-frango.jpg"), // P√£o de Queijo Recipe (Brazilian Cheese Bread)

meal("Tapioca Pancake", 260, 6, 45, 6, 2, 6, ["vegan"],
     "https://www.youtube.com/watch?v=fV7A0bhZMR8","https://healthtraveljunkie.com/wp-content/uploads/2019/07/banana-strawberry-tapioca-pancake-1024x682.jpg"), // Tapioca Pancake Breakfast

meal("Cuscuz Paulista", 380, 15, 45, 15, 6, 10, ["vegetarian"],
     "https://www.youtube.com/watch?v=Z3VZ9s9qZ6A","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT9EnaE2dS23HXNQBq2KqIwkarpba6CayU41w&s"), // Cuscuz Paulista Recipe

meal("Omelette with Farofa", 420, 28, 25, 22, 5, 4, ["vegetarian"],
     "https://www.youtube.com/watch?v=Z3VZ9s9qZ6A","https://images.mrcook.app/recipe-image/0191e3f7-deb1-7163-927a-e3d967089668"), // Omelette with Farofa Recipe

meal("Fruit with Granola", 300, 8, 55, 8, 8, 35, ["vegan", "gluten-free"],
     "https://www.youtube.com/watch?v=Z3VZ9s9qZ6A","https://images.immediate.co.uk/production/volatile/sites/30/2020/08/recipe-image-legacy-id-24503_12-1fcc681.jpg") // Fruit with Granola Breakfast Bowl

    ],
    midMorning: [
      meal("Papaya with Lime", 120, 2, 30, 0, 4, 18, ["vegan"]),
      meal("Nuts Mix", 180, 6, 10, 14, 2, 3, ["vegan"])
    ],
    lunch: [
      meal("Feijoada (light)", 650, 32, 70, 22, 8, 8, [],
     "https://www.youtube.com/watch?v=VgN2mjE1i4c","https://anamariareceitas.com.br/wp-content/uploads/2022/10/Feijoada-light.jpg"), // Light Feijoada Recipe ‚Äì Brazilian Black Bean Stew

meal("Grilled Fish & Rice", 580, 34, 60, 18, 6, 6, ["pescatarian"],
     "https://www.youtube.com/watch?v=OZ0iPbyCJhw","https://lh6.googleusercontent.com/proxy/fGyQzptcxBHsHZNpsWJDPACqxVnrFpfVFqzFU3A1etYn2-KDzDVxvowAcHOLkkTBpqELmM9Tq33iNhHiVCCfBjnntVHdplbLzGHKVNwHvNf1RQ")// Brazilian Grilled Fish with Rice Recipe

    ],
    eveningSnack: [
      meal("Cheese Bread", 180, 6, 22, 6, 1, 4, ["vegetarian"]),
      meal("Fruit Bowl", 120, 2, 30, 0, 4, 18, ["vegan"])
    ],
    dinner: [
      meal("Moqueca (Fish Stew)", 620, 34, 55, 18, 6, 6, ["pescatarian"],
     "https://www.youtube.com/watch?v=5p3YgJxLbwQ","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSG0X9BVZPC8CNWReFxwb268sDK1Owtq7UPDg&s"), // Brazilian Moqueca (Fish Stew) Recipe

meal("Veggie Rice Bowl", 520, 18, 75, 12, 5, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=g1Zbx81LlbE","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSWjw3U1nKIszJVk7Om8VvoVCpUOj-KFQYPtQ&s") // Vegetable Fried Rice Recipe | EASY Vegetarian Chinese Dinner Idea!

    ]
  },

  ET: {
    morningDrink: [
      meal("Black Tea", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal('Ethiopian Coffee', 5, 0, 1, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Spiced Tea', 10, 0, 2, 0, 0, 1, ['vegan', 'gluten-free']),
      meal('Fresh Juice', 110, 2, 26, 0, 1, 22, ['vegan', 'gluten-free'])
    ],
    breakfast: [
     meal("Chechebsa", 300, 10, 45, 8, 3, 5, ["vegetarian"],
     "https://www.youtube.com/watch?v=H2ZZh1r16tU","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQbmWgz4V_RrExALfTQ5tzfZSfL1xAG3L7PKg&s"), // Best Ethiopian Breakfast | Chechebsa

meal("Genfo (Porridge)", 280, 8, 50, 6, 3, 6, ["vegan"],
     "https://www.youtube.com/watch?v=9iFMR3299BY","https://www.breakfastclubcanada.org/wp-content/uploads/2023/10/Genfo-Blogue.png"), // Genfo (Ethiopian style porridge)

meal("Injera with Shiro", 380, 18, 55, 12, 10, 8, ["vegan", "gluten-free"],
     "https://www.youtube.com/watch?v=4whNgyiItjA","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRpEqy6pqcFxyZK-1_Y6PIoKxQagzVdKE47ZQ&s"), // Ethiopian Injera Pancake with Shiro Wat

meal("Ful Medames", 420, 22, 45, 18, 15, 6, ["vegan", "gluten-free"],
     "https://www.youtube.com/watch?v=94peHStXWRQ","https://thishealthytable.com/wp-content/uploads/2023/01/ful-medames-recipe-720x720.jpg"), // Ful Madames (Ethiopian Style)

meal("Kinche (Cracked Wheat)", 320, 10, 55, 8, 8, 4, ["vegan", "gluten-free"],
     "https://www.youtube.com/watch?v=RTNaGFjQgkk","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRlI0Oj0CpemSXAKHj2Q3_WIBrbH8tQeKrXXw&s"), // Kinche (Saut√©ed Cracked Wheat)

meal("Egg with Injera", 300, 20, 35, 12, 6, 4, ["vegetarian"],
     "https://www.youtube.com/watch?v=4fEdx3ysqi0","https://images.squarespace-cdn.com/content/v1/5db48cdef991e52a49075819/1603836798623-NIQ1XNZ90U8B5UUM906P/Injera+with+the+fixins.jpg") 
    ],
    midMorning: [
      meal("Fruit Plate", 100, 2, 25, 0, 3, 18, ["vegan"]),
      meal("Injera Roll (light)", 150, 4, 28, 2, 2, 5, ["vegan"])
    ],
    lunch: [
      meal("Shiro with Injera", 620, 24, 85, 18, 6, 8, ["vegan"],
     "https://www.youtube.com/watch?v=8ZmnqE_rCLs","https://media-cdn.tripadvisor.com/media/photo-s/13/31/29/c0/injera-and-shiro.jpg"),

meal("Doro Wat with Injera", 650, 32, 75, 20, 6, 7, [],
     "https://www.youtube.com/watch?v=zi4AT6uYKUs","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTYisxlVuIU7bRra0SlbGmDR6uGUikXgt8E2g&s") 
    ],
    eveningSnack: [
      meal("Roasted Chickpeas", 180, 8, 20, 6, 3, 6, ["vegan"]),
      meal("Bread with Honey", 200, 6, 32, 4, 1, 18, ["vegetarian"])
    ],
    dinner: [
      meal("Vegetable Tibs with Injera", 600, 22, 80, 16, 6, 7, ["vegan"],
     "https://www.youtube.com/watch?v=GxXvPwtvAjk","https://greatcurryrecipes.net/wp-content/uploads/2024/03/beeftibs3-.jpg"), 
meal("Beef Tibs with Injera", 640, 36, 72, 20, 6, 6, [],
     "https://www.youtube.com/watch?v=6FZyZFb2yqA","https://i.redd.it/0e0w1380oh041.jpg") 

    ]
  },

  EG: {
    morningDrink: [
      meal("Mint Tea", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal("Black Coffee", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal('Egyptian Tea', 5, 0, 1, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Sahlab', 180, 8, 25, 6, 2, 20, ['vegetarian']),
      meal('Karkadeh (Hibiscus Tea)', 10, 0, 2, 0, 0, 1, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Ta'ameya (Falafel)", 300, 12, 45, 10, 6, 8, ["vegan"],
     "https://www.youtube.com/watch?v=PdGMnAt2sRY"), 

meal("Ful Medames", 420, 22, 45, 18, 15, 6, ["vegan", "gluten-free"],
     "https://www.youtube.com/watch?v=XKlgbBOcIX0"), 

meal("Feteer Meshaltet", 450, 12, 55, 20, 5, 10, ["vegetarian"],
     "https://www.youtube.com/watch?v=V2MI0lcKwrU"), 

meal("Eggah (Egyptian Omelette)", 320, 25, 12, 20, 4, 5, ["vegetarian"],
     "https://www.youtube.com/watch?v=ZHPGxR2cYUo"), 

meal("Cheese with Bread", 350, 18, 35, 15, 4, 6, ["vegetarian"],
     "https://www.youtube.com/watch?v=2Zo8p-9SkT8") 

    ],
    midMorning: [
      meal("Pita with Hummus", 200, 8, 28, 6, 3, 6, ["vegan"]),
      meal("Fruit Plate", 120, 2, 30, 0, 3, 18, ["vegan"])
    ],
    lunch: [
      meal("Koshari", 640, 22, 95, 14, 8, 8, ["vegan"],
     "https://www.youtube.com/watch?v=MUOZDVoaJRs"), 

meal("Grilled Chicken & Rice", 620, 36, 72, 18, 6, 6, [],
     "https://www.youtube.com/watch?v=ia5lbtaQuuw") 
    ],
    eveningSnack: [
      meal("Dates & Nuts", 180, 6, 22, 6, 4, 15, ["vegan"]),
      meal("Tea & Pastry", 200, 6, 32, 8, 2, 12, ["vegetarian"])
    ],
    dinner: [
     meal("Molokhia with Bread", 580, 22, 72, 16, 6, 7, ["vegan"],
     "https://www.youtube.com/watch?v=Oz3OflvNZbI"), 

meal("Fish with Rice", 600, 32, 65, 18, 6, 6, ["pescatarian"],
     "https://www.youtube.com/watch?v=LO0hM9wRkfg") 

    ]
  },

  RU: {
    morningDrink: [
      meal("Black Tea", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal("Kvass (light)", 80, 2, 18, 0, 0, 12, ["vegetarian"]),
      meal('Russian Tea', 5, 0, 1, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Coffee with Condensed Milk', 120, 4, 18, 4, 0, 17, ['vegetarian']),
      meal('Kvass', 80, 1, 18, 0, 0, 15, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Syrniki (Cheese Pancakes)", 340, 14, 40, 12, 2, 12, ["vegetarian"],
     "https://www.youtube.com/watch?v=c7xU-fi1XFo"), 

meal("Kasha (Porridge)", 320, 12, 55, 8, 8, 15, ["vegan", "gluten-free"],
     "https://www.youtube.com/watch?v=rTT_5lk_2p4"), 

meal("Blini with Caviar", 450, 22, 35, 25, 4, 8, [],
     "https://www.youtube.com/watch?v=9GDCEc6ltAE"), 

meal("Olivier Salad", 420, 18, 35, 25, 6, 10, [],
     "https://www.youtube.com/watch?v=yc3QXKPGzwA"), 

meal("Eggs with Kolbasa", 380, 25, 8, 28, 2, 4, [],
     "https://www.youtube.com/watch?v=7uhopsEpF5k") 

    ],
    midMorning: [
      meal("Apple", 80, 1, 22, 0, 2, 18, ["vegan"]),
      meal("Black Bread Slice", 150, 4, 28, 4, 2, 6, ["vegan"])
    ],
    lunch: [
      meal("Borscht with Bread", 520, 18, 65, 14, 6, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=9XrFIC0PdEw"), 

meal("Beef Stroganoff with Rice", 650, 38, 70, 20, 6, 7, [],
     "https://www.youtube.com/watch?v=F7vLzxyqK0U") 

    ],
    eveningSnack: [
      meal("Tea with Baranki", 200, 6, 30, 6, 2, 12, ["vegetarian"]),
      meal("Nuts & Dried Fruits", 180, 6, 22, 6, 4, 15, ["vegan"])
    ],
    dinner: [
      meal("Pelmeni (Dumplings)", 620, 30, 65, 18, 6, 6, [],
     "https://www.youtube.com/watch?v=fWn5p7w-BOg"), 

meal("Cabbage Rolls", 580, 24, 70, 16, 6, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=9bVJvI4z1hE") 

    ]
  },

  KR: {
    morningDrink: [
      meal("Barley Tea", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal("Ginseng Tea", 10, 0, 2, 0, 0, 0, ["vegan"]),
      meal('Sikhye (Rice Drink)', 120, 2, 26, 1, 1, 22, ['vegan', 'gluten-free']),
      meal('Green Tea', 2, 0, 0, 0, 0, 0, ['vegan', 'gluten-free'])
    ],
    breakfast: [
     meal("Kimchi Fried Rice", 320, 12, 45, 10, 4, 6, ["vegan"],
     "https://www.youtube.com/watch?v=0gQ6z5k5nZs"), 

meal("Soybean Paste Soup", 280, 12, 35, 6, 3, 5, ["vegan"],
     "https://www.youtube.com/watch?v=0gQ6z5k5nZs"), 

meal("Doenjang Jjigae (Soybean Paste Stew)", 380, 22, 35, 18, 8, 10, ["vegan", "gluten-free"],
     "https://www.youtube.com/watch?v=0gQ6z5k5nZs"), 

meal("Gimbap", 420, 15, 55, 12, 5, 8, [],
     "https://www.youtube.com/watch?v=0gQ6z5k5nZs"), 

meal("Juk (Porridge)", 320, 12, 55, 8, 4, 5, ["vegetarian"],
     "https://www.youtube.com/watch?v=0gQ6z5k5nZs"), 

meal("Egg Banchan with Rice", 350, 20, 45, 10, 4, 4, ["vegetarian"],
     "https://www.youtube.com/watch?v=0gQ6z5k5nZs") 

    ],
    midMorning: [
      meal("Rice Cake (Tteok)", 150, 4, 32, 2, 1, 6, ["vegan"]),
      meal("Banana", 90, 1, 23, 0, 3, 18, ["vegan"])
    ],
    lunch: [
      meal("Bibimbap", 620, 24, 85, 16, 6, 10, ["vegetarian"],
     "https://www.youtube.com/watch?v=6kIkz69w2n8"), 

meal("Bulgogi with Rice", 650, 38, 72, 20, 6, 6, [],
     "https://www.youtube.com/watch?v=pSVhcR3frV8") 

    ],
    eveningSnack: [
      meal("Kimbap Roll (small)", 180, 6, 28, 6, 2, 4, ["vegetarian"]),
      meal("Sweet Potato Snack", 160, 4, 36, 2, 3, 12, ["vegan"])
    ],
    dinner: [
      meal("Samgyeopsal (Pork BBQ)", 700, 42, 60, 28, 6, 6, [],
     "https://www.youtube.com/watch?v=6GF0S7Rkxxg"), 

meal("Soy Tofu Stew", 540, 20, 65, 16, 5, 6, ["vegan"],
     "https://www.youtube.com/watch?v=3g2cV0HQ1jY") 

    ]
  },

  ID: {
    morningDrink: [
      meal("Teh Botol (Sweet Tea)", 100, 0, 24, 0, 0, 22, ["vegan"]),
      meal("Black Coffee", 5, 0, 1, 0, 0, 0, ["vegan"]),
      meal('Teh Tarik', 120, 3, 18, 4, 0, 16, ['vegetarian']),
      meal('Kopi Tubruk', 5, 0, 1, 0, 0, 0, ['vegan', 'gluten-free']),
      meal('Jamu', 40, 1, 8, 1, 2, 5, ['vegan', 'gluten-free'])
    ],
    breakfast: [
      meal("Nasi Uduk", 350, 10, 55, 10, 3, 6, ["vegetarian"],
     "https://www.youtube.com/watch?v=wRSbE5LBK18"), 

meal("Bubur Ayam (Rice Porridge)", 320, 14, 48, 8, 3, 5, [],
     "https://www.youtube.com/watch?v=K8VkNnxawew"), 

meal("Nasi Goreng", 580, 25, 65, 22, 6, 12, [],
     "https://www.youtube.com/watch?v=r3P-x12qvsw"), 

meal("Bubur Ayam", 420, 28, 45, 15, 5, 8, [],
     "https://www.youtube.com/watch?v=NOL8mcmxB00"), 

meal("Martabak Telur", 480, 22, 35, 28, 4, 6, ["vegetarian"],
     "https://www.youtube.com/watch?v=W_f9HA4DO3Y"), 

meal("Lontong Sayur", 450, 18, 55, 18, 10, 15, ["vegetarian"],
     "https://www.youtube.com/watch?v=flUmYyxGr38"), 

meal("Soto Ayam", 520, 35, 45, 22, 8, 10, [],
     "https://www.youtube.com/watch?v=0FoKBQQ0UHA") 


    ],
    midMorning: [
      meal("Banana Fritters", 180, 4, 32, 6, 2, 14, ["vegetarian"]),
      meal("Fruit Plate", 120, 2, 30, 0, 3, 18, ["vegan"])
    ],
    lunch: [
      meal("Nasi Goreng (Fried Rice)", 640, 22, 90, 16, 6, 8, ["vegetarian"],
     "https://www.youtube.com/watch?v=r3P-x12qvsw"),

meal("Satay Chicken with Rice", 620, 32, 70, 18, 6, 7, [],
     "https://www.youtube.com/watch?v=zD6y6KT7t5M") 

    ],
    eveningSnack: [
      meal("Tempeh Chips", 180, 12, 15, 8, 2, 4, ["vegan"]),
      meal("Sweet Cassava", 200, 4, 40, 4, 2, 15, ["vegan"])
    ],
    dinner: [
      meal("Gado-Gado (Veg Salad with Peanut Sauce)", 580, 20, 65, 16, 6, 12, ["vegetarian"],
     "https://www.youtube.com/watch?v=5z4w0J9gHGE"), 

meal("Fish Curry with Rice", 640, 34, 70, 18, 6, 6, ["pescatarian"],
     "https://www.youtube.com/watch?v=6WQkV9d_91Q") 

    ]
  }
  };
  document.getElementById("generateDietChart").addEventListener("click", () => {
  const country = document.getElementById("dietCountry").value;
  const catalog = CATALOG[country] || CATALOG.IN; 

  const slots = [
    { key: "morningDrink", label: "Morning Drink" },
    { key: "breakfast", label: "Breakfast" },
    { key: "midMorning", label: "Mid-Morning Snack" },
    { key: "lunch", label: "Lunch" },
    { key: "eveningSnack", label: "Evening Snack" },
    { key: "dinner", label: "Dinner" }
  ];

  let html = "";
  let totals = { cal: 0, p: 0, c: 0, f: 0 };

  slots.forEach(slot => {
    const meals = catalog[slot.key];
    if (meals && meals.length > 0) {
      const choice = meals[Math.floor(Math.random() * meals.length)];

      
      html += `
        <div class="meal-card bg-white rounded-xl p-4 shadow mb-4">
          <div class="meal-time font-bold text-lg">${slot.label}</div>
          <div class="mt-2 font-semibold">${choice.name}</div>
          <div class="text-sm text-slate-500">
            ${choice.cal} kcal ¬∑ P ${choice.p}g ¬∑ C ${choice.c}g ¬∑ F ${choice.f}g
          </div>
        </div>
      `;

      totals.cal += choice.cal;
      totals.p += choice.p;
      totals.c += choice.c;
      totals.f += choice.f;
    }
  });

  // summary card
  html += `
    <div class="meal-card bg-green-100 rounded-xl p-4 shadow mt-6">
      <div class="font-bold text-lg">Daily Nutrition Summary</div>
      <div class="text-sm mt-2">
        Total: ${totals.cal} kcal ¬∑ Protein ${totals.p}g ¬∑ Carbs ${totals.c}g ¬∑ Fat ${totals.f}g
      </div>
    </div>
  `;

  document.getElementById("chartContent").innerHTML = html;
});


// Achievement system
const ACHIEVEMENTS = [
  {
    id: 'meal-planner-novice',
    name: "Meal Planner Novice",
    description: "Create your first weekly meal plan",
    icon: "ü•â",
    achieved: false,
    progress: 0,
    target: 1
  },
  {
    id: 'global-foodie',
    name: "Global Foodie",
    description: "Try recipes from 5 different countries",
    icon: "üåé",
    achieved: false,
    progress: 0,
    target: 5
  },
  {
    id: 'health-conscious',
    name: "Health Conscious",
    description: "Complete 4 weeks of healthy eating",
    icon: "üíö",
    achieved: false,
    progress: 0,
    target: 4
  },
  {
    id: 'login-streak-7',
    name: "Consistent User",
    description: "Log in for 7 consecutive days",
    icon: "üî•",
    achieved: false,
    progress: 0,
    target: 7
  },
  {
    id: 'meal-prep-master',
    name: "Meal Prep Master",
    description: "Generate 10 meal plans",
    icon: "üë®‚Äçüç≥",
    achieved: false,
    progress: 0,
    target: 10
  },

  // üÜï Challenge achievements
  {
    id: 'challenge-master-7',
    name: "7-Day Challenge Master",
    description: "Complete a 7-day challenge",
    icon: "üèÜ",
    achieved: false,
    progress: 0,
    target: 1
  },
  {
    id: 'challenge-master-14',
    name: "2-Week Challenge Conqueror",
    description: "Complete a 14-day challenge",
    icon: "ü•á",
    achieved: false,
    progress: 0,
    target: 1
  },
  {
    id: 'challenge-master-21',
    name: "3-Week Discipline",
    description: "Complete a 21-day challenge",
    icon: "üåü",
    achieved: false,
    progress: 0,
    target: 1
  },
  {
    id: 'challenge-master-30',
    name: "Monthly Commitment",
    description: "Complete a 30-day challenge",
    icon: "üíé",
    achieved: false,
    progress: 0,
    target: 1
  }
];


  function meal(name, cal, p, c, f, fiber, sugar, tags = [], video = null, img = null) { 
  return { name, cal, p, c, f, fiber, sugar, tags, video, img }; 
}

  
  function placeholderImg(title){
    const q = encodeURIComponent(title);
    return `https://source.unsplash.com/collection/1424340/480x360/?food,${q}`; // curated food collection
  }

// --- State ---
const state = {
  country: localStorage.getItem('gdv_country') || null,
  goal: localStorage.getItem('gdv_goal') || '',
  weightHistory : [],
  forecastChart : null,
  darkMode: localStorage.getItem('gdv_darkMode') === 'true' || false,
  bmi: null,
  plan: null,
  day: 'Monday',
  diet: localStorage.getItem('gdv_diet') || 'Non-Vegetarian',
  user: localStorage.getItem('gdv_user') ? JSON.parse(localStorage.getItem('gdv_user')) : null,
  preferences: localStorage.getItem('gdv_preferences')
    ? JSON.parse(localStorage.getItem('gdv_preferences'))
    : {
        dietaryRestrictions: [],
        allergies: [],
        cuisinePreferences: [],
        dislikedIngredients: [],
        eatingTimes: {
          breakfast: "8:00",
          lunch: "13:00",
          dinner: "19:00"
        },
        goals: {
          targetWeight: null,
          targetDate: null,
          weeklyExercise: 0
        },
        mood: ""  
      },
  achievements: localStorage.getItem('gdv_achievements')
    ? JSON.parse(localStorage.getItem('gdv_achievements'))
    : ACHIEVEMENTS,
  stats: localStorage.getItem('gdv_stats')
    ? JSON.parse(localStorage.getItem('gdv_stats'))
    : {
        loginStreak: 0,
        lastLogin: null,
        plansGenerated: 0,
        countriesTried: [],
        weeksCompleted: 0
      },
  redirectAfterLogin: null
};

  // Authentication guard function
function requireAuth() {
  if (!state.user) {
    show('login');
    return false;
  }
  return true;
}

 const views = ['home','login','register','country','goals','bmi','planner','profile','achievements','exercise-planner'];
  
  function show(view){
    document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
    document.getElementById(view).classList.add('active');
    history.replaceState(null, '', `#${view}`);
    document.getElementById('activeContext').textContent = view.charAt(0).toUpperCase()+view.slice(1);
    
    // Update navbar buttons based on login state
    updateNavbar();
    
    if (view === 'achievements') {
      updateAchievementsView();
    }
    
    if (view === 'profile') {
      updateProfileView();
      document.getElementById('userMood').value = state.preferences.mood || '';
    }
  }

  function updateNavbar() {
    const btnLoginTop = document.getElementById('btnLoginTop');
    const btnGetStarted = document.getElementById('btnGetStarted');
    
    if (state.user) {
      btnLoginTop.textContent = 'Logout';
      btnLoginTop.onclick = logout;
      btnGetStarted.textContent = 'My Profile';
      btnGetStarted.onclick = () => show('profile');
    } else {
      btnLoginTop.textContent = 'Login';
      btnLoginTop.onclick = () => show('login');
      btnGetStarted.textContent = 'Get Started';
      btnGetStarted.onclick = () => show(state.country? 'goals':'country');
    }
  }

  function updateProfileView() {
    // Set dietary restrictions
    document.querySelectorAll('.pref-pill').forEach(pill => {
      const pref = pill.dataset.pref;
      if (state.preferences.dietaryRestrictions.includes(pref) || 
          state.preferences.allergies.includes(pref) ||
          state.preferences.cuisinePreferences.includes(pref)) {
        pill.classList.add('bg-blue-100', 'text-blue-800', 'border-blue-200');
      } else {
        pill.classList.remove('bg-blue-100', 'text-blue-800', 'border-blue-200');
        pill.classList.add('bg-gray-100', 'text-gray-800', 'border-gray-200');
      }
    });
    
    // Set disliked ingredients
    document.getElementById('dislikedIngredients').value = state.preferences.dislikedIngredients.join(', ');
    
    // Set goal values
    document.getElementById('targetWeight').value = state.preferences.goals.targetWeight || '';
    document.getElementById('targetDate').value = state.preferences.goals.targetDate || '';
    document.getElementById('weeklyExercise').value = state.preferences.goals.weeklyExercise || '';
    
    // Set eating times
    document.getElementById('breakfastTime').value = state.preferences.eatingTimes.breakfast;
    document.getElementById('lunchTime').value = state.preferences.eatingTimes.lunch;
    document.getElementById('dinnerTime').value = state.preferences.eatingTimes.dinner;
  }

  // Update achievements view
  function updateAchievementsView() {
    // Update progress bars
    document.getElementById('loginStreak').textContent = `${state.stats.loginStreak} days`;
    document.querySelector('#loginStreak + .progress-bar .progress-fill').style.width = 
      `${Math.min(100, (state.stats.loginStreak / 7) * 100)}%`;
    
    const planCompletion = Math.min(100, (state.stats.plansGenerated / 10) * 100);
    document.getElementById('planCompletion').textContent = `${Math.round(planCompletion)}%`;
    document.querySelector('#planCompletion + .progress-bar .progress-fill').style.width = `${planCompletion}%`;
    
    const countriesCount = state.stats.countriesTried.length;
    document.getElementById('countriesTried').textContent = `${countriesCount}/5 countries`;
    document.querySelector('#countriesTried + .progress-bar .progress-fill').style.width = 
      `${Math.min(100, (countriesCount / 5) * 100)}%`;
    
    // Render badges
    const badgesGrid = document.getElementById('badgesGrid');
    badgesGrid.innerHTML = '';
    
    state.achievements.forEach(achievement => {
      const badge = document.createElement('div');
      badge.className = `bg-white rounded-2xl p-4 text-center border-2 ${achievement.achieved ? 
        'border-yellow-400 badge-earned' : 'border-gray-200 opacity-60'}`;
      badge.innerHTML = `
        <div class="text-3xl mb-2">${achievement.icon}</div>
        <h4 class="font-semibold">${achievement.name}</h4>
        <p class="text-xs text-gray-600 mt-1">${achievement.description}</p>
        ${!achievement.achieved ? 
          `<div class="mt-2 text-xs text-gray-500">Progress: ${achievement.progress}/${achievement.target}</div>` : 
          `<div class="mt-2 text-xs text-yellow-600 font-medium">Earned!</div>`
        }
      `;
      badgesGrid.appendChild(badge);
    });
  }

  // Check and award achievements
  function checkAchievements() {
    let updated = false;
    
    // Check login streak achievement
    const loginAchievement = state.achievements.find(a => a.id === 'login-streak-7');
    if (loginAchievement && !loginAchievement.achieved) {
      loginAchievement.progress = Math.min(state.stats.loginStreak, loginAchievement.target);
      if (state.stats.loginStreak >= loginAchievement.target) {
        loginAchievement.achieved = true;
        toast(`Achievement unlocked: ${loginAchievement.name}!`);
        updated = true;
      }
    }
    
    // Check meal planner achievement
    const plannerAchievement = state.achievements.find(a => a.id === 'meal-planner-novice');
    if (plannerAchievement && !plannerAchievement.achieved && state.stats.plansGenerated > 0) {
      plannerAchievement.progress = 1;
      plannerAchievement.achieved = true;
      toast(`Achievement unlocked: ${plannerAchievement.name}!`);
      updated = true;
    }
    
    // Check meal prep master achievement
    const prepAchievement = state.achievements.find(a => a.id === 'meal-prep-master');
    if (prepAchievement && !prepAchievement.achieved) {
      prepAchievement.progress = Math.min(state.stats.plansGenerated, prepAchievement.target);
      if (state.stats.plansGenerated >= prepAchievement.target) {
        prepAchievement.achieved = true;
        toast(`Achievement unlocked: ${prepAchievement.name}!`);
        updated = true;
      }
    }
    
    // Check global foodie achievement
    const foodieAchievement = state.achievements.find(a => a.id === 'global-foodie');
    if (foodieAchievement && !foodieAchievement.achieved) {
      foodieAchievement.progress = state.stats.countriesTried.length;
      if (state.stats.countriesTried.length >= foodieAchievement.target) {
        foodieAchievement.achieved = true;
        toast(`Achievement unlocked: ${foodieAchievement.name}!`);
        updated = true;
      }
    }
    
    // Check health conscious achievement
    const healthAchievement = state.achievements.find(a => a.id === 'health-conscious');
    if (healthAchievement && !healthAchievement.achieved) {
      healthAchievement.progress = Math.min(state.stats.weeksCompleted, healthAchievement.target);
      if (state.stats.weeksCompleted >= healthAchievement.target) {
        healthAchievement.achieved = true;
        toast(`Achievement unlocked: ${healthAchievement.name}!`);
        updated = true;
      }
    }
    
    if (updated) {
      localStorage.setItem('gdv_achievements', JSON.stringify(state.achievements));
    }
  }

  function updateLoginStreak() {
    const today = new Date().toDateString();
    const lastLogin = state.stats.lastLogin ? new Date(state.stats.lastLogin).toDateString() : null;
    
    if (lastLogin === today) {
      // Already logged in today
      return;
    }
    
    const yesterday = new Date();
    yesterday.setDate(yesterday.getDate() - 1);
    const yesterdayStr = yesterday.toDateString();
    
    if (lastLogin === yesterdayStr) {
      // Consecutive login
      state.stats.loginStreak++;
    } else if (lastLogin && lastLogin !== today) {
      // Broken streak
      state.stats.loginStreak = 1;
    } else if (!lastLogin) {
      // First login
      state.stats.loginStreak = 1;
    }
    
    state.stats.lastLogin = new Date().toISOString();
    localStorage.setItem('gdv_stats', JSON.stringify(state.stats));
    
    checkAchievements();
  }

  // AI Recommendation Engine
function recommendMeals(userPreferences, availableMeals) {
  return availableMeals.map(meal => {
    let score = 0;
    
    // Score based on dietary restrictions
    if (userPreferences.dietaryRestrictions.every(r => meal.tags.includes(r))) {
      score += 10;
    }
    
    // Score based on cuisine preferences
    userPreferences.cuisinePreferences.forEach(cuisine => {
      if (meal.cuisine === cuisine) score += 5;
    });
    
    // Penalize disliked ingredients
    userPreferences.dislikedIngredients.forEach(ingredient => {
      if (meal.name.toLowerCase().includes(ingredient.toLowerCase())) score -= 20;
    });
    
    return { ...meal, score }; // ‚úÖ This must include the score property
  }).filter(meal => meal.score >= 0)
    .sort((a, b) => b.score - a.score);
}
  // Mood mapping rules
// Add this MOOD_FOODS catalog (separate from your regular meal planning)
const MOOD_FOODS = {
  stressed: [
    { name: "Dark Chocolate", cal: 150, p: 2, c: 15, f: 9, fiber: 3, sugar: 12, tags: ["magnesium"], img: "https://www.scripps.org/sparkle-assets/images/dark_chocolate_1200x750-7c14e9eb43f38f61c7f66f2beb75903f.jpg", message: "Dark chocolate contains magnesium to help relax muscles and reduce stress" },
    { name: "Spinach Salad", cal: 80, p: 5, c: 10, f: 3, fiber: 4, sugar: 2, tags: ["magnesium", "complex-carb"], img: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd", message: "Leafy greens are rich in magnesium to combat stress" },
    { name: "Oatmeal with Nuts", cal: 250, p: 8, c: 35, f: 10, fiber: 6, sugar: 5, tags: ["complex-carb", "magnesium"], img: "https://www.eatingwell.com/thmb/eMVOdsl3W0lRYj4Vyo9QlJGnLFE=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/ewl-251317-oatmeal-with-fruit-nuts-4000x2700-1661582aac034fa1ab3f1c1442b8b4d7.jpg", message: "Complex carbs help stabilize blood sugar and reduce stress" }
  ],
  tired: [
    { name: "Lean Beef", cal: 180, p: 25, c: 0, f: 8, fiber: 0, sugar: 0, tags: ["iron"], img: "https://images.unsplash.com/photo-1546833999-b9f581a1996d", message: "Iron-rich foods combat fatigue and boost energy" },
    { name: "Citrus Fruits", cal: 60, p: 1, c: 15, f: 0, fiber: 3, sugar: 12, tags: ["vitamin-c"], img: "https://www.euroschoolindia.com/blogs/wp-content/uploads/2023/10/citrus-fruits-and-vitamin-c-lessons-for-kids-jpg.webp", message: "Vitamin C helps with iron absorption and fights tiredness" },
    { name: "Quinoa Bowl", cal: 220, p: 8, c: 39, f: 4, fiber: 5, sugar: 2, tags: ["complex-carb", "iron"], img: "https://images.unsplash.com/photo-1512058564366-18510be2db19", message: "Complex carbs provide sustained energy without crashes" }
  ],
  anxious: [
    { name: "Salmon", cal: 200, p: 22, c: 0, f: 13, fiber: 0, sugar: 0, tags: ["omega3"], img: "https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2", message: "Omega-3 fatty acids in salmon help reduce anxiety" },
    { name: "Walnuts", cal: 185, p: 4, c: 4, f: 18, fiber: 2, sugar: 1, tags: ["omega3", "magnesium"], img: "https://images.unsplash.com/photo-1573246123716-6b1782bfc499", message: "Walnuts provide omega-3s and magnesium to calm nerves" },
    { name: "Chamomile Tea", cal: 5, p: 0, c: 1, f: 0, fiber: 0, sugar: 0, tags: ["magnesium"], img: "https://images.apollo247.in/pd-cms/cms/2025-08/AdobeStock_1535765917_Preview.webp", message: "Chamomile has calming properties that reduce anxiety" }
  ],
  sad: [
    { name: "Comfort Soup", cal: 180, p: 8, c: 25, f: 5, fiber: 4, sugar: 5, tags: ["comfort-protein"], img: "https://images.unsplash.com/photo-1547592166-23ac45744acd", message: "Warm, comforting foods can boost mood and provide comfort" },
    { name: "Dark Chocolate", cal: 150, p: 2, c: 15, f: 9, fiber: 3, sugar: 12, tags: ["comfort-protein"], img: "https://www.scripps.org/sparkle-assets/images/dark_chocolate_1200x750-7c14e9eb43f38f61c7f66f2beb75903f.jpg", message: "Dark chocolate stimulates endorphin production" },
    { name: "Banana Smoothie", cal: 200, p: 5, c: 40, f: 3, fiber: 5, sugar: 25, tags: ["complex-carb"], img: "https://images.unsplash.com/photo-1572490122747-3968b75cc699", message: "Natural sugars and carbs can provide a mood boost" }
  ],
  energetic: [
    { name: "Greek Yogurt with Berries", cal: 150, p: 15, c: 20, f: 3, fiber: 3, sugar: 15, tags: ["high-protein"], img: "https://images.unsplash.com/photo-1488477181946-6428a0291777", message: "High-protein foods provide sustained energy" },
    { name: "Egg White Omelette", cal: 120, p: 20, c: 2, f: 4, fiber: 1, sugar: 1, tags: ["high-protein"], img: "https://garlicallday.com/wp-content/uploads/cheese-egg-white-omelette-on-rectangular-plate.jpg", message: "Protein-rich eggs help maintain energy levels" },
    { name: "Lean Turkey Wrap", cal: 220, p: 18, c: 25, f: 6, fiber: 4, sugar: 3, tags: ["high-protein", "complex-carb"], img: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38", message: "Lean protein with complex carbs for lasting energy" }
  ],
  happy: [
    { name: "Colorful Fruit Salad", cal: 120, p: 2, c: 30, f: 1, fiber: 5, sugar: 25, tags: [], img: "https://images.unsplash.com/photo-1619566636858-adf3ef46400b", message: "Bright, colorful foods maintain your happy mood!" },
    { name: "Favorite Treat", cal: 200, p: 3, c: 25, f: 10, fiber: 2, sugar: 15, tags: [], img: "https://images.unsplash.com/photo-1486427944299-d1955d23e34d", message: "Enjoy your favorite foods in moderation" },
    { name: "Balanced Meal", cal: 400, p: 20, c: 45, f: 15, fiber: 8, sugar: 10, tags: [], img: "https://images.unsplash.com/photo-1504674900247-0877df9cc836", message: "A balanced plate keeps you feeling great!" }
  ]
};

function generateMoodRecommendations(mood) {
  // Default to happy if mood is not specified or not in our catalog
  const selectedMood = mood && MOOD_FOODS[mood] ? mood : 'happy';
  const moodFoods = MOOD_FOODS[selectedMood];
  
  // Select 3 random foods for this mood
  const recommendations = [];
  const usedIndexes = new Set();
  
  while (recommendations.length < 3 && recommendations.length < moodFoods.length) {
    const randomIndex = Math.floor(Math.random() * moodFoods.length);
    if (!usedIndexes.has(randomIndex)) {
      recommendations.push(moodFoods[randomIndex]);
      usedIndexes.add(randomIndex);
    }
  }
  
  return recommendations;
}

  // Generate AI recommendations
function generateAIRecommendations() {
  const mood = state.preferences.mood || 'happy';
  console.log("Generating recommendations for mood:", mood);
  
  // Get mood-specific foods instead of regular meal planning foods
  const moodFoods = MOOD_FOODS[mood] || MOOD_FOODS.happy;
  
  // Take 3 random foods for this mood
  const recommendations = [];
  const usedIndexes = new Set();
  
  while (recommendations.length < 3 && recommendations.length < moodFoods.length) {
    const randomIndex = Math.floor(Math.random() * moodFoods.length);
    if (!usedIndexes.has(randomIndex)) {
      recommendations.push(moodFoods[randomIndex]);
      usedIndexes.add(randomIndex);
    }
  }
  
  const recommendationsContainer = document.getElementById('aiRecommendations');
  recommendationsContainer.innerHTML = '';
  
  const moodHeader = document.createElement('div');
  moodHeader.className = 'text-center mb-4 p-3 bg-blue-50 rounded-xl';
  moodHeader.innerHTML = `
    <h3 class="font-bold text-lg">Mood-Based Recommendations</h3>
    <p class="text-sm">We've selected these foods specifically for your current mood: <span class="font-semibold">${mood}</span></p>
  `;
  recommendationsContainer.appendChild(moodHeader);
  
  recommendations.forEach(food => {
    const div = document.createElement('div');
    div.className = 'flex items-start gap-3 p-3 bg-slate-50 rounded-xl mb-3';
    div.innerHTML = `
      <img src="${food.img}" alt="${food.name}" class="w-16 h-16 object-cover rounded-lg">
      <div class="flex-1">
        <div class="font-medium">${food.name}</div>
        <div class="text-xs text-slate-500 mb-2">${food.cal} kcal ¬∑ P ${food.p}g ¬∑ C ${food.c}g ¬∑ F ${food.f}g</div>
        <div class="text-sm text-blue-600 bg-blue-100 p-2 rounded">${food.message}</div>
      </div>
    `;
    recommendationsContainer.appendChild(div);
  });
  
  // Show modal
  document.getElementById('aiModal').classList.remove('hidden');
}

  // Login functionality
  document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    const errorDiv = document.getElementById('loginError');
    const loginButton = document.getElementById('loginButton');
    const loginButtonText = document.getElementById('loginButtonText');
    const loginSpinner = document.getElementById('loginSpinner');
    
    // Show loading state
    loginButton.disabled = true;
    loginButtonText.textContent = 'Logging in...';
    loginSpinner.classList.remove('hidden');
    errorDiv.classList.add('hidden');
    
    // Simulate API call with timeout
    setTimeout(() => {
      // Check if user exists in localStorage
      const users = JSON.parse(localStorage.getItem('gdv_users') || '[]');
      const user = users.find(u => u.email === email && u.password === password);
      
      if (user) {
        // Successful login
        state.user = { name: user.name, email: user.email };
        localStorage.setItem('gdv_user', JSON.stringify(state.user));
        
        // Update login streak
        updateLoginStreak();
        
        // Reset form
        document.getElementById('loginForm').reset();
        
        // Show success message
        toast('Login successful!');
        
        // Redirect to home
        show('home');
      } else {
        // Failed login
        errorDiv.textContent = 'Invalid email or password. Please try again.';
        errorDiv.classList.remove('hidden');
      }
      
      // Reset button state
      loginButton.disabled = false;
      loginButtonText.textContent = 'Log In';
      loginSpinner.classList.add('hidden');
    }, 1500);
  });

  // Register functionality
  document.getElementById('registerForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const name = document.getElementById('registerName').value;
    const email = document.getElementById('registerEmail').value;
    const password = document.getElementById('registerPassword').value;
    const confirmPassword = document.getElementById('registerConfirmPassword').value;
    const errorDiv = document.getElementById('registerError');
    const registerButton = document.getElementById('registerButton');
    const registerButtonText = document.getElementById('registerButtonText');
    const registerSpinner = document.getElementById('registerSpinner');
    
    // Validate passwords match
    if (password !== confirmPassword) {
      errorDiv.textContent = 'Passwords do not match.';
      errorDiv.classList.remove('hidden');
      return;
    }
    
    // Show loading state
    registerButton.disabled = true;
    registerButtonText.textContent = 'Creating account...';
    registerSpinner.classList.remove('hidden');
    errorDiv.classList.add('hidden');
    
    // Simulate API call with timeout
    setTimeout(() => {
      // Check if user already exists
      const users = JSON.parse(localStorage.getItem('gdv_users') || '[]');
      if (users.some(u => u.email === email)) {
        errorDiv.textContent = 'An account with this email already exists.';
        errorDiv.classList.remove('hidden');
        
        // Reset button state
        registerButton.disabled = false;
        registerButtonText.textContent = 'Create Account';
        registerSpinner.classList.add('hidden');
        return;
      }
      
      // Create new user
      const newUser = { name, email, password };
      users.push(newUser);
      localStorage.setItem('gdv_users', JSON.stringify(users));
      
      // Auto-login the new user
      state.user = { name, email };
      localStorage.setItem('gdv_user', JSON.stringify(state.user));
      
      // Update login streak
      updateLoginStreak();
      
      // Reset form
      document.getElementById('registerForm').reset();
      
      // Show success message
      toast('Account created successfully!');
      
      // Redirect to home
      show('home');
      
      // Reset button state
      registerButton.disabled = false;
      registerButtonText.textContent = 'Create Account';
      registerSpinner.classList.add('hidden');
    }, 1500);
  });

// Save profile preferences
document.getElementById('saveProfile').addEventListener('click', function() {
  // Get disliked ingredients
  const dislikedIngredients = document.getElementById('dislikedIngredients').value
    .split(',')
    .map(item => item.trim())
    .filter(item => item !== '');
  
  state.preferences.dislikedIngredients = dislikedIngredients;
  
  // Get goal values
  state.preferences.goals.targetWeight = document.getElementById('targetWeight').value;
  state.preferences.goals.targetDate = document.getElementById('targetDate').value;
  state.preferences.goals.weeklyExercise = document.getElementById('weeklyExercise').value;
  
  // Get eating times
  state.preferences.eatingTimes.breakfast = document.getElementById('breakfastTime').value;
  state.preferences.eatingTimes.lunch = document.getElementById('lunchTime').value;
  state.preferences.eatingTimes.dinner = document.getElementById('dinnerTime').value;

  // ‚úÖ Get mood value
   state.preferences.mood = document.getElementById('userMood').value || '';

  // Save to localStorage
  localStorage.setItem('gdv_preferences', JSON.stringify(state.preferences));

  
  console.log("Saved mood:", state.preferences.mood); // ‚úÖ debug
  
  toast('Preferences saved successfully!');
});


  // Toggle preference pills
  document.querySelectorAll('.pref-pill').forEach(pill => {
    pill.addEventListener('click', function() {
      const pref = this.dataset.pref;
      const category = 
        ['gluten-free', 'dairy-free', 'vegetarian', 'vegan', 'pescatarian'].includes(pref) ? 'dietaryRestrictions' :
        ['nuts', 'shellfish', 'eggs', 'soy'].includes(pref) ? 'allergies' :
        ['italian', 'mexican', 'asian', 'indian', 'mediterranean'].includes(pref) ? 'cuisinePreferences' : null;
      
      if (category) {
        const index = state.preferences[category].indexOf(pref);
        if (index === -1) {
          state.preferences[category].push(pref);
          this.classList.add('bg-blue-100', 'text-blue-800', 'border-blue-200');
          this.classList.remove('bg-gray-100', 'text-gray-800', 'border-gray-200');
        } else {
          state.preferences[category].splice(index, 1);
          this.classList.remove('bg-blue-100', 'text-blue-800', 'border-blue-200');
          this.classList.add('bg-gray-100', 'text-gray-800', 'border-gray-200');
        }
      }
    });
  });

  // Navigation between login and register
  document.getElementById('showRegister').addEventListener('click', function(e) {
    e.preventDefault();
    show('register');
  });

  document.getElementById('showLogin').addEventListener('click', function(e) {
    e.preventDefault();
    show('login');
  });

  // AI Recommendations button
  document.getElementById('aiRecommend').addEventListener('click', generateAIRecommendations);
  
  // Close AI modal
  document.getElementById('closeAiModal').addEventListener('click', function() {
    document.getElementById('aiModal').classList.add('hidden');
  });
  
  // Apply AI recommendations
  document.getElementById('applyAiRecommendations').addEventListener('click', function() {

    toast('AI recommendations applied to your meal plan!');
    document.getElementById('aiModal').classList.add('hidden');
  });

  // Logout functionality
  function logout() {
    state.user = null;
    localStorage.removeItem('gdv_user');
    updateNavbar();
    show('home');
    toast('Logged out successfully');
  }

  // Navbar buttons
  document.getElementById('btnLoginTop').addEventListener('click', ()=>show('login'));
  document.getElementById('btnGetStarted').addEventListener('click', () => {
  if (!state.user) {
    show('login');
    toast('Please login to get started');
  } else {
    show(state.country ? 'goals' : 'country');
  }
});

  // Init footer year
  document.getElementById('year').textContent = new Date().getFullYear();

  // Build Countries grid
  const grid = document.getElementById('countryGrid');
  function renderCountries(list=COUNTRIES){
    grid.innerHTML = '';
    list.forEach(c => {
      const card = document.createElement('button');
      card.className = 'text-left bg-white rounded-2xl overflow-hidden elevate hvr';
      card.innerHTML = `
        <div class='h-36 w-full overflow-hidden'>
          <img class='w-full h-full object-cover' src='${c.img}' alt='${c.name}'/>
        </div>
        <div class='p-4'>
          <div class='flex items-center justify-between'>
            <h3 class='font-semibold'>${c.name}</h3>
            <span class='text-xs px-2 py-1 pill ${state.country===c.code? 'bg-[#E75480] text-white':'bg-slate-100 text-slate-600'}'>
  ${state.country===c.code?'Selected':'Choose'}
</span>

          </div>
        </div>`;
      card.addEventListener('click', ()=>{
        state.country = c.code; 
        localStorage.setItem('gdv_country', c.code);
        
        // Update stats for countries tried
        if (!state.stats.countriesTried.includes(c.code)) {
          state.stats.countriesTried.push(c.code);
          localStorage.setItem('gdv_stats', JSON.stringify(state.stats));
          checkAchievements();
        }
        
        document.getElementById('stat-country').textContent = c.name;
        toast(`Country set to ${c.name}`);
        renderCountries(list);
      });
      grid.appendChild(card);
    });
  }
  renderCountries();
  document.getElementById('countrySearch').addEventListener('input', (e)=>{
    const q = e.target.value.toLowerCase();
    const list = COUNTRIES.filter(c=>c.name.toLowerCase().includes(q));
    renderCountries(list);
  });
  document.getElementById('toGoalsFromCountry').addEventListener('click', ()=>show('goals'));

  // Goals
  document.querySelectorAll('.goal-card').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      state.goal = btn.dataset.goal; localStorage.setItem('gdv_goal', state.goal);
      document.querySelectorAll('.goal-card').forEach(b=>b.classList.remove('ring','ring-blue-500'));
      btn.classList.add('ring','ring-blue-500');
      toast('Goal selected');
    });
  });

  // BMI Calculator logic
  let macroChart, dailyChart;
  function computeBMI(h, w){ const m = h/100; return +(w/(m*m)).toFixed(1); }
  function goalFactor(goal){ return goal==='loss'?0.85 : goal==='gain'?1.12 : 1.0; }
  function estimateTargets(weight, goal){
    const base = 30 * weight; // simple TDEE estimate
    const cal = Math.round(base * goalFactor(goal||'maintain'));
    const protein = Math.round(1.6 * weight); // g
    const fat = Math.round((0.25 * cal)/9);
    const carbs = Math.round((cal - (protein*4 + fat*9))/4);
    return {cal, protein, carbs, fat, fiber: Math.round(weight*0.7), sugar: 50};
  }

  function updateMacroCards(sum){
    sumCal.textContent = sum.cal; sumProt.textContent = sum.protein+'g'; sumCarb.textContent = sum.carbs+'g';
    sumFat.textContent = sum.fat+'g'; sumFiber.textContent = sum.fiber+'g'; sumSugar.textContent = sum.sugar+'g';
    if(macroChart){ macroChart.destroy(); }
    macroChart = new Chart(document.getElementById('macroChart'), {
      type:'doughnut', data:{
        labels:['Protein','Carbs','Fat'], datasets:[{ data:[sum.protein*4, sum.carbs*4, sum.fat*9] }] },
      options:{ responsive:true, plugins:{ legend:{ position:'bottom' } } }
    });
  }

  document.getElementById('calcBMI').addEventListener('click', () => {
  const h = +bmiHeight.value, w = +bmiWeight.value;
  state.diet = dietPref.value;
  localStorage.setItem('gdv_diet', state.diet);

  const bmi = computeBMI(h,w);
  state.bmi = bmi;

  const cat = bmi<18.5? 'underweight' : bmi<25? 'normal' : bmi<30? 'overweight' : 'obese';
  const badge = document.getElementById('bmiBadge');
  badge.classList.remove('hidden');
  const msgMap = {
    underweight:'Weight gain may be recommended.',
    normal:'Maintain your healthy weight!',
    overweight:'Consider a gentle deficit.',
    obese:'Medical guidance recommended.'
  };
  badge.textContent = `Your BMI is ${bmi} (${cat.replace(/\b\w/g, m=>m.toUpperCase())}). ${msgMap[cat]}`;


  updateEnhancedBMI(bmi, document.getElementById("healthGoal").value);

  const targets = estimateTargets(w, state.goal||'maintain');
  updateMacroCards(targets);

  // log text area
  const log = document.getElementById('bmiLog');
  log.textContent = `BMI calculated: ${bmi} (${cat}). Generating ${state.diet.toLowerCase()} meal plan... Using ${state.goal||'maintain'} macros.`;

  // Update home hero stats
  document.getElementById('stat-cal').textContent = targets.cal;
  document.getElementById('stat-prot').textContent = targets.protein+'g';

  // Pre-generate plan
  state.plan = buildWeeklyPlan();

  // Update stats
  state.stats.plansGenerated++;
  localStorage.setItem('gdv_stats', JSON.stringify(state.stats));
  checkAchievements();

  toast('BMI updated and plan prepared');
});

  function updateEnhancedBMI(bmi, goal) {
  const name = document.getElementById("fullName").value || "User";
  const age = document.getElementById("age").value || "‚Äî";
  const gender = document.getElementById("gender").value || "‚Äî";
  const activity = document.getElementById("activityLevel").value;

  let category = "";
  let recommendation = "";

  if (bmi < 18.5) {
    category = "Underweight";
    recommendation = "Include calorie-dense meals and healthy fats.";
  } else if (bmi < 25) {
    category = "Normal weight";
    recommendation = "Maintain your healthy weight with balanced meals.";
  } else if (bmi < 30) {
    category = "Overweight";
    recommendation = "Focus on portion control and increase activity.";
  } else {
    category = "Obese";
    recommendation = "Consult a nutritionist for a safe weight loss plan.";
  }

  document.getElementById("bmiValue").textContent = bmi.toFixed(1);
  document.getElementById("bmiCategory").textContent = category;
  document.getElementById("bmiRecommendation").textContent =
    `${name}, age ${age}, (${gender}), with ${activity} lifestyle ‚Üí ${recommendation} (Goal: ${goal}).`;
}


  // Planner
  function pickUnique(arr, n){
    const copy = [...arr]; const out=[];
    while(out.length<n){
      const idx = Math.floor(Math.random()*copy.length);
      const [item] = copy.splice(idx,1);
      out.push(item);
      if(copy.length===0) copy.push(...arr.filter(x=>!out.includes(x))); // allow limited repeats
    }
    return out;
  }

  function buildWeeklyPlan(){
    const catalog = CATALOG[state.country||'IN'] || CATALOG.IN;
    const weekDays = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'];
  
    const plan = {};
    weekDays.forEach(d=>{
      plan[d] = {
        breakfast: pickUnique(catalog.breakfast, 2),
        lunch: pickUnique(catalog.lunch, 2),
        dinner: pickUnique(catalog.dinner, 2)
      };
    });
    return plan;
  }

  function renderDay(day){
    if(!state.plan) state.plan = buildWeeklyPlan();
    const meals = state.plan[day];
    renderColumn('colBreakfast', meals.breakfast);
    renderColumn('colLunch', meals.lunch);
    renderColumn('colDinner', meals.dinner);
    const totals = [...meals.breakfast, ...meals.lunch, ...meals.dinner].reduce((a,m)=>({
      cal:a.cal+m.cal, p:a.p+m.p, c:a.c+m.c, f:a.f+m.f, fiber:a.fiber+m.fiber, sugar:a.sugar+m.sugar
    }), {cal:0,p:0,c:0,f:0,fiber:0,sugar:0});
    dCal.textContent = totals.cal; dProt.textContent = totals.p+'g'; dCarb.textContent = totals.c+'g'; dFat.textContent = totals.f+'g'; dFiber.textContent = totals.fiber+'g'; dSugar.textContent = totals.sugar+'g';
    if(dailyChart){ dailyChart.destroy(); }
    dailyChart = new Chart(document.getElementById('dailyChart'), {
      type:'doughnut', data:{ labels:['Protein','Carbs','Fat'], datasets:[{ data:[totals.p*4, totals.c*4, totals.f*9] }] },
      options:{ responsive:true, plugins:{ legend:{ position:'bottom' } } }
    });

    // Options grid for tabs (default breakfast)
    renderOptions('breakfast');
  }

function renderColumn(id, items) {
  const col = document.getElementById(id);
  col.innerHTML = '';
  items.forEach((m, i) => {
    const card = document.createElement('div');
    card.className = 'bg-white rounded-2xl p-3 grid grid-cols-[84px_1fr_auto] gap-3 items-center border border-slate-200 hvr';
    card.innerHTML = `
      <img class='w-20 h-20 object-cover rounded-xl' src='${m.img}' alt='${m.name}'>
      <div>
        <div class='font-semibold leading-tight'>${m.name}</div>
        <div class='text-xs text-slate-500 mt-1'>${m.cal} kcal ¬∑ P ${m.p}g ¬∑ C ${m.c}g ¬∑ F ${m.f}g</div>
        ${m.video ? `<div class="text-xs text-blue-500 mt-1 cursor-pointer video-link" data-video="${m.video}">‚ñ∂ Watch Recipe</div>` : ''}
      </div>
      <button class='text-xs px-2 py-1 pill bg-rose-100 text-rose-700 hover:bg-rose-200' title='Remove'>‚úï</button>`;
    
    card.querySelector('button').addEventListener('click', () => {
      items.splice(i, 1);
      renderDay(state.day);
    });
    
    
    if (m.video) {
      console.log(`Video found for ${m.name}: ${m.video}`);
      const videoLink = card.querySelector('.video-link');
      videoLink.addEventListener('click', (e) => {
        e.stopPropagation();
        showVideoModal(m.video);
      });
    }
    
    col.appendChild(card);
  });
}

function renderOptions(tab){
    const catalog = CATALOG[state.country||'IN'] || CATALOG.IN;
    const list = catalog[tab];
    const grid = document.getElementById('optionsGrid'); grid.innerHTML='';
    list.forEach(m=>{
      const card = document.createElement('div');
      card.className='rounded-2xl border border-dashed border-slate-300 p-3 hvr';
      card.innerHTML = `
        <img class='w-full h-40 object-cover rounded-xl' src='${m.img}' alt='${m.name}'>
        <div class='mt-3 font-medium'>${m.name}</div>
      `;
      grid.appendChild(card);
    });
    document.querySelectorAll('.tabBtn').forEach(b=>{
      if(b.dataset.tab===tab){ b.classList.add('text-white','gradient'); b.classList.remove('border','border-slate-300'); }
      else { b.classList.remove('text-white','gradient'); b.classList.add('border','border-slate-300'); }
    })
  }

  document.getElementById('daySelect').addEventListener('change', (e)=>{ state.day = e.target.value; renderDay(state.day); });
  document.getElementById('regenPlan').addEventListener('click', ()=>{ 
    state.plan = buildWeeklyPlan(); 
    
    // Update stats
    state.stats.plansGenerated++;
    localStorage.setItem('gdv_stats', JSON.stringify(state.stats));
    checkAchievements();
    
    renderDay(state.day); 
    toast('Regenerated plan'); 
  });
  document.querySelectorAll('.tabBtn').forEach(btn=>btn.addEventListener('click', ()=>renderOptions(btn.dataset.tab)));

  function toast(msg){
    const t = document.getElementById('toast');
    t.firstElementChild.textContent = msg; t.classList.remove('hidden');
    setTimeout(()=>t.classList.add('hidden'), 1600);
  }

  
  // Router by hash with authentication
function route(){
  const h = location.hash.replace('#','');
  const protectedViews = ['country', 'goals', 'bmi', 'planner', 'profile', 'achievements', 'diet-chart','exercise-planner'];
  
  
  if (protectedViews.includes(h) && !state.user) {
    state.redirectAfterLogin = h; 
    show('login');
    toast('Please login to access this feature');
    return;
  }
  
  if(views.includes(h)) show(h); 
  else show('home');
  
  if(h==='planner') renderDay(state.day);
  if(h==='exercise-planner') initExercisePlanner(); // Initialize exercise planner
}
  window.addEventListener('hashchange', route);

  // Update navbar links to check authentication
document.querySelectorAll('nav a').forEach(link => {
  link.addEventListener('click', (e) => {
    const href = link.getAttribute('href').replace('#', '');
    const protectedViews = ['country', 'goals', 'bmi', 'planner', 'profile', 'achievements', 'diet-chart'];
    
    if (protectedViews.includes(href) && !state.user) {
      e.preventDefault();
      show('login');
      toast('Please login to access this feature');
    }
  });
});

// Add visual indicator for protected features
function updateNavVisibility() {
  const protectedViews = ['country', 'goals', 'bmi', 'planner', 'profile', 'achievements', 'diet-chart'];
  const navLinks = document.querySelectorAll('nav a');
  
  navLinks.forEach(link => {
    const href = link.getAttribute('href').replace('#', '');
    if (protectedViews.includes(href) && !state.user) {
      if (!link.innerHTML.includes('fa-lock')) {
        link.innerHTML += ' <i class="fas fa-lock text-xs"></i>';
      }
    } else {
      link.innerHTML = link.innerHTML.replace(' <i class="fas fa-lock text-xs"></i>', '');
    }
  });
}

  
  // Initialize the app
  route();
  updateNavVisibility(); 
  updateNavbar();
  
  // Style preference pills
  document.querySelectorAll('.pref-pill').forEach(pill => {
    pill.classList.add('px-3', 'py-1', 'rounded-full', 'text-sm', 'border', 'bg-gray-100', 'text-gray-800', 'border-gray-200');
  });


// Chatbot functionality
document.getElementById('chatbotButton').addEventListener('click', function() {
  document.getElementById('chatbotModal').classList.remove('hidden');
});

document.getElementById('closeChatbotModal').addEventListener('click', function() {
  document.getElementById('chatbotModal').classList.add('hidden');
});

document.getElementById('sendChatbotMessage').addEventListener('click', sendChatMessage);
document.getElementById('chatbotInput').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    sendChatMessage();
  }
});

// Quick question buttons
document.querySelectorAll('.quick-question').forEach(button => {
  button.addEventListener('click', function() {
    document.getElementById('chatbotInput').value = this.textContent;
    sendChatMessage();
  });
});

async function sendChatMessage() {
  const input = document.getElementById('chatbotInput');
  const message = input.value.trim();
  
  if (!message) return;
  
  // Add user message to chat
  addMessageToChat(message, 'user');
  input.value = '';
  
  // Ask AI and wait for reply
  const response = await generateAIResponse(message);
  addMessageToChat(response, 'bot');
}

function addMessageToChat(message, sender) {
  const messagesContainer = document.getElementById('chatbotMessages');
  const messageDiv = document.createElement('div');
  
  if (sender === 'user') {
    messageDiv.className = 'flex items-start gap-2 justify-end';
    messageDiv.innerHTML = `
      <div class="bg-blue-600 text-white rounded-2xl p-3 max-w-[80%]">
        <p class="text-sm">${message}</p>
      </div>
      <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center">
        <i class="fas fa-user text-white text-xs"></i>
      </div>
    `;
  } else {
    messageDiv.className = 'flex items-start gap-2';
    messageDiv.innerHTML = `
      <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center">
        <i class="fas fa-robot text-blue-600"></i>
      </div>
      <div class="bg-slate-100 rounded-2xl p-3 max-w-[80%]">
        <p class="text-sm">${message}</p>
      </div>
    `;
  }
  
  messagesContainer.appendChild(messageDiv);
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

async function generateAIResponse(message) {
  try {
    
    addMessageToChat("Thinking...", "bot");
    
    const response = await fetch('http://localhost:3001/api/chat', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        message: message,
        context: {
          userPreferences: state.preferences,
          userGoals: state.goal,
          userDiet: state.diet,
          country: state.country,
          bmi: state.bmi
        }
      })
    });
    

    const messagesContainer = document.getElementById('chatbotMessages');
    messagesContainer.removeChild(messagesContainer.lastChild);
    
    const data = await response.json();
    
    if (!response.ok) {
      throw new Error(data.error || 'Failed to get response');
    }
    
    return data.reply;
  } catch (error) {
    console.error('Error calling AI API:', error);
    return "I'm having trouble connecting to my knowledge base right now. Please try again later.";
  }
}

function showVideoModal(videoUrl) {
  if (!videoUrl) return;
  
  // Extract YouTube video ID from various URL formats
  let videoId = videoUrl;
  
  // Handle different YouTube URL formats
  const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
  const match = videoUrl.match(regex);
  
  if (match && match[1]) {
    videoId = match[1];
  }
  
  // Set the iframe source with autoplay disabled for better UX
  document.getElementById('videoFrame').src = `https://www.youtube.com/embed/${videoId}?rel=0`;
  
  // Show the modal
  document.getElementById('videoModal').classList.remove('hidden');
  
  // Prevent body scrolling when modal is open
  document.body.style.overflow = 'hidden';
}

function closeVideoModal() {
  document.getElementById('videoModal').classList.add('hidden');
  document.getElementById('videoFrame').src = '';
  
  // Re-enable body scrolling
  document.body.style.overflow = 'auto';
}

// Add event listeners for the video modal
document.getElementById('closeVideoModal').addEventListener('click', closeVideoModal);

// Close modal when clicking outside
document.getElementById('videoModal').addEventListener('click', function(e) {
  if (e.target === this) {
    closeVideoModal();
  }
});


// Add diet chart to views array
views.push('diet-chart');

// Add to navbar 
document.querySelector('nav').innerHTML += '<a class="text-slate-600 hover:text-slate-900" href="#diet-chart">Diet Chart</a>';

// Populate country dropdown
function populateCountryDropdown() {
  const select = document.getElementById('dietCountry');
  COUNTRIES.forEach(country => {
    const option = document.createElement('option');
    option.value = country.code;
    option.textContent = country.name;
    if (country.code === state.country) option.selected = true;
    select.appendChild(option);
  });
}

// Calculate BMR using Mifflin-St Jeor Equation
function calculateBMR(age, gender, height, weight) {
  if (gender === 'male') {
    return 10 * weight + 6.25 * height - 5 * age + 5;
  } else {
    return 10 * weight + 6.25 * height - 5 * age - 161;
  }
}

// Calculate TDEE based on activity level
function calculateTDEE(bmr, activityLevel) {
  const multipliers = {
    sedentary: 1.2,
    light: 1.375,
    moderate: 1.55,
    active: 1.725,
    very_active: 1.9
  };
  return bmr * multipliers[activityLevel];
}

// Adjust calories based on goal
function adjustCaloriesForGoal(tdee, goal) {
  const adjustments = {
    loss: 0.85,   // 15% deficit
    maintain: 1,   // maintenance
    gain: 1.15    // 15% surplus
  };
  return Math.round(tdee * adjustments[goal]);
}


// Generate meal plan based on calories and country with better variety
function generateMealPlan(totalCalories, countryCode, dietPreference) {
  const catalog = CATALOG[countryCode] || CATALOG.IN;
  
  // Calorie distribution
  const mealDistribution = {
    morningDrink: 0.05,
    breakfast: 0.25,
    midMorning: 0.10,
    lunch: 0.30,
    eveningSnack: 0.10,
    dinner: 0.20
  };

  const meals = {};
  const usedMealNames = new Set();

  for (const [mealType, percentage] of Object.entries(mealDistribution)) {
    const mealCalories = Math.round(totalCalories * percentage);
    let availableMeals = [];

    // Category selection
    if (catalog[mealType] && Array.isArray(catalog[mealType])) {
      availableMeals = catalog[mealType].slice();
    } else {
      if (mealType.includes('Drink') || mealType.includes('Snack')) {
        availableMeals = [].concat(
          catalog.breakfast?.filter(m => m.cal <= 300) || [],
          catalog.lunch?.filter(m => m.cal <= 300) || [],
          catalog.dinner?.filter(m => m.cal <= 300) || []
        );
      } else {
        availableMeals = [].concat(
          catalog.breakfast || [],
          catalog.lunch || [],
          catalog.dinner || []
        );
      }
    }

    // Diet Preference filter
    if (dietPreference === 'Vegetarian') {
      availableMeals = availableMeals.filter(
        m => m.tags && (m.tags.includes('vegetarian') || m.tags.includes('vegan'))
      );
    } else if (dietPreference === 'Vegan') {
      availableMeals = availableMeals.filter(
        m => m.tags && m.tags.includes('vegan')
      );
    } else if (dietPreference === 'Non-Vegetarian') {
      availableMeals = availableMeals.filter(
        m => !m.tags || (!m.tags.includes('vegetarian') && !m.tags.includes('vegan'))
      );
    }

    // Avoid repeats
    availableMeals = availableMeals.filter(meal => !usedMealNames.has(meal.name));
    if (availableMeals.length === 0) {
      availableMeals = catalog[mealType] || [];
    }

    // Choose closest calories
    const suitableMeals = availableMeals.filter(
      m => m && m.cal && m.cal >= mealCalories * 0.85 && m.cal <= mealCalories * 1.15
    );

    let selectedMeal;
    if (suitableMeals.length > 0) {
      selectedMeal = suitableMeals[Math.floor(Math.random() * suitableMeals.length)];
    } else {
      availableMeals.sort(
        (a, b) =>
          Math.abs((a.cal || 0) - mealCalories) -
          Math.abs((b.cal || 0) - mealCalories)
      );
      selectedMeal = availableMeals[0];
    }

    // Fallback meal if none selected
    if (!selectedMeal) {
      selectedMeal = {
        name: mealType.includes('Drink')
          ? 'Healthy Drink'
          : mealType.includes('Snack')
          ? 'Light Snack'
          : 'Balanced Meal',
        cal: mealCalories,
        p: Math.round(mealCalories * 0.15 / 4),
        c: Math.round(mealCalories * 0.55 / 4),
        f: Math.round(mealCalories * 0.30 / 9),
        fiber: 5,
        sugar: 5,
        img: placeholderImg(mealType)
      };
    }

    meals[mealType] = selectedMeal;
    usedMealNames.add(selectedMeal.name);
  }


  return adjustMealsForExercise(meals);
}

// Format time for display
function formatTime(hour, minute) {
  const period = hour >= 12 ? 'PM' : 'AM';
  const displayHour = hour % 12 || 12;
  return `${displayHour}:${minute.toString().padStart(2, '0')} ${period}`;
}

// Generate diet chart HTML
function formatTime(hour, minute) {
  const period = hour >= 12 ? 'PM' : 'AM';
  const displayHour = hour % 12 || 12;
  return `${displayHour}:${minute.toString().padStart(2, '0')} ${period}`;
}

// Generate diet chart HTML
function generateDietChartHTML(mealPlan, userDetails, totalCalories) {
  const mealTimes = {
    morningDrink: { hour: 7, minute: 0 },   // 7:00 AM
    breakfast: { hour: 8, minute: 30 },      // 8:30 AM
    midMorning: { hour: 11, minute: 0 },     // 11:00 AM
    lunch: { hour: 13, minute: 0 },          // 1:00 PM
    eveningSnack: { hour: 17, minute: 0 },   // 5:00 PM
    dinner: { hour: 20, minute: 0 }          // 8:00 PM
  };
  
  // Helper function to format meal type for display
  function formatMealType(mealType) {
    return mealType
      .replace(/([A-Z])/g, ' $1')
      .replace(/^./, str => str.toUpperCase())
      .replace('Mid Morning', 'Mid-Morning');
  }
  
  let html = `
    <div class="text-center mb-6">
      <h4 class="text-xl font-semibold">Daily Calorie Target: ${totalCalories} kcal</h4>
      <p class="text-slate-600">Based on your profile: ${userDetails.age}y, ${userDetails.gender}, ${userDetails.height}cm, ${userDetails.weight}kg</p>
    </div>
    
    <div class="space-y-4">
  `;
  
  for (const [mealType, meal] of Object.entries(mealPlan)) {
    const time = mealTimes[mealType];
    const displayMealType = formatMealType(mealType);
    
    html += `
      <div class="meal-card bg-white rounded-xl p-4 shadow mb-4">
        <div class="flex justify-between items-center mb-2">
          <span class="meal-time font-bold text-lg">${displayMealType}</span>
          <span class="text-sm text-slate-500" style="font-size:12px; color:#000; font-weight:bold;">
            ${formatTime(time.hour, time.minute)}
          </span>
        </div>
        <div class="mt-2 font-semibold">${meal.name}</div>
        <div class="text-sm text-slate-500">
          ${meal.cal} kcal ¬∑ P ${meal.p}g ¬∑ C ${meal.c}g ¬∑ F ${meal.f}g ¬∑ Fiber ${meal.fiber}g ¬∑ Sugar ${meal.sugar}g
        </div>
      </div>
    `;
  }
  
  // Add nutrition summary
  const totalCal = Object.values(mealPlan).reduce((sum, meal) => sum + (meal.cal || 0), 0);
  const totalProtein = Object.values(mealPlan).reduce((sum, meal) => sum + (meal.p || 0), 0);
  const totalCarbs = Object.values(mealPlan).reduce((sum, meal) => sum + (meal.c || 0), 0);
  const totalFat = Object.values(mealPlan).reduce((sum, meal) => sum + (meal.f || 0), 0);
  
  html += `
    <div class="meal-card bg-green-100 rounded-xl p-4 shadow mt-6">
      <div class="font-bold text-lg">Daily Nutrition Summary</div>
      <div class="text-sm mt-2">
        Total: ${totalCal} kcal ¬∑ Protein ${totalProtein}g ¬∑ Carbs ${totalCarbs}g ¬∑ Fat ${totalFat}g
      </div>
    </div>
  `;
  
  return html;
}

// Generate PDF for download
function generatePDF(dietChartHTML, userDetails) {
  // Container making
  const container = document.createElement('div');
  container.style.width = '800px'; 
  container.innerHTML = `
    <div style="text-align:center; margin-bottom:20px;">
      <h2>Personalized Diet Chart</h2>
      <p><b>Name:</b> ${userDetails.name || 'User'}</p>
      <p><b>Age:</b> ${userDetails.age} | <b>Gender:</b> ${userDetails.gender}</p>
      <p><b>Height:</b> ${userDetails.height} cm | <b>Weight:</b> ${userDetails.weight} kg</p>
      <p><b>Diet:</b> ${userDetails.dietPreference} | <b>Goal:</b> ${userDetails.goal}</p>
      <p><b>Calories:</b> ${userDetails.totalCalories} kcal</p>
    </div>
    ${dietChartHTML}
  `;

  // html2pdf settings
  const opt = {
    margin:       0.3,                      
    filename:     'diet-chart.pdf',
    image:        { type: 'jpeg', quality: 1 },
    html2canvas:  { scale: 2, scrollY: 0 }, 
    jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' },
    pagebreak:    { mode: ['css', 'legacy'] } 
  };

  html2pdf().from(container).set(opt).save();
}




// Initialize diet chart functionality when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  // Populate country dropdown
  populateCountryDropdown();
  
  // Generate diet chart button click
  document.getElementById('generateDietChart').addEventListener('click', function() {
    // Get form values
    const age = parseInt(document.getElementById('dietAge').value);
    const gender = document.getElementById('dietGender').value;
    const height = parseInt(document.getElementById('dietHeight').value);
    const weight = parseInt(document.getElementById('dietWeight').value);
    const dietPreference = document.getElementById('dietPreference').value;
    const goal = document.getElementById('dietGoal').value;
    const activityLevel = document.getElementById('dietActivity').value;
    const countryCode = document.getElementById('dietCountry').value;
    
    // Validate form
    if (!age || !height || !weight || !countryCode) {
      toast('Please fill all required fields');
      return;
    }
    
    // Calculate calories
    const bmr = calculateBMR(age, gender, height, weight);
    const tdee = calculateTDEE(bmr, activityLevel);
    const targetCalories = adjustCaloriesForGoal(tdee, goal);
    
    // Generate meal plan
    const mealPlan = generateMealPlan(targetCalories, countryCode, dietPreference);
    
    // Prepare user details
    const userDetails = {
      age, gender, height, weight, dietPreference, goal, activityLevel, countryCode,
      totalCalories: targetCalories,
      name: state.user ? state.user.name : 'User'
    };
    
    // Generate and display diet chart
    const dietChartHTML = generateDietChartHTML(mealPlan, userDetails, targetCalories);
    document.getElementById('chartContent').innerHTML = dietChartHTML;
    document.getElementById('dietChartResult').classList.remove('hidden');
    
    // Store user details for PDF generation
    document.getElementById('downloadDietChart').dataset.userDetails = JSON.stringify(userDetails);
    document.getElementById('downloadDietChart').dataset.chartHtml = dietChartHTML;
  });
  
  // Download diet chart button click
  document.getElementById('downloadDietChart').addEventListener('click', function() {
    const userDetails = JSON.parse(this.dataset.userDetails);
    const chartHtml = this.dataset.chartHtml;
    generatePDF(chartHtml, userDetails);
  });
});

// Add jsPDF library to your HTML head section
const script = document.createElement('script');
script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
document.head.appendChild(script);


// Exercise Planner functionality
function initExercisePlanner() {
  const goalButtons = document.querySelectorAll('.goal-btn');
  const exerciseCards = document.querySelectorAll('.exercise-card');
  const selectedExercises = document.querySelector('.selected-exercises');
  const totalCaloriesElement = document.getElementById('total-calories');

  const emptyMessage = document.getElementById('empty-message');
  const motivationalMessage = document.getElementById('motivational-message');
  const messageText = document.getElementById('message-text');
  const dailyChallenge = document.getElementById('daily-challenge');
  const challengeText = document.getElementById('challenge-text');
  const weightImpact = document.getElementById('weight-impact');
  const impactText = document.getElementById('impact-text');
  
  let totalCalories = 0;
  let currentGoal = 'loss';

   // Motivational messages for each goal type
  const motivationalMessages = {
    loss: [
      "Every step brings you closer to your weight loss goals!",
      "You're burning fat and building a healthier you!",
      "Consistency is key - you've got this!",
      "Your body is getting stronger with every workout!"
    ],
    maintain: [
      "Great job maintaining your healthy lifestyle!",
      "Consistent exercise is the foundation of good health!",
      "You're keeping your body strong and energized!",
      "Balance is key to maintaining your progress!"
    ],
    gain: [
      "You're building muscle and strength with every rep!",
      "Your dedication to gaining muscle is paying off!",
      "Stronger every day - keep pushing!",
      "Muscle growth happens one workout at a time!"
    ]
  };
  
  // Daily challenges for each goal type
  const dailyChallenges = {
    loss: [
      "Complete 30 minutes of cardio and burn 300+ calories today!",
      "Add 2 high-intensity exercises to your routine today!",
      "Try a new fat-burning exercise you haven't done before!",
      "Aim for 400+ calories burned through exercise today!"
    ],
    maintain: [
      "Balance your workout with 30 mins cardio and 20 mins strength training!",
      "Try a new fitness class or workout style today!",
      "Focus on proper form in all your exercises today!",
      "Complete a full-body workout hitting all major muscle groups!"
    ],
    gain: [
      "Focus on progressive overload - increase your weights today!",
      "Complete 4 sets of your main compound exercises!",
      "Ensure you're hitting each muscle group with proper form!",
      "Aim for 8-12 reps with challenging weights for muscle growth!"
    ]
  };
  
  // Show motivational message and challenge
  function updateMotivationalContent() {
    const randomMessage = motivationalMessages[currentGoal][Math.floor(Math.random() * motivationalMessages[currentGoal].length)];
    const randomChallenge = dailyChallenges[currentGoal][Math.floor(Math.random() * dailyChallenges[currentGoal].length)];
    
    messageText.textContent = randomMessage;
    challengeText.textContent = randomChallenge;
    
    motivationalMessage.classList.remove('hidden');
    dailyChallenge.classList.remove('hidden');
  }
  
  // Calculate estimated weight impact
  function updateWeightImpact() {
    if (currentGoal === 'loss') {
      // Rough estimate: 3500 calories = 1 pound of fat
      const pounds = (totalCalories / 3500).toFixed(2);
      impactText.textContent = `Burn ~${pounds} lbs of fat with this workout`;
      weightImpact.classList.remove('hidden');
    } else if (currentGoal === 'gain') {
      impactText.textContent = `Build muscle with proper nutrition recovery`;
      weightImpact.classList.remove('hidden');
    } else {
      weightImpact.classList.add('hidden');
    }
  }
  
  
  // Filter exercises based on selected goal
  goalButtons.forEach(button => {
    button.addEventListener('click', function() {
      const goal = this.getAttribute('data-goal');
      currentGoal = goal;
      
      // Update active button
      goalButtons.forEach(btn => {
        btn.classList.remove('text-white', 'gradient');
        btn.classList.add('border', 'border-slate-300');
      });
      this.classList.add('text-white', 'gradient');
      this.classList.remove('border', 'border-slate-300');
      
      
      exerciseCards.forEach(card => {
        if (card.getAttribute('data-goal') === goal) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });

      // Update motivational content
      updateMotivationalContent();
      
      // Update weight impact
      updateWeightImpact();
    });
  });
  
  // Add exercise to daily plan
  exerciseCards.forEach(card => {
    const addButton = card.querySelector('.add-button');
    
    addButton.addEventListener('click', function(e) {
      e.stopPropagation()
      
      // Extract exercise info
      const exerciseName = card.querySelector('.exercise-type').textContent;
      const caloriesText = card.querySelector('.calories').textContent;
      const calories = parseInt(caloriesText.match(/\d+/)[0]);
      
      // Add to total calories
      totalCalories += calories;
      totalCaloriesElement.textContent = totalCalories;
      
       // Create new exercise element
      const exerciseElement = document.createElement('div');
      exerciseElement.className = 'selected-exercise bg-white rounded-lg p-3 mb-3 flex justify-between items-center shadow-sm';
      exerciseElement.innerHTML = `
        <div class="exercise-info">
          <div class="exercise-name font-medium">${exerciseName}</div>
          <div class="exercise-calories text-blue-500 text-sm">${caloriesText}</div>
        </div>
        <button class="remove-btn bg-red-500 text-white w-6 h-6 rounded-full flex items-center justify-center">
          <i class="fas fa-times text-xs"></i>
        </button>
      `;
      
       // Add remove functionality
      const removeBtn = exerciseElement.querySelector('.remove-btn');
      removeBtn.addEventListener('click', function() {
        totalCalories -= calories;
        totalCaloriesElement.textContent = totalCalories;
        exerciseElement.remove();
        
        if (selectedExercises.children.length === 1) {
          emptyMessage.style.display = 'block';
        }
        
        // Update weight impact
        updateWeightImpact();
      });
      
        // Add to selected exercises
      emptyMessage.style.display = 'none';
      selectedExercises.appendChild(exerciseElement);
      
       // Visual feedback
      card.style.transform = 'translateY(-5px)';
      card.style.boxShadow = '0 10px 25px rgba(0, 0, 0, 0.15)';
      
      setTimeout(() => {
        card.style.transform = 'translateY(0)';
        card.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
      }, 300);
      
      // Change button text temporarily
      const originalText = addButton.innerHTML;
      const originalBg = addButton.style.backgroundColor;
      addButton.innerHTML = '<i class="fas fa-check"></i> Added';
      addButton.style.backgroundColor = '#10B981'; // Green
      
      setTimeout(() => {
        addButton.innerHTML = originalText;
        addButton.style.backgroundColor = originalBg;
      }, 1500);
      
      // Update weight impact
      updateWeightImpact();
    });
  });
  
  
  // Initialize with weight loss exercises
  exerciseCards.forEach(card => {
    if (card.getAttribute('data-goal') !== 'loss') {
      card.style.display = 'none';
    }
  });
  
  // Style goal buttons
  goalButtons.forEach(btn => {
    btn.classList.add('px-4', 'py-2', 'rounded-full', 'border', 'border-slate-300', 'transition', 'duration-200');
  });
  
  // Set first button as active
  goalButtons[0].classList.add('text-white', 'gradient');
  goalButtons[0].classList.remove('border', 'border-slate-300');
  
  // Show initial motivational content
  updateMotivationalContent();
}

document.addEventListener('DOMContentLoaded', function() {
  initExercisePlanner();
});


document.addEventListener('DOMContentLoaded', function () {

  function showRecommendedExercise() {
    const navEx = document.getElementById('navExercise');
    if (navEx) navEx.classList.remove('hidden');
  }

  const calcBtn = document.getElementById('calcBMI');
  if (calcBtn) {
    calcBtn.addEventListener('click', function (e) {
    
      setTimeout(function () {
        
        window.location.hash = '#planner';
        
        showRecommendedExercise();
      }, 150);

    });
  }

  const genDietBtn = document.getElementById('generateDietChart');
  if (genDietBtn) {
    genDietBtn.addEventListener('click', function () {
      setTimeout(function () {
        showRecommendedExercise();
        const result = document.getElementById('dietChartResult');
        if (result) result.classList.remove('hidden');
      }, 150);
    });
  }

  
  const applyAiBtn = document.getElementById('applyAiRecommendations');
  if (applyAiBtn) {
    applyAiBtn.addEventListener('click', function () {
      showRecommendedExercise();
      window.location.hash = '#planner';
    });
  }
});


// Dark Mode functionality
function initDarkMode() {
  // Check for saved dark mode preference
  const isDarkMode = localStorage.getItem('gdv_darkMode') === 'true';
  
  // Apply dark mode if enabled
  if (isDarkMode) {
    enableDarkMode();
  } else {
    disableDarkMode();
  }
  
  // Add event listener to toggle button
  document.getElementById('darkModeToggle').addEventListener('click', toggleDarkMode);
}

function enableDarkMode() {
  document.documentElement.classList.add('dark-mode');
  localStorage.setItem('gdv_darkMode', 'true');
  
  // Update toggle button icons
  document.querySelector('.dark-mode-icon').classList.add('hidden');
  document.querySelector('.light-mode-icon').classList.remove('hidden');
}

function disableDarkMode() {
  document.documentElement.classList.remove('dark-mode');
  localStorage.setItem('gdv_darkMode', 'false');
  
  // Update toggle button icons
  document.querySelector('.dark-mode-icon').classList.remove('hidden');
  document.querySelector('.light-mode-icon').classList.add('hidden');
}

function toggleDarkMode() {
  if (document.documentElement.classList.contains('dark-mode')) {
    disableDarkMode();
  } else {
    enableDarkMode();
  }
}
// Initialize dark mode when the page loads
document.addEventListener('DOMContentLoaded', initDarkMode);


// Nutrients with icons
const nutrients = [
  { name: "Protein", benefits: "Muscle growth & repair", foods: "Eggs, Chicken, Beans", icon: "https://img.icons8.com/color/96/000000/steak.png" },
  { name: "Carbohydrates", benefits: "Primary energy source", foods: "Rice, Oats, Fruits", icon: "https://img.icons8.com/color/96/000000/bread.png" },
  { name: "Healthy Fats", benefits: "Brain & hormones", foods: "Nuts, Avocado, Olive oil", icon: "https://img.icons8.com/color/96/000000/avocado.png" },
  { name: "Vitamin C", benefits: "Boosts immunity", foods: "Oranges, Kiwi, Guava", icon: "https://img.icons8.com/color/96/000000/orange.png" },
  { name: "Iron", benefits: "Helps blood carry oxygen", foods: "Spinach, Red Meat, Lentils", icon: "https://img.icons8.com/color/96/000000/spinach.png" },
  { name: "Calcium", benefits: "Strong bones & teeth", foods: "Milk, Yogurt, Cheese", icon: "https://img.icons8.com/color/96/000000/cheese.png" },
  { name: "Vitamin D", benefits: "Absorbs calcium, mood health", foods: "Sunlight, Salmon, Egg yolk", icon: "https://img.icons8.com/color/96/000000/sun.png" },
  { name: "Fiber", benefits: "Digestive health, fullness", foods: "Whole grains, Veggies, Fruits", icon: "https://img.icons8.com/color/96/000000/wheat.png" }
];
const container = document.getElementById("nutrientCards");
nutrients.forEach(n => {
  const card = document.createElement("div");
  card.className = "p-6 bg-white rounded-2xl shadow hvr text-center";
  card.innerHTML = `
    <img src="${n.icon}" class="mx-auto w-16 h-16 mb-3"/>
    <h4 class="font-bold mb-2">${n.name}</h4>
    <p><b>Benefits:</b> ${n.benefits}</p>
    <p><b>Sources:</b> ${n.foods}</p>
  `;
  container.appendChild(card);
});

// Goal-based with icons
const goalTips = {
  loss: { icon: "ü•ó", tips: ["High fiber veggies", "Lean proteins", "Low sugar fruits"] },
  maintain: { icon: "‚öñÔ∏è", tips: ["Balanced macros", "Plenty of vegetables", "Stay hydrated"] },
  gain: { icon: "üèãÔ∏è", tips: ["Calorie-dense foods", "Protein-rich meals", "Healthy fats & carbs"] }
};
const goalContainer = document.getElementById("goalTips");
Object.entries(goalTips).forEach(([goal, data]) => {
  const card = document.createElement("div");
  card.className = "p-6 bg-slate-50 rounded-2xl shadow hvr text-center";

  card.innerHTML = `<div class="text-4xl mb-2">${data.icon}</div>
    <h4 class="font-bold mb-2">${goal.toUpperCase()}</h4>
    <ul class="list-disc ml-6 text-left">${data.tips.map(t => `<li>${t}</li>`).join("")}</ul>`;
  goalContainer.appendChild(card);
});

// --- Quiz ---
const quiz = [
  { q: "Which vitamin is best for immunity?", options: ["Vitamin C", "Vitamin D", "Iron"], answer: "Vitamin C" },
  { q: "Which nutrient builds muscles?", options: ["Carbs", "Protein", "Fiber"], answer: "Protein" },
  { q: "Which mineral is essential for strong bones?", options: ["Iron", "Calcium", "Zinc"], answer: "Calcium" },
  { q: "What is the main source of quick energy?", options: ["Protein", "Carbohydrates", "Fats"], answer: "Carbohydrates" },
  { q: "Which vitamin do we mostly get from sunlight?", options: ["Vitamin A", "Vitamin D", "Vitamin B12"], answer: "Vitamin D" },
  { q: "Which nutrient helps in oxygen transport in blood?", options: ["Iron", "Vitamin C", "Magnesium"], answer: "Iron" },
  { q: "Which foods are rich in fiber?", options: ["White bread", "Whole grains", "Butter"], answer: "Whole grains" },
  { q: "Which food group should make up half your plate?", options: ["Vegetables & Fruits", "Proteins", "Fats"], answer: "Vegetables & Fruits" },
  { q: "What is a healthy source of fat?", options: ["French fries", "Avocado", "Sugary drinks"], answer: "Avocado" },
  { q: "Which vitamin helps in vision?", options: ["Vitamin A", "Vitamin K", "Vitamin D"], answer: "Vitamin A" },
  { q: "Which mineral is most important for preventing anemia?", options: ["Iron", "Calcium", "Zinc"], answer: "Iron" },
  { q: "Which vitamin helps with blood clotting?", options: ["Vitamin K", "Vitamin C", "Vitamin E"], answer: "Vitamin K" },
  { q: "Omega-3 fatty acids are found in which food?", options: ["Fish", "Rice", "Milk"], answer: "Fish" },
  { q: "Bananas are a rich source of which mineral?", options: ["Calcium", "Potassium", "Zinc"], answer: "Potassium" },
  { q: "Which nutrient is essential for building enzymes and hormones?", options: ["Protein", "Carbs", "Fats"], answer: "Protein" },
  { q: "Which vitamin prevents scurvy?", options: ["Vitamin A", "Vitamin C", "Vitamin D"], answer: "Vitamin C" },
  { q: "Whole milk is a source of which vitamin?", options: ["Vitamin D", "Vitamin C", "Vitamin B12"], answer: "Vitamin D" },
  { q: "Which food is highest in Vitamin B12?", options: ["Eggs", "Lentils", "Oranges"], answer: "Eggs" },
  { q: "Which mineral strengthens teeth?", options: ["Fluoride", "Iron", "Magnesium"], answer: "Fluoride" },
  { q: "Which nutrient helps regulate metabolism?", options: ["Iodine", "Vitamin A", "Vitamin K"], answer: "Iodine" },
  { q: "What percentage of the human body is water (approx.)?", options: ["30%", "60%", "90%"], answer: "60%" },
  { q: "Which food is considered a probiotic?", options: ["Yogurt", "Rice", "Chicken"], answer: "Yogurt" },
  { q: "Which vitamin is a strong antioxidant?", options: ["Vitamin E", "Vitamin B12", "Vitamin K"], answer: "Vitamin E" },
  { q: "Chronic lack of Vitamin D can lead to?", options: ["Rickets", "Scurvy", "Anemia"], answer: "Rickets" }
];

let currentQ = 0;
let score = 0;

function loadQuiz() {
  if (currentQ < quiz.length) {
    const q = quiz[currentQ];
    document.getElementById("quizQuestion").textContent = `Q${currentQ + 1}. ${q.q}`;
    const optDiv = document.getElementById("quizOptions");
    optDiv.innerHTML = "";
    document.getElementById("quizResult").textContent = "";

    q.options.forEach(opt => {
      const btn = document.createElement("button");
      btn.className = "block w-full p-2 rounded bg-slate-100 hvr";
      btn.textContent = opt;
      btn.onclick = () => {
        if (opt === q.answer) {
          document.getElementById("quizResult").textContent = "‚úÖ Correct!";
          score++;
        } else {
          document.getElementById("quizResult").textContent = "‚ùå Wrong! Correct answer: " + q.answer;
        }
        // Show "Next" button after answering
        const nextBtn = document.createElement("button");
        nextBtn.textContent = currentQ < quiz.length - 1 ? "Next Question ‚û°Ô∏è" : "See Score üèÜ";
        nextBtn.className = "mt-4 px-4 py-2 bg-green-500 text-white rounded";
        nextBtn.onclick = () => {
          currentQ++;
          loadQuiz();
        };
        optDiv.appendChild(nextBtn);
      };
      optDiv.appendChild(btn);
    });
  } else {
    // Quiz Finished
    document.getElementById("quizQuestion").textContent = "üéâ Quiz Completed!";
    document.getElementById("quizOptions").innerHTML = "";
    document.getElementById("quizResult").textContent = `Your Score: ${score} / ${quiz.length}`;
  }
}

// Load first question
loadQuiz();

// Tabs
document.querySelectorAll(".tabBtn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".tabContent").forEach(c => c.classList.add("hidden"));
    document.querySelectorAll(".tabBtn").forEach(b => b.classList.remove("text-white","gradient"));
    document.getElementById("tab-" + btn.dataset.tab).classList.remove("hidden");
    btn.classList.add("text-white","gradient");
  });
});
// Navigation view switching
document.querySelectorAll("a[href^='#']").forEach(link => {
  link.addEventListener("click", function (e) {
    const target = document.querySelector(this.getAttribute("href"));
    if (target && target.classList.contains("view")) {
      e.preventDefault(); // ‚úÖ stops default anchor jump
      // Hide all views
      document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
      // Show selected view
      target.classList.add("active");
      // Smooth scroll (optional)
      target.scrollIntoView({ behavior: "smooth" });
    }
  });
});

// 1. global state + save/load
let exerciseHistory=[],dailyCalorieAdjustment=0,proteinAdjustment=0;
function saveExerciseData(){localStorage.setItem('exerciseData',JSON.stringify({history:exerciseHistory,calorieAdjustment:dailyCalorieAdjustment,proteinAdjustment,lastUpdated:new Date().toISOString()}));}
function loadExerciseData(){const d=JSON.parse(localStorage.getItem('exerciseData')||'null');if(d){exerciseHistory=d.history||[];dailyCalorieAdjustment=d.calorieAdjustment||0;proteinAdjustment=d.proteinAdjustment||0;}}

// 2. logging functions
function logExercise(name,calories,duration){
  exerciseHistory.push({name,calories:Number(calories)||0,duration,time:new Date().toISOString()});
  if(calories>300){dailyCalorieAdjustment+=150;proteinAdjustment+=10;}
  else if(calories>150){dailyCalorieAdjustment+=75;proteinAdjustment+=5;}
  saveExerciseData();updateMealRecommendations();
}
function logSkippedWorkout(){
  dailyCalorieAdjustment-=100;proteinAdjustment-=5;
  if(dailyCalorieAdjustment<-300)dailyCalorieAdjustment=-300;
  if(proteinAdjustment<-20)proteinAdjustment=-20;
  saveExerciseData();updateMealRecommendations();
}

// 3. adjust meal plan based on exercise
function adjustMealsForExercise(plan){
  const p=JSON.parse(JSON.stringify(plan));
  const calFactor=1+(dailyCalorieAdjustment/2000);
  const protFactor=1+(proteinAdjustment/100);
  ['breakfast','lunch','dinner'].forEach(k=>{
    if(!p[k])return;
    p[k]=p[k].map(m=>{
      m.cal=Math.round((m.cal||0)*calFactor);
      m.p=Math.round((m.p||0)*protFactor);
      return m;
    });
  });
  if(exerciseHistory.some(e=>/strength|weight/i.test(e.name))){(p.dinner||[]).forEach(m=>{m.p=(m.p||0)+6;m.cal+=40;});}
  return p;
}

// 4. update and re-render
function updateMealRecommendations(){
  let current=JSON.parse(localStorage.getItem('currentMealPlan')||'null');
  if(!current && typeof generateMealPlan==='function'){
    current=generateMealPlan(localStorage.getItem('selectedCountry')||'US',localStorage.getItem('userGoal')||'maintain');
  }
  if(!current)return;
  const adj=adjustMealsForExercise(current);
  localStorage.setItem('currentMealPlan',JSON.stringify(adj));
  if(typeof renderMealPlan==='function'){renderMealPlan(adj);}
  showAdaptiveNotification();
}

// 5. notification
function showAdaptiveNotification(){
  const msg=`Meals adjusted: ${dailyCalorieAdjustment>0?`+${dailyCalorieAdjustment}`:dailyCalorieAdjustment} kcal, protein ${proteinAdjustment>0?`+${proteinAdjustment}`:proteinAdjustment}g`;
  let n=document.getElementById('adaptive-notification');
  if(!n){n=document.createElement('div');n.id='adaptive-notification';document.body.appendChild(n);}
  n.textContent=msg;
  setTimeout(()=>{if(n.parentElement)n.remove();},5000);
}

// 6. attach listeners after DOM loaded
document.addEventListener('DOMContentLoaded',()=>{
  loadExerciseData();
  document.querySelectorAll('.exercise-card .add-button').forEach(btn=>{
    btn.addEventListener('click',function(){
      const card=this.closest('.exercise-card');
      const name=card.querySelector('.exercise-type')?.textContent.trim()||'Exercise';
      const cal=parseInt(card.querySelector('.calories')?.textContent)||0;
      const dur=card.querySelector('.exercise-duration')?.textContent||'';
      logExercise(name,cal,dur);
    });
  });
  const exSection=document.querySelector('.exercises-section');
  if(exSection&&!document.getElementById('skipWorkoutBtn')){
    const skip=document.createElement('button');
    skip.id='skipWorkoutBtn';skip.className='pill px-4 py-2 bg-gray-200 mt-4';skip.textContent='I skipped my workout today';
    skip.addEventListener('click',logSkippedWorkout);
    exSection.appendChild(skip);
  }
});

views.push('progress-forecaster');

       const currentWeightInput = document.getElementById('currentWeight');
       const goalWeightInput = document.getElementById('goalWeight');
       const weeklyChangeInput = document.getElementById('weeklyChange');
       const generateForecastBtn = document.getElementById('generateForecast');
       const addWeightEntryBtn = document.getElementById('addWeightEntry');
       const weightHistoryContainer = document.getElementById('weightHistory');
       const forecastResult = document.getElementById('forecastResult');

       state.weightHistory = [];
       state.forecastChart = null;

       // Initialize Forecast
       function initProgressForecaster() {
           const savedHistory = localStorage.getItem('weightHistory');
           if (savedHistory) {
               state.weightHistory = JSON.parse(savedHistory);
               updateWeightHistory();
           }
           generateForecastBtn.addEventListener('click', generateForecast);
           addWeightEntryBtn.addEventListener('click', addWeightEntry);
       }

        // Update weight history display
        function updateWeightHistory() {
            weightHistoryContainer.innerHTML = '';
            
            if (state.weightHistory.length === 0) {
                weightHistoryContainer.innerHTML = '<p class="text-gray-500 text-sm">No weight entries yet.</p>';
                return;
            }
            
            state.weightHistory.forEach((entry, index) => {
                const entryElement = document.createElement('div');
                entryElement.className = 'flex justify-between items-center text-sm';
                entryElement.innerHTML = `
                    <span>${new Date(entry.date).toLocaleDateString()}</span>
                    <span class="font-medium">${entry.weight} kg</span>
                    <button class="text-red-500 delete-entry" data-index="${index}">√ó</button>
                `;
                weightHistoryContainer.appendChild(entryElement);
            });
            
            document.querySelectorAll('.delete-entry').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.dataset.index);
                    state.weightHistory.splice(index, 1);
                    localStorage.setItem('weightHistory', JSON.stringify(state.weightHistory));
                    updateWeightHistory();
                });
            });
        }

        // Add weight entry
        function addWeightEntry() {
            const currentWeight = parseFloat(currentWeightInput.value);
            
            if (!currentWeight || isNaN(currentWeight)) {
                alert('Please enter a valid current weight');
                return;
            }
            
            state.weightHistory.push({
                weight: currentWeight,
                date: new Date().toISOString()
            });
            
            localStorage.setItem('weightHistory', JSON.stringify(state.weightHistory));
            updateWeightHistory();
        }

        // Generate forecast - FIXED VERSION
        function generateForecast() {
            const currentWeight = parseFloat(currentWeightInput.value);
            const goalWeight = parseFloat(goalWeightInput.value);
            const weeklyChange = parseFloat(weeklyChangeInput.value);
            
            if (!currentWeight || !goalWeight || !weeklyChange || 
                isNaN(currentWeight) || isNaN(goalWeight) || isNaN(weeklyChange)) {
                alert('Please fill all fields with valid numbers');
                return;
            }
            
            // Validate weekly change direction
            if ((weeklyChange > 0 && goalWeight < currentWeight) || 
                (weeklyChange < 0 && goalWeight > currentWeight)) {
                alert('Weekly change direction does not match your goal');
                return;
            }
            
            // Calculate forecast
            const forecast = calculateWeightForecast(currentWeight, goalWeight, weeklyChange);
            
            // Display forecast
            displayForecast(forecast);
        }

        // Calculate weight forecast - CORRECTED VERSION
        function calculateWeightForecast(currentWeight, goalWeight, weeklyChange) {
            const forecast = {
                currentWeight,
                goalWeight,
                weeklyChange,
                projections: [],
                reachedGoal: false,
                goalDate: null
            };
            
            let projectedWeight = currentWeight;
            const today = new Date();
            
            // Add current weight as starting point
            forecast.projections.push({
                date: new Date(today),
                weight: projectedWeight,
                isProjected: false
            });
            
            // Calculate projections for up to 104 weeks (2 years)
            for (let i = 1; i <= 104; i++) {
                const weekDate = new Date(today);
                weekDate.setDate(today.getDate() + (i * 7));
                
                // Calculate projected weight
                projectedWeight = currentWeight + (i * weeklyChange);
                
                // Check if goal is reached
                if ((weeklyChange > 0 && projectedWeight >= goalWeight) || 
                    (weeklyChange < 0 && projectedWeight <= goalWeight)) {
                    projectedWeight = goalWeight;
                    forecast.reachedGoal = true;
                    forecast.goalDate = weekDate;
                }
                
                forecast.projections.push({
                    date: weekDate,
                    weight: parseFloat(projectedWeight.toFixed(1)),
                    isProjected: true
                });
                
                // Stop if goal reached
                if (forecast.reachedGoal) break;
            }
            
            return forecast;
        }

        // Display forecast
        function displayForecast(forecast) {
            // Prepare data for chart
            const labels = [];
            const data = [];
            const pointStyles = [];
            const pointBackgroundColors = [];
            const pointBorderColors = [];
            
            // Add data points
            forecast.projections.forEach(proj => {
                labels.push(new Date(proj.date).toLocaleDateString());
                data.push(proj.weight);
                
                if (proj.isProjected) {
                    pointStyles.push('circle');
                    pointBackgroundColors.push('#9CA3AF');
                    pointBorderColors.push('#9CA3AF');
                } else {
                    pointStyles.push('star');
                    pointBackgroundColors.push('#E75480');
                    pointBorderColors.push('#E75480');
                }
            });
            
            // Highlight goal point if reached
            if (forecast.reachedGoal) {
                const goalIndex = forecast.projections.length - 1;
                pointStyles[goalIndex] = 'rectRot';
                pointBackgroundColors[goalIndex] = '#10B981';
                pointBorderColors[goalIndex] = '#10B981';
            }
            
            // Create or update chart
            const ctx = document.getElementById('forecastChart').getContext('2d');
            
            if (state.forecastChart) {
                state.forecastChart.destroy();
            }
            
            state.forecastChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Weight (kg)',
                        data: data,
                        borderColor: '#E75480',
                        backgroundColor: 'rgba(231, 84, 128, 0.1)',
                        tension: 0.2,
                        fill: true,
                        pointStyle: pointStyles,
                        pointBackgroundColor: pointBackgroundColors,
                        pointBorderColor: pointBorderColors,
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Weight Trend Forecast',
                            font: {
                                size: 16
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Weight: ${context.raw} kg`;
                                },
                                afterLabel: function(context) {
                                    const index = context.dataIndex;
                                    if (index === 0) return 'Current weight';
                                    if (forecast.reachedGoal && index === forecast.projections.length - 1) return 'Goal weight';
                                    return 'Projected weight';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Weight (kg)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Date'
                            },
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
            
            // Display forecast text
            forecastResult.classList.remove('hidden');
            forecastResult.classList.add('show');   // ‚úÖ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßã
            if (forecast.reachedGoal) {
                const goalDate = new Date(forecast.goalDate);
                const formattedDate = goalDate.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                const weeksToGoal = Math.ceil((goalDate - new Date()) / (7 * 24 * 60 * 60 * 1000));
                
                forecastResult.innerHTML = `
                    <p class="font-semibold">At this pace, you'll reach ${forecast.goalWeight} kg by ${formattedDate}.</p>
                    <p class="text-sm mt-1">Based on a weekly change of ${forecast.weeklyChange} kg. It will take approximately ${weeksToGoal} weeks to reach your goal.</p>
                `;
            } else {
                const lastProjection = forecast.projections[forecast.projections.length - 1];
                const lastDate = new Date(lastProjection.date);
                const formattedDate = lastDate.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                forecastResult.innerHTML = `
                    <p class="font-semibold">In 2 years (${formattedDate}), you'll reach ${lastProjection.weight} kg.</p>
                    <p class="text-sm mt-1">Based on a weekly change of ${forecast.weeklyChange} kg. 
                    You'll need to adjust your plan to reach your goal of ${forecast.goalWeight} kg.</p>
                `;
            }
        }
       document.addEventListener('DOMContentLoaded', initProgressForecaster);

// Challenge data and functionality
const challenges = {
  'plant-protein': {
    name: '7-Day Plant-Based Protein Boost',
    duration: 7,
    description: 'Increase your plant protein intake with delicious meat alternatives',
    goal: 'Replace one animal protein source with plant-based daily'
  },
  'sugar-free': {
    name: '14-Day Sugar-Free Challenge',
    duration: 14,
    description: 'Eliminate added sugars and discover natural sweetness',
    goal: 'Avoid all added sugars for 14 days'
  },
  'mindful-eating': {
    name: '21-Day Mindful Eating',
    duration: 21,
    description: 'Slow down and enjoy your food without distractions',
    goal: 'Eat meals mindfully each day'
  },
  'hydration-boost': {
    name: '10-Day Hydration Boost',
    duration: 10,
    description: 'Stay hydrated with optimal water intake',
    goal: 'Drink at least 8 glasses of water daily'
  },
  'salad-a-day': {
    name: '30-Day Salad-a-Day Challenge',
    duration: 30,
    description: 'Add one colorful salad to your meals every day',
    goal: 'Eat at least one salad daily'
  },
  'sleep-reset': {
    name: '7-Day Sleep & Nutrition Reset',
    duration: 7,
    description: 'Balance meals and sleep for optimal energy',
    goal: 'Eat balanced meals and sleep 7‚Äì8 hours daily'
  },
  'whole-fruit': {
    name: '14-Day Whole Fruit Only',
    duration: 14,
    description: 'Satisfy sweet cravings with fresh fruit',
    goal: 'Eat fruits instead of desserts or sweets'
  },
  'fiber-upgrade': {
    name: '10-Day Fiber Upgrade',
    duration: 10,
    description: 'Boost gut health with fiber-rich foods',
    goal: 'Add fiber-rich foods daily'
  },
  'omega-3': {
    name: '21-Day Omega-3 Boost',
    duration: 21,
    description: 'Support heart and brain health with omega-3',
    goal: 'Eat omega-3 rich food daily'
  },
  'green-tea': {
    name: '7-Day Green Tea Detox',
    duration: 7,
    description: 'Boost metabolism with daily green tea',
    goal: 'Drink green tea once daily'
  },
  'dairy-free': {
    name: '14-Day Dairy-Free Challenge',
    duration: 14,
    description: 'Discover plant-based alternatives to dairy',
    goal: 'Replace dairy with alternatives daily'
  },
  'whole-grains': {
    name: '21-Day Whole Grains Switch',
    duration: 21,
    description: 'Replace refined grains with whole grains',
    goal: 'Choose whole grains daily'
  },
  'anti-inflammatory': {
    name: '30-Day Anti-Inflammatory Diet',
    duration: 30,
    description: 'Focus on anti-inflammatory foods for wellness',
    goal: 'Eat anti-inflammatory meals daily'
  },
  'home-cooked': {
    name: '10-Day Home-Cooked Meals',
    duration: 10,
    description: 'Cook all your meals at home',
    goal: 'Eat only home-cooked meals daily'
  },
  'smoothie': {
    name: '7-Day Smoothie Breakfast',
    duration: 7,
    description: 'Kickstart mornings with nutrient-packed smoothies',
    goal: 'Drink a smoothie for breakfast daily'
  }
};

// active challenge
let activeChallenge = null;
let challengeProgress = 0;

// DOM elements
const challengeCards = document.querySelectorAll('.challenge-card');
const startButtons = document.querySelectorAll('.start-challenge');
const activeChallengeContainer = document.getElementById('activeChallengeContainer');
const noActiveChallenge = document.getElementById('noActiveChallenge');
const activeChallengeElement = document.getElementById('activeChallenge');
const challengeName = document.getElementById('challengeName');
const challengeDays = document.getElementById('challengeDays');
const challengeProgressText = document.getElementById('challengeProgressText');
const challengeProgressBar = document.getElementById('challengeProgressBar');
const dailyCheck = document.getElementById('dailyCheck');
const submitCheckIn = document.getElementById('submitCheckIn');
const cancelChallengeBtn = document.getElementById('cancelChallenge');
const aiFeedback = document.getElementById('aiFeedback');
const feedbackText = document.getElementById('feedbackText');

// Initialize challenges
function initChallenges() {
  // Load active challenge from localStorage
  const savedChallenge = localStorage.getItem('activeChallenge');
  const savedProgress = localStorage.getItem('challengeProgress');
  
  if (savedChallenge) {
    activeChallenge = JSON.parse(savedChallenge);
    challengeProgress = parseInt(savedProgress) || 0;
    showActiveChallenge();
  }
}

// Show active challenge
function showActiveChallenge() {
  if (activeChallenge) {
    activeChallengeContainer.classList.remove('hidden'); 
    noActiveChallenge.classList.add('hidden');
    activeChallengeElement.classList.remove('hidden');
    
    challengeName.textContent = activeChallenge.name;
    challengeDays.textContent = `${activeChallenge.duration} days`;
    updateProgressUI();
    
    // Generate AI feedback
    generateAIFeedback();
  } else {
    activeChallengeContainer.classList.remove('hidden'); 
    noActiveChallenge.classList.remove('hidden');
    activeChallengeElement.classList.add('hidden');
  }
}


// Start a new challenge
function startChallenge(challengeId) {
  activeChallenge = {
    id: challengeId,
    ...challenges[challengeId],
    startDate: new Date().toISOString()
  };
  
  challengeProgress = 0;
  localStorage.setItem('activeChallenge', JSON.stringify(activeChallenge));
  localStorage.setItem('challengeProgress', challengeProgress);
  
  showActiveChallenge();
  
  // Show notification
  showNotification(`Started ${activeChallenge.name}!`);
}

// Update progress UI
function updateProgressUI() {
  const progressPercent = (challengeProgress / activeChallenge.duration) * 100;
  
  challengeProgressText.textContent = `${challengeProgress}/${activeChallenge.duration} days`;
  challengeProgressBar.style.width = `${progressPercent}%`;
}

// Generate AI feedback
function generateAIFeedback() {
  const feedbackMessages = {
  'plant-protein': [
    "Great start! Try adding lentils to your lunch.",
    "How about tofu scramble tomorrow morning?",
    "Halfway there! Chickpea curry can fuel your dinner.",
    "You're finishing strong on plant power!"
  ],
  'sugar-free': [
    "Day 1 is the hardest! Stay strong.",
    "Notice fewer sugar crashes already?",
    "Fruits can satisfy your sweet cravings.",
    "You're glowing without sugar‚Äîkeep it up!"
  ],
  'mindful-eating': [
    "Put your phone away and just enjoy your meal.",
    "Notice textures and flavors while eating slowly.",
    "You're creating mindful eating habits!"
  ],
  'hydration-boost': [
    "Keep a bottle nearby to remind you to drink.",
    "Hydration helps with focus and energy!",
    "Notice glowing skin and better energy?"
  ],
  'salad-a-day': [
    "Add colorful veggies to boost nutrition.",
    "Try new salad dressings to keep it fun.",
    "Consistency is key‚Äîyou‚Äôre crushing it!"
  ],
  'sleep-reset': [
    "Try to stop eating 2 hours before bed.",
    "Notice more energy with good sleep?",
    "Balanced food + good rest = magic."
  ],
  'whole-fruit': [
    "Fresh fruit can replace desserts.",
    "Try mixing berries and oranges.",
    "Your body loves these natural sugars."
  ],
  'fiber-upgrade': [
    "Add beans or oats for extra fiber.",
    "Fiber keeps digestion smooth.",
    "Healthy gut, happy you!"
  ],
  'omega-3': [
    "Try salmon, flax, or chia seeds.",
    "Great for heart and brain health.",
    "Omega-3 fuels long-term wellness."
  ],
  'green-tea': [
    "Swap one coffee for green tea.",
    "Boosts metabolism and calmness.",
    "Your body thanks you for the detox!"
  ],
  'dairy-free': [
    "Try almond or oat milk in coffee.",
    "Cheese alternatives can be delicious!",
    "Your gut feels lighter without dairy."
  ],
  'whole-grains': [
    "Switch white rice to brown or quinoa.",
    "Whole grains give sustained energy.",
    "Fiber + vitamins = win!"
  ],
  'anti-inflammatory': [
    "Load up on leafy greens and berries.",
    "Avoid processed, go fresh instead.",
    "Your joints and body feel better already."
  ],
  'home-cooked': [
    "Cooking saves money and calories.",
    "Try new recipes for fun.",
    "Home food = more control."
  ],
  'smoothie': [
    "Try spinach + banana for energy.",
    "Berry smoothies boost antioxidants.",
    "Breakfast made easy and healthy!"
  ]
};


  const messages = feedbackMessages[activeChallenge.id];
  const randomMessage = messages[Math.min(challengeProgress, messages.length - 1)];
  
  feedbackText.textContent = randomMessage;
  aiFeedback.classList.remove('hidden');
}

// Complete daily check-in
function completeCheckIn() {
  challengeProgress++;
  localStorage.setItem('challengeProgress', challengeProgress);
  
  updateProgressUI();
  generateAIFeedback();
  
  // Reset check-in for next day
  dailyCheck.checked = false;
  submitCheckIn.disabled = true;
  
  // Check if challenge is completed
  if (challengeProgress >= activeChallenge.duration) {
    showNotification(`Congratulations! You completed the ${activeChallenge.name}!`);
    
    // Award achievement
    awardAchievement(`challenge-${activeChallenge.id}`);
    resetChallenge();
  }
}

// Reset challenge
function resetChallenge() {
  activeChallenge = null;
  challengeProgress = 0;
  
  localStorage.removeItem('activeChallenge');
  localStorage.removeItem('challengeProgress');
  
  showActiveChallenge();
}

// Event listeners
startButtons.forEach(button => {
  button.addEventListener('click', () => {
    startChallenge(button.dataset.challenge);
  });
});

dailyCheck.addEventListener('change', () => {
  submitCheckIn.disabled = !dailyCheck.checked;
});

submitCheckIn.addEventListener('click', completeCheckIn);

cancelChallengeBtn.addEventListener('click', () => {
  if (confirm('Are you sure you want to cancel this challenge? Your progress will be lost.')) {
    resetChallenge();
  }
});

function showNotification(message) {
  
  const toast = document.createElement('div');
  toast.className = 'fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-slate-900 text-white px-4 py-3 rounded-xl shadow-xl z-50';
  toast.textContent = message;
  
  document.body.appendChild(toast);
  
  
  setTimeout(() => {
    toast.remove();
  }, 3000);
}
function awardAchievement(achievementId) {
  const achievements = JSON.parse(localStorage.getItem('achievements')) || [];
  if (!achievements.includes(achievementId)) {
    achievements.push(achievementId);
    localStorage.setItem('achievements', JSON.stringify(achievements));
    showNotification("üèÜ New Achievement Unlocked!");
    
  }
}
document.addEventListener('DOMContentLoaded', initChallenges);
</script>
</body>
</html>